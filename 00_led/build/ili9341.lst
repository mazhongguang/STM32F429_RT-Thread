ARM GAS  /tmp/ccvxPE0v.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ili9341.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.LCD_WR_REG,"ax",%progbits
  18              		.align	1
  19              		.global	LCD_WR_REG
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	LCD_WR_REG:
  26              	.LFB120:
  27              		.file 1 "hardware/LCD/ili9341.c"
   1:hardware/LCD/ili9341.c **** #include "lcd.h"
   2:hardware/LCD/ili9341.c **** #include "delay.h"
   3:hardware/LCD/ili9341.c **** #include <stdio.h>
   4:hardware/LCD/ili9341.c **** 
   5:hardware/LCD/ili9341.c **** SRAM_HandleTypeDef SRAM_Handler;    //SRAM句柄(用于控制LCD)
   6:hardware/LCD/ili9341.c **** 
   7:hardware/LCD/ili9341.c **** //LCD的画笔颜色和背景色	   
   8:hardware/LCD/ili9341.c **** u32 POINT_COLOR=0xFF000000;		//画笔颜色
   9:hardware/LCD/ili9341.c **** //u32 BACK_COLOR =0xFFFFFFFF;  	//背景色 
  10:hardware/LCD/ili9341.c **** u32 BACK_COLOR =GBLUE;  	//背景色 
  11:hardware/LCD/ili9341.c **** 
  12:hardware/LCD/ili9341.c **** //管理LCD重要参数
  13:hardware/LCD/ili9341.c **** //默认为竖屏
  14:hardware/LCD/ili9341.c **** _lcd_dev lcddev;
  15:hardware/LCD/ili9341.c **** 	   
  16:hardware/LCD/ili9341.c **** //写寄存器函数
  17:hardware/LCD/ili9341.c **** //regval:寄存器值
  18:hardware/LCD/ili9341.c **** void LCD_WR_REG(vu16 regval)
  19:hardware/LCD/ili9341.c **** {   
  28              		.loc 1 19 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 82B0     		sub	sp, sp, #8
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37 0002 ADF80600 		strh	r0, [sp, #6]	@ movhi
  20:hardware/LCD/ili9341.c **** 	regval=regval;		//使用-O2优化的时候,必须插入的延时
  38              		.loc 1 20 0
ARM GAS  /tmp/ccvxPE0v.s 			page 2


  39 0006 BDF80630 		ldrh	r3, [sp, #6]
  40 000a 9BB2     		uxth	r3, r3
  41 000c ADF80630 		strh	r3, [sp, #6]	@ movhi
  21:hardware/LCD/ili9341.c **** 	LCD->LCD_REG=regval;//写入要写的寄存器序号	 
  42              		.loc 1 21 0
  43 0010 BDF80630 		ldrh	r3, [sp, #6]
  44 0014 9BB2     		uxth	r3, r3
  45 0016 024A     		ldr	r2, .L3
  46 0018 1380     		strh	r3, [r2]	@ movhi
  22:hardware/LCD/ili9341.c **** }
  47              		.loc 1 22 0
  48 001a 02B0     		add	sp, sp, #8
  49              	.LCFI1:
  50              		.cfi_def_cfa_offset 0
  51              		@ sp needed
  52 001c 7047     		bx	lr
  53              	.L4:
  54 001e 00BF     		.align	2
  55              	.L3:
  56 0020 FEFF0760 		.word	1611137022
  57              		.cfi_endproc
  58              	.LFE120:
  60              		.section	.text.LCD_WR_DATA,"ax",%progbits
  61              		.align	1
  62              		.global	LCD_WR_DATA
  63              		.syntax unified
  64              		.thumb
  65              		.thumb_func
  66              		.fpu fpv4-sp-d16
  68              	LCD_WR_DATA:
  69              	.LFB121:
  23:hardware/LCD/ili9341.c **** //写LCD数据
  24:hardware/LCD/ili9341.c **** //data:要写入的值
  25:hardware/LCD/ili9341.c **** void LCD_WR_DATA(vu16 data)
  26:hardware/LCD/ili9341.c **** {	  
  70              		.loc 1 26 0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 8
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74              		@ link register save eliminated.
  75              	.LVL1:
  76 0000 82B0     		sub	sp, sp, #8
  77              	.LCFI2:
  78              		.cfi_def_cfa_offset 8
  79 0002 ADF80600 		strh	r0, [sp, #6]	@ movhi
  27:hardware/LCD/ili9341.c **** 	data=data;			//使用-O2优化的时候,必须插入的延时
  80              		.loc 1 27 0
  81 0006 BDF80630 		ldrh	r3, [sp, #6]
  82 000a 9BB2     		uxth	r3, r3
  83 000c ADF80630 		strh	r3, [sp, #6]	@ movhi
  28:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=data;		 
  84              		.loc 1 28 0
  85 0010 BDF80630 		ldrh	r3, [sp, #6]
  86 0014 9BB2     		uxth	r3, r3
  87 0016 024A     		ldr	r2, .L7
  88 0018 5380     		strh	r3, [r2, #2]	@ movhi
  29:hardware/LCD/ili9341.c **** }
ARM GAS  /tmp/ccvxPE0v.s 			page 3


  89              		.loc 1 29 0
  90 001a 02B0     		add	sp, sp, #8
  91              	.LCFI3:
  92              		.cfi_def_cfa_offset 0
  93              		@ sp needed
  94 001c 7047     		bx	lr
  95              	.L8:
  96 001e 00BF     		.align	2
  97              	.L7:
  98 0020 FEFF0760 		.word	1611137022
  99              		.cfi_endproc
 100              	.LFE121:
 102              		.section	.text.LCD_RD_DATA,"ax",%progbits
 103              		.align	1
 104              		.global	LCD_RD_DATA
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 108              		.fpu fpv4-sp-d16
 110              	LCD_RD_DATA:
 111              	.LFB122:
  30:hardware/LCD/ili9341.c **** //读LCD数据
  31:hardware/LCD/ili9341.c **** //返回值:读到的值
  32:hardware/LCD/ili9341.c **** u16 LCD_RD_DATA(void)
  33:hardware/LCD/ili9341.c **** {
 112              		.loc 1 33 0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 8
 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              		@ link register save eliminated.
 117 0000 82B0     		sub	sp, sp, #8
 118              	.LCFI4:
 119              		.cfi_def_cfa_offset 8
  34:hardware/LCD/ili9341.c **** 	vu16 ram;			//防止被优化
  35:hardware/LCD/ili9341.c **** 	ram=LCD->LCD_RAM;	
 120              		.loc 1 35 0
 121 0002 054B     		ldr	r3, .L11
 122 0004 5B88     		ldrh	r3, [r3, #2]
 123 0006 9BB2     		uxth	r3, r3
 124 0008 ADF80630 		strh	r3, [sp, #6]	@ movhi
  36:hardware/LCD/ili9341.c **** 	return ram;	 
 125              		.loc 1 36 0
 126 000c BDF80600 		ldrh	r0, [sp, #6]
  37:hardware/LCD/ili9341.c **** }					   
 127              		.loc 1 37 0
 128 0010 80B2     		uxth	r0, r0
 129 0012 02B0     		add	sp, sp, #8
 130              	.LCFI5:
 131              		.cfi_def_cfa_offset 0
 132              		@ sp needed
 133 0014 7047     		bx	lr
 134              	.L12:
 135 0016 00BF     		.align	2
 136              	.L11:
 137 0018 FEFF0760 		.word	1611137022
 138              		.cfi_endproc
 139              	.LFE122:
ARM GAS  /tmp/ccvxPE0v.s 			page 4


 141              		.section	.text.LCD_WriteReg,"ax",%progbits
 142              		.align	1
 143              		.global	LCD_WriteReg
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	LCD_WriteReg:
 150              	.LFB123:
  38:hardware/LCD/ili9341.c **** //写寄存器
  39:hardware/LCD/ili9341.c **** //LCD_Reg:寄存器地址
  40:hardware/LCD/ili9341.c **** //LCD_RegValue:要写入的数据
  41:hardware/LCD/ili9341.c **** void LCD_WriteReg(u16 LCD_Reg,u16 LCD_RegValue)
  42:hardware/LCD/ili9341.c **** {	
 151              		.loc 1 42 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		@ link register save eliminated.
 156              	.LVL2:
  43:hardware/LCD/ili9341.c **** 	LCD->LCD_REG = LCD_Reg;		//写入要写的寄存器序号	 
 157              		.loc 1 43 0
 158 0000 014B     		ldr	r3, .L14
 159 0002 1880     		strh	r0, [r3]	@ movhi
  44:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM = LCD_RegValue;//写入数据	    		 
 160              		.loc 1 44 0
 161 0004 5980     		strh	r1, [r3, #2]	@ movhi
 162 0006 7047     		bx	lr
 163              	.L15:
 164              		.align	2
 165              	.L14:
 166 0008 FEFF0760 		.word	1611137022
 167              		.cfi_endproc
 168              	.LFE123:
 170              		.section	.text.LCD_ReadReg,"ax",%progbits
 171              		.align	1
 172              		.global	LCD_ReadReg
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 176              		.fpu fpv4-sp-d16
 178              	LCD_ReadReg:
 179              	.LFB124:
  45:hardware/LCD/ili9341.c **** }	   
  46:hardware/LCD/ili9341.c **** //读寄存器
  47:hardware/LCD/ili9341.c **** //LCD_Reg:寄存器地址
  48:hardware/LCD/ili9341.c **** //返回值:读到的数据
  49:hardware/LCD/ili9341.c **** u16 LCD_ReadReg(u16 LCD_Reg)
  50:hardware/LCD/ili9341.c **** {										   
 180              		.loc 1 50 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              	.LVL3:
 185 0000 08B5     		push	{r3, lr}
 186              	.LCFI6:
 187              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccvxPE0v.s 			page 5


 188              		.cfi_offset 3, -8
 189              		.cfi_offset 14, -4
  51:hardware/LCD/ili9341.c **** 	LCD_WR_REG(LCD_Reg);		//写入要读的寄存器序号
 190              		.loc 1 51 0
 191 0002 FFF7FEFF 		bl	LCD_WR_REG
 192              	.LVL4:
  52:hardware/LCD/ili9341.c **** 	delay_us(5);		  
 193              		.loc 1 52 0
 194 0006 0520     		movs	r0, #5
 195 0008 FFF7FEFF 		bl	delay_us
 196              	.LVL5:
  53:hardware/LCD/ili9341.c **** 	return LCD_RD_DATA();		//返回读到的值
 197              		.loc 1 53 0
 198 000c FFF7FEFF 		bl	LCD_RD_DATA
 199              	.LVL6:
  54:hardware/LCD/ili9341.c **** }   
 200              		.loc 1 54 0
 201 0010 08BD     		pop	{r3, pc}
 202              		.cfi_endproc
 203              	.LFE124:
 205              		.section	.text.LCD_WriteRAM_Prepare,"ax",%progbits
 206              		.align	1
 207              		.global	LCD_WriteRAM_Prepare
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu fpv4-sp-d16
 213              	LCD_WriteRAM_Prepare:
 214              	.LFB125:
  55:hardware/LCD/ili9341.c **** //开始写GRAM
  56:hardware/LCD/ili9341.c **** void LCD_WriteRAM_Prepare(void)
  57:hardware/LCD/ili9341.c **** {
 215              		.loc 1 57 0
 216              		.cfi_startproc
 217              		@ args = 0, pretend = 0, frame = 0
 218              		@ frame_needed = 0, uses_anonymous_args = 0
 219              		@ link register save eliminated.
  58:hardware/LCD/ili9341.c ****  	LCD->LCD_REG=lcddev.wramcmd;	  
 220              		.loc 1 58 0
 221 0000 024B     		ldr	r3, .L19
 222 0002 1A89     		ldrh	r2, [r3, #8]
 223 0004 024B     		ldr	r3, .L19+4
 224 0006 1A80     		strh	r2, [r3]	@ movhi
 225 0008 7047     		bx	lr
 226              	.L20:
 227 000a 00BF     		.align	2
 228              	.L19:
 229 000c 00000000 		.word	lcddev
 230 0010 FEFF0760 		.word	1611137022
 231              		.cfi_endproc
 232              	.LFE125:
 234              		.section	.text.LCD_WriteRAM,"ax",%progbits
 235              		.align	1
 236              		.global	LCD_WriteRAM
 237              		.syntax unified
 238              		.thumb
 239              		.thumb_func
ARM GAS  /tmp/ccvxPE0v.s 			page 6


 240              		.fpu fpv4-sp-d16
 242              	LCD_WriteRAM:
 243              	.LFB126:
  59:hardware/LCD/ili9341.c **** }	 
  60:hardware/LCD/ili9341.c **** //LCD写GRAM
  61:hardware/LCD/ili9341.c **** //RGB_Code:颜色值
  62:hardware/LCD/ili9341.c **** void LCD_WriteRAM(u16 RGB_Code)
  63:hardware/LCD/ili9341.c **** {							    
 244              		.loc 1 63 0
 245              		.cfi_startproc
 246              		@ args = 0, pretend = 0, frame = 0
 247              		@ frame_needed = 0, uses_anonymous_args = 0
 248              		@ link register save eliminated.
 249              	.LVL7:
  64:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM = RGB_Code;//写十六位GRAM
 250              		.loc 1 64 0
 251 0000 014B     		ldr	r3, .L22
 252 0002 5880     		strh	r0, [r3, #2]	@ movhi
 253 0004 7047     		bx	lr
 254              	.L23:
 255 0006 00BF     		.align	2
 256              	.L22:
 257 0008 FEFF0760 		.word	1611137022
 258              		.cfi_endproc
 259              	.LFE126:
 261              		.section	.text.LCD_BGR2RGB,"ax",%progbits
 262              		.align	1
 263              		.global	LCD_BGR2RGB
 264              		.syntax unified
 265              		.thumb
 266              		.thumb_func
 267              		.fpu fpv4-sp-d16
 269              	LCD_BGR2RGB:
 270              	.LFB127:
  65:hardware/LCD/ili9341.c **** }
  66:hardware/LCD/ili9341.c **** /*******************************************************************************************
  67:hardware/LCD/ili9341.c **** **从ILI93xx读出的数据为GBR格式，而我们写入的时候为RGB格式。         									
  68:hardware/LCD/ili9341.c **** **通过该函数转换																    																		  **		
  69:hardware/LCD/ili9341.c **** **c:BGR格式的颜色值																  																	    **
  70:hardware/LCD/ili9341.c **** **返回值：RGB格式的颜色值													  																	    **					
  71:hardware/LCD/ili9341.c **** ********************************************************************************************/
  72:hardware/LCD/ili9341.c **** u16 LCD_BGR2RGB(u16 c)
  73:hardware/LCD/ili9341.c **** {
 271              		.loc 1 73 0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275              		@ link register save eliminated.
 276              	.LVL8:
  74:hardware/LCD/ili9341.c **** 	u16 r,g,b,rgb;
  75:hardware/LCD/ili9341.c **** 	b=(c>>0)&0x1f;
  76:hardware/LCD/ili9341.c **** 	g=(c>>5)&0x3f;
  77:hardware/LCD/ili9341.c **** 	r=(c>>11)&0x1f;
  78:hardware/LCD/ili9341.c **** 	rgb=(b<<11)+(g<<5)+(r<<0);
 277              		.loc 1 78 0
 278 0000 00F4FC63 		and	r3, r0, #2016
 279 0004 03EBC023 		add	r3, r3, r0, lsl #11
ARM GAS  /tmp/ccvxPE0v.s 			page 7


 280 0008 9BB2     		uxth	r3, r3
 281 000a 03EBD020 		add	r0, r3, r0, lsr #11
 282              	.LVL9:
  79:hardware/LCD/ili9341.c **** 	return rgb;
  80:hardware/LCD/ili9341.c **** }
 283              		.loc 1 80 0
 284 000e 80B2     		uxth	r0, r0
 285 0010 7047     		bx	lr
 286              		.cfi_endproc
 287              	.LFE127:
 289              		.section	.text.opt_delay,"ax",%progbits
 290              		.align	1
 291              		.global	opt_delay
 292              		.syntax unified
 293              		.thumb
 294              		.thumb_func
 295              		.fpu fpv4-sp-d16
 297              	opt_delay:
 298              	.LFB128:
  81:hardware/LCD/ili9341.c **** //当mdk -O1时间优化时需要设置
  82:hardware/LCD/ili9341.c **** //延时i
  83:hardware/LCD/ili9341.c **** void opt_delay(u8 i)
  84:hardware/LCD/ili9341.c **** {
 299              		.loc 1 84 0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 0
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              		@ link register save eliminated.
 304              	.LVL10:
  85:hardware/LCD/ili9341.c **** 	while(i--);
 305              		.loc 1 85 0
 306 0000 00E0     		b	.L26
 307              	.LVL11:
 308              	.L27:
 309 0002 1846     		mov	r0, r3
 310              	.LVL12:
 311              	.L26:
 312              		.loc 1 85 0 is_stmt 0 discriminator 1
 313 0004 431E     		subs	r3, r0, #1
 314 0006 DBB2     		uxtb	r3, r3
 315              	.LVL13:
 316 0008 0028     		cmp	r0, #0
 317 000a FAD1     		bne	.L27
  86:hardware/LCD/ili9341.c **** }
 318              		.loc 1 86 0 is_stmt 1
 319 000c 7047     		bx	lr
 320              		.cfi_endproc
 321              	.LFE128:
 323              		.section	.text.LCD_DisplayOn,"ax",%progbits
 324              		.align	1
 325              		.global	LCD_DisplayOn
 326              		.syntax unified
 327              		.thumb
 328              		.thumb_func
 329              		.fpu fpv4-sp-d16
 331              	LCD_DisplayOn:
 332              	.LFB130:
ARM GAS  /tmp/ccvxPE0v.s 			page 8


  87:hardware/LCD/ili9341.c **** //读取个某点的颜色值	 
  88:hardware/LCD/ili9341.c **** //x,y:坐标
  89:hardware/LCD/ili9341.c **** //返回值:此点的颜色
  90:hardware/LCD/ili9341.c **** u32 LCD_ReadPoint(u16 x,u16 y)
  91:hardware/LCD/ili9341.c **** {
  92:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
  93:hardware/LCD/ili9341.c **** 	if(x>=lcddev.width||y>=lcddev.height)
  94:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
  95:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
  96:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0X2E);//9341 发送读GRAM指令
  97:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();								//dummy Read	   
  98:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();  		  						//实际坐标颜色
  99:hardware/LCD/ili9341.c **** 	//9341要分2次读出 
 100:hardware/LCD/ili9341.c **** 	b=LCD_RD_DATA(); 
 101:hardware/LCD/ili9341.c **** 	g=r&0XFF;		//对于9341第一次读取的是RG的值,R在前,G在后,各占8位
 102:hardware/LCD/ili9341.c **** 	g<<=8; 
 103:hardware/LCD/ili9341.c **** 	return (((r>>11)<<11)|((g>>10)<<5)|(b>>11));	//ILI9341/NT35310/NT35510需要公式转换一下
 104:hardware/LCD/ili9341.c **** }			 
 105:hardware/LCD/ili9341.c **** /***************LCD显示开启***************************************/
 106:hardware/LCD/ili9341.c **** void LCD_DisplayOn(void)
 107:hardware/LCD/ili9341.c **** {
 333              		.loc 1 107 0
 334              		.cfi_startproc
 335              		@ args = 0, pretend = 0, frame = 0
 336              		@ frame_needed = 0, uses_anonymous_args = 0
 337 0000 08B5     		push	{r3, lr}
 338              	.LCFI7:
 339              		.cfi_def_cfa_offset 8
 340              		.cfi_offset 3, -8
 341              		.cfi_offset 14, -4
 108:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X29);
 342              		.loc 1 108 0
 343 0002 2920     		movs	r0, #41
 344 0004 FFF7FEFF 		bl	LCD_WR_REG
 345              	.LVL14:
 346 0008 08BD     		pop	{r3, pc}
 347              		.cfi_endproc
 348              	.LFE130:
 350              		.section	.text.LCD_DisplayOff,"ax",%progbits
 351              		.align	1
 352              		.global	LCD_DisplayOff
 353              		.syntax unified
 354              		.thumb
 355              		.thumb_func
 356              		.fpu fpv4-sp-d16
 358              	LCD_DisplayOff:
 359              	.LFB131:
 109:hardware/LCD/ili9341.c **** }
 110:hardware/LCD/ili9341.c **** /**************LCD显示关闭****************************************/
 111:hardware/LCD/ili9341.c **** void LCD_DisplayOff(void)
 112:hardware/LCD/ili9341.c **** {
 360              		.loc 1 112 0
 361              		.cfi_startproc
 362              		@ args = 0, pretend = 0, frame = 0
 363              		@ frame_needed = 0, uses_anonymous_args = 0
 364 0000 08B5     		push	{r3, lr}
 365              	.LCFI8:
ARM GAS  /tmp/ccvxPE0v.s 			page 9


 366              		.cfi_def_cfa_offset 8
 367              		.cfi_offset 3, -8
 368              		.cfi_offset 14, -4
 113:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X28);
 369              		.loc 1 113 0
 370 0002 2820     		movs	r0, #40
 371 0004 FFF7FEFF 		bl	LCD_WR_REG
 372              	.LVL15:
 373 0008 08BD     		pop	{r3, pc}
 374              		.cfi_endproc
 375              	.LFE131:
 377              		.section	.text.LCD_SetCursor,"ax",%progbits
 378              		.align	1
 379              		.global	LCD_SetCursor
 380              		.syntax unified
 381              		.thumb
 382              		.thumb_func
 383              		.fpu fpv4-sp-d16
 385              	LCD_SetCursor:
 386              	.LFB132:
 114:hardware/LCD/ili9341.c **** } 
 115:hardware/LCD/ili9341.c **** /*******************设置光标位置************************************/
 116:hardware/LCD/ili9341.c **** void LCD_SetCursor(u16 Xpos, u16 Ypos)
 117:hardware/LCD/ili9341.c **** {
 387              		.loc 1 117 0
 388              		.cfi_startproc
 389              		@ args = 0, pretend = 0, frame = 0
 390              		@ frame_needed = 0, uses_anonymous_args = 0
 391              	.LVL16:
 392 0000 70B5     		push	{r4, r5, r6, lr}
 393              	.LCFI9:
 394              		.cfi_def_cfa_offset 16
 395              		.cfi_offset 4, -16
 396              		.cfi_offset 5, -12
 397              		.cfi_offset 6, -8
 398              		.cfi_offset 14, -4
 399 0002 0646     		mov	r6, r0
 400 0004 0C46     		mov	r4, r1
 118:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);				//X坐标设置
 401              		.loc 1 118 0
 402 0006 0A4D     		ldr	r5, .L34
 403 0008 6889     		ldrh	r0, [r5, #10]
 404              	.LVL17:
 405 000a FFF7FEFF 		bl	LCD_WR_REG
 406              	.LVL18:
 119:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Xpos>>8);
 407              		.loc 1 119 0
 408 000e 300A     		lsrs	r0, r6, #8
 409 0010 FFF7FEFF 		bl	LCD_WR_DATA
 410              	.LVL19:
 120:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Xpos&0xFF);
 411              		.loc 1 120 0
 412 0014 F0B2     		uxtb	r0, r6
 413 0016 FFF7FEFF 		bl	LCD_WR_DATA
 414              	.LVL20:
 121:hardware/LCD/ili9341.c **** 	
 122:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);				//Y坐标设置
ARM GAS  /tmp/ccvxPE0v.s 			page 10


 415              		.loc 1 122 0
 416 001a A889     		ldrh	r0, [r5, #12]
 417 001c FFF7FEFF 		bl	LCD_WR_REG
 418              	.LVL21:
 123:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Ypos>>8);
 419              		.loc 1 123 0
 420 0020 200A     		lsrs	r0, r4, #8
 421 0022 FFF7FEFF 		bl	LCD_WR_DATA
 422              	.LVL22:
 124:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Ypos&0XFF);
 423              		.loc 1 124 0
 424 0026 E0B2     		uxtb	r0, r4
 425 0028 FFF7FEFF 		bl	LCD_WR_DATA
 426              	.LVL23:
 427 002c 70BD     		pop	{r4, r5, r6, pc}
 428              	.L35:
 429 002e 00BF     		.align	2
 430              	.L34:
 431 0030 00000000 		.word	lcddev
 432              		.cfi_endproc
 433              	.LFE132:
 435              		.section	.text.LCD_ReadPoint,"ax",%progbits
 436              		.align	1
 437              		.global	LCD_ReadPoint
 438              		.syntax unified
 439              		.thumb
 440              		.thumb_func
 441              		.fpu fpv4-sp-d16
 443              	LCD_ReadPoint:
 444              	.LFB129:
  91:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
 445              		.loc 1 91 0
 446              		.cfi_startproc
 447              		@ args = 0, pretend = 0, frame = 0
 448              		@ frame_needed = 0, uses_anonymous_args = 0
 449              	.LVL24:
  93:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
 450              		.loc 1 93 0
 451 0000 114B     		ldr	r3, .L45
 452 0002 1B88     		ldrh	r3, [r3]
 453 0004 8342     		cmp	r3, r0
 454 0006 1DD9     		bls	.L38
  93:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
 455              		.loc 1 93 0 is_stmt 0 discriminator 1
 456 0008 0F4B     		ldr	r3, .L45
 457 000a 5B88     		ldrh	r3, [r3, #2]
 458 000c 8B42     		cmp	r3, r1
 459 000e 01D8     		bhi	.L44
  94:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
 460              		.loc 1 94 0 is_stmt 1
 461 0010 0020     		movs	r0, #0
 462              	.LVL25:
 463 0012 7047     		bx	lr
 464              	.LVL26:
 465              	.L44:
  91:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
 466              		.loc 1 91 0
ARM GAS  /tmp/ccvxPE0v.s 			page 11


 467 0014 10B5     		push	{r4, lr}
 468              	.LCFI10:
 469              		.cfi_def_cfa_offset 8
 470              		.cfi_offset 4, -8
 471              		.cfi_offset 14, -4
  95:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0X2E);//9341 发送读GRAM指令
 472              		.loc 1 95 0
 473 0016 FFF7FEFF 		bl	LCD_SetCursor
 474              	.LVL27:
  96:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();								//dummy Read	   
 475              		.loc 1 96 0
 476 001a 2E20     		movs	r0, #46
 477 001c FFF7FEFF 		bl	LCD_WR_REG
 478              	.LVL28:
  97:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();  		  						//实际坐标颜色
 479              		.loc 1 97 0
 480 0020 FFF7FEFF 		bl	LCD_RD_DATA
 481              	.LVL29:
  98:hardware/LCD/ili9341.c **** 	//9341要分2次读出 
 482              		.loc 1 98 0
 483 0024 FFF7FEFF 		bl	LCD_RD_DATA
 484              	.LVL30:
 485 0028 0446     		mov	r4, r0
 486              	.LVL31:
 100:hardware/LCD/ili9341.c **** 	g=r&0XFF;		//对于9341第一次读取的是RG的值,R在前,G在后,各占8位
 487              		.loc 1 100 0
 488 002a FFF7FEFF 		bl	LCD_RD_DATA
 489              	.LVL32:
 103:hardware/LCD/ili9341.c **** }			 
 490              		.loc 1 103 0
 491 002e C4F3CF23 		ubfx	r3, r4, #11, #16
 492 0032 C4F38504 		ubfx	r4, r4, #2, #6
 493              	.LVL33:
 494 0036 6401     		lsls	r4, r4, #5
 495 0038 44EAC324 		orr	r4, r4, r3, lsl #11
 496 003c C0F3CF20 		ubfx	r0, r0, #11, #16
 497              	.LVL34:
 498 0040 2043     		orrs	r0, r0, r4
 499 0042 10BD     		pop	{r4, pc}
 500              	.LVL35:
 501              	.L38:
 502              	.LCFI11:
 503              		.cfi_def_cfa_offset 0
 504              		.cfi_restore 4
 505              		.cfi_restore 14
  94:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
 506              		.loc 1 94 0
 507 0044 0020     		movs	r0, #0
 508              	.LVL36:
 509 0046 7047     		bx	lr
 510              	.L46:
 511              		.align	2
 512              	.L45:
 513 0048 00000000 		.word	lcddev
 514              		.cfi_endproc
 515              	.LFE129:
 517              		.section	.text.LCD_Scan_Dir,"ax",%progbits
ARM GAS  /tmp/ccvxPE0v.s 			page 12


 518              		.align	1
 519              		.global	LCD_Scan_Dir
 520              		.syntax unified
 521              		.thumb
 522              		.thumb_func
 523              		.fpu fpv4-sp-d16
 525              	LCD_Scan_Dir:
 526              	.LFB133:
 125:hardware/LCD/ili9341.c **** }	 
 126:hardware/LCD/ili9341.c **** /**************************************************************************************************
 127:hardware/LCD/ili9341.c **** //设置LCD的自动扫描方向																		//
 128:hardware/LCD/ili9341.c **** //注意:其他函数可能会受到此函数设置的影响(尤其是9341/6804这两个奇葩),		/
 129:hardware/LCD/ili9341.c **** //所以,一般设置为L2R_U2D即可,如果设置为其他扫描方式,可能导致显示不正常
 130:hardware/LCD/ili9341.c **** //dir:0~7,代表8个方向(具体定义见lcd.h)															//
 131:hardware/LCD/ili9341.c **** ***************************************************************************************************
 132:hardware/LCD/ili9341.c **** void LCD_Scan_Dir(u8 dir)
 133:hardware/LCD/ili9341.c **** {
 527              		.loc 1 133 0
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 0
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531              	.LVL37:
 532 0000 08B5     		push	{r3, lr}
 533              	.LCFI12:
 534              		.cfi_def_cfa_offset 8
 535              		.cfi_offset 3, -8
 536              		.cfi_offset 14, -4
 537              	.LVL38:
 134:hardware/LCD/ili9341.c **** 	u16 regval=0;
 135:hardware/LCD/ili9341.c **** 	switch(dir)
 538              		.loc 1 135 0
 539 0002 0138     		subs	r0, r0, #1
 540              	.LVL39:
 541 0004 0628     		cmp	r0, #6
 542 0006 05D8     		bhi	.L48
 543 0008 DFE800F0 		tbb	[pc, r0]
 544              	.L50:
 545 000c 12       		.byte	(.L57-.L50)/2
 546 000d 06       		.byte	(.L51-.L50)/2
 547 000e 08       		.byte	(.L52-.L50)/2
 548 000f 0A       		.byte	(.L53-.L50)/2
 549 0010 0C       		.byte	(.L54-.L50)/2
 550 0011 0E       		.byte	(.L55-.L50)/2
 551 0012 10       		.byte	(.L56-.L50)/2
 552 0013 00       		.p2align 1
 553              	.L48:
 134:hardware/LCD/ili9341.c **** 	u16 regval=0;
 554              		.loc 1 134 0
 555 0014 0021     		movs	r1, #0
 556 0016 0CE0     		b	.L49
 557              	.L51:
 558              	.LVL40:
 136:hardware/LCD/ili9341.c **** 		{
 137:hardware/LCD/ili9341.c **** 			case L2R_U2D:
 138:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(0<<6)|(0<<5);
 139:hardware/LCD/ili9341.c **** 				break;
 140:hardware/LCD/ili9341.c **** 			case L2R_D2U:
ARM GAS  /tmp/ccvxPE0v.s 			page 13


 141:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(0<<6)|(0<<5);
 142:hardware/LCD/ili9341.c **** 				break;
 143:hardware/LCD/ili9341.c **** 			case R2L_U2D:
 144:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(1<<6)|(0<<5);
 559              		.loc 1 144 0
 560 0018 4021     		movs	r1, #64
 145:hardware/LCD/ili9341.c **** 				break;
 561              		.loc 1 145 0
 562 001a 0AE0     		b	.L49
 563              	.LVL41:
 564              	.L52:
 146:hardware/LCD/ili9341.c **** 			case R2L_D2U:
 147:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(1<<6)|(0<<5);
 565              		.loc 1 147 0
 566 001c C021     		movs	r1, #192
 148:hardware/LCD/ili9341.c **** 				break;
 567              		.loc 1 148 0
 568 001e 08E0     		b	.L49
 569              	.LVL42:
 570              	.L53:
 149:hardware/LCD/ili9341.c **** 			case U2D_L2R:
 150:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(0<<6)|(1<<5);
 571              		.loc 1 150 0
 572 0020 2021     		movs	r1, #32
 151:hardware/LCD/ili9341.c **** 				break;
 573              		.loc 1 151 0
 574 0022 06E0     		b	.L49
 575              	.LVL43:
 576              	.L54:
 152:hardware/LCD/ili9341.c **** 			case U2D_R2L:
 153:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(1<<6)|(1<<5);
 577              		.loc 1 153 0
 578 0024 6021     		movs	r1, #96
 154:hardware/LCD/ili9341.c **** 				break;
 579              		.loc 1 154 0
 580 0026 04E0     		b	.L49
 581              	.LVL44:
 582              	.L55:
 155:hardware/LCD/ili9341.c **** 			case D2U_L2R:
 156:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(0<<6)|(1<<5);
 583              		.loc 1 156 0
 584 0028 A021     		movs	r1, #160
 157:hardware/LCD/ili9341.c **** 				break;
 585              		.loc 1 157 0
 586 002a 02E0     		b	.L49
 587              	.LVL45:
 588              	.L56:
 158:hardware/LCD/ili9341.c **** 			case D2U_R2L:
 159:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(1<<6)|(1<<5);	
 589              		.loc 1 159 0
 590 002c E021     		movs	r1, #224
 591 002e 00E0     		b	.L49
 592              	.LVL46:
 593              	.L57:
 141:hardware/LCD/ili9341.c **** 				break;
 594              		.loc 1 141 0
 595 0030 8021     		movs	r1, #128
ARM GAS  /tmp/ccvxPE0v.s 			page 14


 596              	.LVL47:
 597              	.L49:
 160:hardware/LCD/ili9341.c **** 		}
 161:hardware/LCD/ili9341.c **** 	regval|=1<<3;                  //RGB,BGR颜色顺序设置
 162:hardware/LCD/ili9341.c **** 	LCD_WriteReg(0X36,regval);
 598              		.loc 1 162 0
 599 0032 41F00801 		orr	r1, r1, #8
 600              	.LVL48:
 601 0036 3620     		movs	r0, #54
 602 0038 FFF7FEFF 		bl	LCD_WriteReg
 603              	.LVL49:
 604 003c 08BD     		pop	{r3, pc}
 605              		.cfi_endproc
 606              	.LFE133:
 608              		.section	.text.LCD_DrawPoint,"ax",%progbits
 609              		.align	1
 610              		.global	LCD_DrawPoint
 611              		.syntax unified
 612              		.thumb
 613              		.thumb_func
 614              		.fpu fpv4-sp-d16
 616              	LCD_DrawPoint:
 617              	.LFB134:
 163:hardware/LCD/ili9341.c **** }
 164:hardware/LCD/ili9341.c **** /****************画点函数****************************************************************/
 165:hardware/LCD/ili9341.c **** void LCD_DrawPoint(u16 x, u16 y)
 166:hardware/LCD/ili9341.c **** {
 618              		.loc 1 166 0
 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622              	.LVL50:
 623 0000 08B5     		push	{r3, lr}
 624              	.LCFI13:
 625              		.cfi_def_cfa_offset 8
 626              		.cfi_offset 3, -8
 627              		.cfi_offset 14, -4
 167:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);
 628              		.loc 1 167 0
 629 0002 FFF7FEFF 		bl	LCD_SetCursor
 630              	.LVL51:
 168:hardware/LCD/ili9341.c **** 	LCD_WriteRAM_Prepare();
 631              		.loc 1 168 0
 632 0006 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 633              	.LVL52:
 169:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=POINT_COLOR;
 634              		.loc 1 169 0
 635 000a 024B     		ldr	r3, .L61
 636 000c 1A88     		ldrh	r2, [r3]
 637 000e 024B     		ldr	r3, .L61+4
 638 0010 5A80     		strh	r2, [r3, #2]	@ movhi
 639 0012 08BD     		pop	{r3, pc}
 640              	.L62:
 641              		.align	2
 642              	.L61:
 643 0014 00000000 		.word	.LANCHOR0
 644 0018 FEFF0760 		.word	1611137022
ARM GAS  /tmp/ccvxPE0v.s 			page 15


 645              		.cfi_endproc
 646              	.LFE134:
 648              		.section	.text.LCD_Fast_DrawPoint,"ax",%progbits
 649              		.align	1
 650              		.global	LCD_Fast_DrawPoint
 651              		.syntax unified
 652              		.thumb
 653              		.thumb_func
 654              		.fpu fpv4-sp-d16
 656              	LCD_Fast_DrawPoint:
 657              	.LFB135:
 170:hardware/LCD/ili9341.c **** }
 171:hardware/LCD/ili9341.c **** /************快速画点函数***************************************************************/
 172:hardware/LCD/ili9341.c **** void LCD_Fast_DrawPoint(u16 x, u16 y, u32 color)
 173:hardware/LCD/ili9341.c **** {
 658              		.loc 1 173 0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
 661              		@ frame_needed = 0, uses_anonymous_args = 0
 662              	.LVL53:
 663 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 664              	.LCFI14:
 665              		.cfi_def_cfa_offset 24
 666              		.cfi_offset 3, -24
 667              		.cfi_offset 4, -20
 668              		.cfi_offset 5, -16
 669              		.cfi_offset 6, -12
 670              		.cfi_offset 7, -8
 671              		.cfi_offset 14, -4
 672 0002 0746     		mov	r7, r0
 673 0004 0E46     		mov	r6, r1
 674 0006 1446     		mov	r4, r2
 174:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);
 675              		.loc 1 174 0
 676 0008 0C4D     		ldr	r5, .L65
 677 000a 6889     		ldrh	r0, [r5, #10]
 678              	.LVL54:
 679 000c FFF7FEFF 		bl	LCD_WR_REG
 680              	.LVL55:
 175:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(x>>8);
 681              		.loc 1 175 0
 682 0010 380A     		lsrs	r0, r7, #8
 683 0012 FFF7FEFF 		bl	LCD_WR_DATA
 684              	.LVL56:
 176:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(x&0xFF);
 685              		.loc 1 176 0
 686 0016 F8B2     		uxtb	r0, r7
 687 0018 FFF7FEFF 		bl	LCD_WR_DATA
 688              	.LVL57:
 177:hardware/LCD/ili9341.c **** 
 178:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);
 689              		.loc 1 178 0
 690 001c A889     		ldrh	r0, [r5, #12]
 691 001e FFF7FEFF 		bl	LCD_WR_REG
 692              	.LVL58:
 179:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(y>>8);
 693              		.loc 1 179 0
ARM GAS  /tmp/ccvxPE0v.s 			page 16


 694 0022 300A     		lsrs	r0, r6, #8
 695 0024 FFF7FEFF 		bl	LCD_WR_DATA
 696              	.LVL59:
 180:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(y&0XFF);
 697              		.loc 1 180 0
 698 0028 F0B2     		uxtb	r0, r6
 699 002a FFF7FEFF 		bl	LCD_WR_DATA
 700              	.LVL60:
 181:hardware/LCD/ili9341.c **** 
 182:hardware/LCD/ili9341.c **** 	LCD->LCD_REG=lcddev.wramcmd;
 701              		.loc 1 182 0
 702 002e 2A89     		ldrh	r2, [r5, #8]
 703 0030 034B     		ldr	r3, .L65+4
 704 0032 1A80     		strh	r2, [r3]	@ movhi
 183:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=color;
 705              		.loc 1 183 0
 706 0034 A4B2     		uxth	r4, r4
 707              	.LVL61:
 708 0036 5C80     		strh	r4, [r3, #2]	@ movhi
 709 0038 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 710              	.L66:
 711 003a 00BF     		.align	2
 712              	.L65:
 713 003c 00000000 		.word	lcddev
 714 0040 FEFF0760 		.word	1611137022
 715              		.cfi_endproc
 716              	.LFE135:
 718              		.section	.text.LCD_Display_Dir,"ax",%progbits
 719              		.align	1
 720              		.global	LCD_Display_Dir
 721              		.syntax unified
 722              		.thumb
 723              		.thumb_func
 724              		.fpu fpv4-sp-d16
 726              	LCD_Display_Dir:
 727              	.LFB136:
 184:hardware/LCD/ili9341.c **** }
 185:hardware/LCD/ili9341.c **** /***********设置LCD显示方向(0:竖屏1:横屏)***********************************************/
 186:hardware/LCD/ili9341.c **** void LCD_Display_Dir(u8 dir)
 187:hardware/LCD/ili9341.c **** {
 728              		.loc 1 187 0
 729              		.cfi_startproc
 730              		@ args = 0, pretend = 0, frame = 0
 731              		@ frame_needed = 0, uses_anonymous_args = 0
 732              	.LVL62:
 733 0000 08B5     		push	{r3, lr}
 734              	.LCFI15:
 735              		.cfi_def_cfa_offset 8
 736              		.cfi_offset 3, -8
 737              		.cfi_offset 14, -4
 188:hardware/LCD/ili9341.c **** 	if(dir==0)
 738              		.loc 1 188 0
 739 0002 88B1     		cbz	r0, .L71
 189:hardware/LCD/ili9341.c **** 		{
 190:hardware/LCD/ili9341.c **** 			lcddev.dir=0;
 191:hardware/LCD/ili9341.c **** 			lcddev.width=240;
 192:hardware/LCD/ili9341.c **** 			lcddev.height=320;
ARM GAS  /tmp/ccvxPE0v.s 			page 17


 193:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0X2C;
 194:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2A;
 195:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2B;
 196:hardware/LCD/ili9341.c **** 		}
 197:hardware/LCD/ili9341.c **** 	else
 198:hardware/LCD/ili9341.c **** 		{
 199:hardware/LCD/ili9341.c **** 			lcddev.dir=1;
 740              		.loc 1 199 0
 741 0004 104B     		ldr	r3, .L72
 742 0006 0122     		movs	r2, #1
 743 0008 9A71     		strb	r2, [r3, #6]
 200:hardware/LCD/ili9341.c **** 			lcddev.width=320;
 744              		.loc 1 200 0
 745 000a 4FF4A072 		mov	r2, #320
 746 000e 1A80     		strh	r2, [r3]	@ movhi
 201:hardware/LCD/ili9341.c **** 			lcddev.height=240;
 747              		.loc 1 201 0
 748 0010 F022     		movs	r2, #240
 749 0012 5A80     		strh	r2, [r3, #2]	@ movhi
 202:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0x2C;
 750              		.loc 1 202 0
 751 0014 2C22     		movs	r2, #44
 752 0016 1A81     		strh	r2, [r3, #8]	@ movhi
 203:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2B;
 753              		.loc 1 203 0
 754 0018 2B22     		movs	r2, #43
 755 001a 5A81     		strh	r2, [r3, #10]	@ movhi
 204:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2A;
 756              		.loc 1 204 0
 757 001c 2A22     		movs	r2, #42
 758 001e 9A81     		strh	r2, [r3, #12]	@ movhi
 759              	.L69:
 205:hardware/LCD/ili9341.c **** 		}
 206:hardware/LCD/ili9341.c **** 	LCD_Scan_Dir(L2R_U2D);
 760              		.loc 1 206 0
 761 0020 0020     		movs	r0, #0
 762              	.LVL63:
 763 0022 FFF7FEFF 		bl	LCD_Scan_Dir
 764              	.LVL64:
 765 0026 08BD     		pop	{r3, pc}
 766              	.LVL65:
 767              	.L71:
 190:hardware/LCD/ili9341.c **** 			lcddev.width=240;
 768              		.loc 1 190 0
 769 0028 074B     		ldr	r3, .L72
 770 002a 0022     		movs	r2, #0
 771 002c 9A71     		strb	r2, [r3, #6]
 191:hardware/LCD/ili9341.c **** 			lcddev.height=320;
 772              		.loc 1 191 0
 773 002e F022     		movs	r2, #240
 774 0030 1A80     		strh	r2, [r3]	@ movhi
 192:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0X2C;
 775              		.loc 1 192 0
 776 0032 4FF4A072 		mov	r2, #320
 777 0036 5A80     		strh	r2, [r3, #2]	@ movhi
 193:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2A;
 778              		.loc 1 193 0
ARM GAS  /tmp/ccvxPE0v.s 			page 18


 779 0038 2C22     		movs	r2, #44
 780 003a 1A81     		strh	r2, [r3, #8]	@ movhi
 194:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2B;
 781              		.loc 1 194 0
 782 003c 2A22     		movs	r2, #42
 783 003e 5A81     		strh	r2, [r3, #10]	@ movhi
 195:hardware/LCD/ili9341.c **** 		}
 784              		.loc 1 195 0
 785 0040 2B22     		movs	r2, #43
 786 0042 9A81     		strh	r2, [r3, #12]	@ movhi
 787 0044 ECE7     		b	.L69
 788              	.L73:
 789 0046 00BF     		.align	2
 790              	.L72:
 791 0048 00000000 		.word	lcddev
 792              		.cfi_endproc
 793              	.LFE136:
 795              		.section	.text.LCD_Set_Window,"ax",%progbits
 796              		.align	1
 797              		.global	LCD_Set_Window
 798              		.syntax unified
 799              		.thumb
 800              		.thumb_func
 801              		.fpu fpv4-sp-d16
 803              	LCD_Set_Window:
 804              	.LFB137:
 207:hardware/LCD/ili9341.c **** }
 208:hardware/LCD/ili9341.c **** /**************************************************************************************************
 209:hardware/LCD/ili9341.c **** //设置窗口,并自动设置画点坐标到窗口左上角(sx,sy).
 210:hardware/LCD/ili9341.c **** //sx,sy:窗口起始坐标(左上角)
 211:hardware/LCD/ili9341.c **** //width,height:窗口宽度和高度,必须大于0!!
 212:hardware/LCD/ili9341.c **** //窗体大小:width*height. 																				
 213:hardware/LCD/ili9341.c **** ***************************************************************************************************
 214:hardware/LCD/ili9341.c **** void LCD_Set_Window(u16 sx, u16 sy, u16 width, u16 height)
 215:hardware/LCD/ili9341.c **** {
 805              		.loc 1 215 0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 0
 808              		@ frame_needed = 0, uses_anonymous_args = 0
 809              	.LVL66:
 810 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 811              	.LCFI16:
 812              		.cfi_def_cfa_offset 24
 813              		.cfi_offset 4, -24
 814              		.cfi_offset 5, -20
 815              		.cfi_offset 6, -16
 816              		.cfi_offset 7, -12
 817              		.cfi_offset 8, -8
 818              		.cfi_offset 14, -4
 819 0004 0746     		mov	r7, r0
 820 0006 0E46     		mov	r6, r1
 216:hardware/LCD/ili9341.c **** 	u16 twidth,theight;
 217:hardware/LCD/ili9341.c **** 	twidth=sx+width-1;
 821              		.loc 1 217 0
 822 0008 8518     		adds	r5, r0, r2
 823 000a ADB2     		uxth	r5, r5
 824 000c 013D     		subs	r5, r5, #1
ARM GAS  /tmp/ccvxPE0v.s 			page 19


 825 000e ADB2     		uxth	r5, r5
 826              	.LVL67:
 218:hardware/LCD/ili9341.c **** 	theight=sy+height-1;
 827              		.loc 1 218 0
 828 0010 CC18     		adds	r4, r1, r3
 829 0012 A4B2     		uxth	r4, r4
 830 0014 013C     		subs	r4, r4, #1
 831 0016 A4B2     		uxth	r4, r4
 832              	.LVL68:
 219:hardware/LCD/ili9341.c **** 
 220:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);
 833              		.loc 1 220 0
 834 0018 DFF84480 		ldr	r8, .L76
 835 001c B8F80A00 		ldrh	r0, [r8, #10]
 836              	.LVL69:
 837 0020 FFF7FEFF 		bl	LCD_WR_REG
 838              	.LVL70:
 221:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sx>>8);
 839              		.loc 1 221 0
 840 0024 380A     		lsrs	r0, r7, #8
 841 0026 FFF7FEFF 		bl	LCD_WR_DATA
 842              	.LVL71:
 222:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sx&0xFF);
 843              		.loc 1 222 0
 844 002a F8B2     		uxtb	r0, r7
 845 002c FFF7FEFF 		bl	LCD_WR_DATA
 846              	.LVL72:
 223:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(twidth>>8);
 847              		.loc 1 223 0
 848 0030 280A     		lsrs	r0, r5, #8
 849 0032 FFF7FEFF 		bl	LCD_WR_DATA
 850              	.LVL73:
 224:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(twidth&0xFF);
 851              		.loc 1 224 0
 852 0036 E8B2     		uxtb	r0, r5
 853 0038 FFF7FEFF 		bl	LCD_WR_DATA
 854              	.LVL74:
 225:hardware/LCD/ili9341.c **** 
 226:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);
 855              		.loc 1 226 0
 856 003c B8F80C00 		ldrh	r0, [r8, #12]
 857 0040 FFF7FEFF 		bl	LCD_WR_REG
 858              	.LVL75:
 227:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sy>>8);
 859              		.loc 1 227 0
 860 0044 300A     		lsrs	r0, r6, #8
 861 0046 FFF7FEFF 		bl	LCD_WR_DATA
 862              	.LVL76:
 228:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sy&0xFF);
 863              		.loc 1 228 0
 864 004a F0B2     		uxtb	r0, r6
 865 004c FFF7FEFF 		bl	LCD_WR_DATA
 866              	.LVL77:
 229:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(theight>>8);
 867              		.loc 1 229 0
 868 0050 200A     		lsrs	r0, r4, #8
 869 0052 FFF7FEFF 		bl	LCD_WR_DATA
ARM GAS  /tmp/ccvxPE0v.s 			page 20


 870              	.LVL78:
 230:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(theight&0xFF);
 871              		.loc 1 230 0
 872 0056 E0B2     		uxtb	r0, r4
 873 0058 FFF7FEFF 		bl	LCD_WR_DATA
 874              	.LVL79:
 875 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 876              	.LVL80:
 877              	.L77:
 878              		.align	2
 879              	.L76:
 880 0060 00000000 		.word	lcddev
 881              		.cfi_endproc
 882              	.LFE137:
 884              		.section	.text.HAL_SRAM_MspInit,"ax",%progbits
 885              		.align	1
 886              		.global	HAL_SRAM_MspInit
 887              		.syntax unified
 888              		.thumb
 889              		.thumb_func
 890              		.fpu fpv4-sp-d16
 892              	HAL_SRAM_MspInit:
 893              	.LFB138:
 231:hardware/LCD/ili9341.c **** 	
 232:hardware/LCD/ili9341.c **** }
 233:hardware/LCD/ili9341.c **** //SRAM底层驱动，时钟使能，引脚分配
 234:hardware/LCD/ili9341.c **** //此函数会被HAL_SRAM_Init()调用
 235:hardware/LCD/ili9341.c **** //hsram:SRAM句柄
 236:hardware/LCD/ili9341.c **** void HAL_SRAM_MspInit(SRAM_HandleTypeDef *hsram)
 237:hardware/LCD/ili9341.c **** {	
 894              		.loc 1 237 0
 895              		.cfi_startproc
 896              		@ args = 0, pretend = 0, frame = 32
 897              		@ frame_needed = 0, uses_anonymous_args = 0
 898              	.LVL81:
 899 0000 00B5     		push	{lr}
 900              	.LCFI17:
 901              		.cfi_def_cfa_offset 4
 902              		.cfi_offset 14, -4
 903 0002 89B0     		sub	sp, sp, #36
 904              	.LCFI18:
 905              		.cfi_def_cfa_offset 40
 906              	.LBB2:
 238:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 239:hardware/LCD/ili9341.c **** 	
 240:hardware/LCD/ili9341.c **** 	__HAL_RCC_FMC_CLK_ENABLE();				//使能FMC时钟
 907              		.loc 1 240 0
 908 0004 0022     		movs	r2, #0
 909 0006 0092     		str	r2, [sp]
 910 0008 1B4B     		ldr	r3, .L80
 911 000a 996B     		ldr	r1, [r3, #56]
 912 000c 41F00101 		orr	r1, r1, #1
 913 0010 9963     		str	r1, [r3, #56]
 914 0012 996B     		ldr	r1, [r3, #56]
 915 0014 01F00101 		and	r1, r1, #1
 916 0018 0091     		str	r1, [sp]
 917 001a 0099     		ldr	r1, [sp]
ARM GAS  /tmp/ccvxPE0v.s 			page 21


 918              	.LBE2:
 919              	.LBB3:
 241:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOD_CLK_ENABLE();			//使能GPIOD时钟
 920              		.loc 1 241 0
 921 001c 0192     		str	r2, [sp, #4]
 922 001e 196B     		ldr	r1, [r3, #48]
 923 0020 41F00801 		orr	r1, r1, #8
 924 0024 1963     		str	r1, [r3, #48]
 925 0026 196B     		ldr	r1, [r3, #48]
 926 0028 01F00801 		and	r1, r1, #8
 927 002c 0191     		str	r1, [sp, #4]
 928 002e 0199     		ldr	r1, [sp, #4]
 929              	.LBE3:
 930              	.LBB4:
 242:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOE_CLK_ENABLE();			//使能GPIOE时钟
 931              		.loc 1 242 0
 932 0030 0292     		str	r2, [sp, #8]
 933 0032 1A6B     		ldr	r2, [r3, #48]
 934 0034 42F01002 		orr	r2, r2, #16
 935 0038 1A63     		str	r2, [r3, #48]
 936 003a 1B6B     		ldr	r3, [r3, #48]
 937 003c 03F01003 		and	r3, r3, #16
 938 0040 0293     		str	r3, [sp, #8]
 939 0042 029B     		ldr	r3, [sp, #8]
 940              	.LBE4:
 243:hardware/LCD/ili9341.c **** 	
 244:hardware/LCD/ili9341.c **** 	//初始化PD0,1,4,5,7,8,9,10,13,14,15
 245:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_7|GPIO_PIN_8|\
 941              		.loc 1 245 0
 942 0044 4EF2B373 		movw	r3, #59315
 943 0048 0393     		str	r3, [sp, #12]
 246:hardware/LCD/ili9341.c ****                      GPIO_PIN_9|GPIO_PIN_10|GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15;
 247:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_AF_PP; 		//推挽复用
 944              		.loc 1 247 0
 945 004a 0223     		movs	r3, #2
 946 004c 0493     		str	r3, [sp, #16]
 248:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;			//上拉
 947              		.loc 1 248 0
 948 004e 0123     		movs	r3, #1
 949 0050 0593     		str	r3, [sp, #20]
 249:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;		//高速
 950              		.loc 1 249 0
 951 0052 0323     		movs	r3, #3
 952 0054 0693     		str	r3, [sp, #24]
 250:hardware/LCD/ili9341.c **** 	GPIO_Initure.Alternate=GPIO_AF12_FMC;	//复用为FMC
 953              		.loc 1 250 0
 954 0056 0C23     		movs	r3, #12
 955 0058 0793     		str	r3, [sp, #28]
 251:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOD,&GPIO_Initure);     //初始化
 956              		.loc 1 251 0
 957 005a 0DEB0301 		add	r1, sp, r3
 958 005e 0748     		ldr	r0, .L80+4
 959              	.LVL82:
 960 0060 FFF7FEFF 		bl	HAL_GPIO_Init
 961              	.LVL83:
 252:hardware/LCD/ili9341.c **** 	
 253:hardware/LCD/ili9341.c **** 	//初始化PE7,8,9,10,11,12,13,14,15
ARM GAS  /tmp/ccvxPE0v.s 			page 22


 254:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_7|GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10|GPIO_PIN_11|\
 962              		.loc 1 254 0
 963 0064 4FF68073 		movw	r3, #65408
 964 0068 0393     		str	r3, [sp, #12]
 255:hardware/LCD/ili9341.c ****                      GPIO_PIN_12|GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15;
 256:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOE,&GPIO_Initure);
 965              		.loc 1 256 0
 966 006a 03A9     		add	r1, sp, #12
 967 006c 0448     		ldr	r0, .L80+8
 968 006e FFF7FEFF 		bl	HAL_GPIO_Init
 969              	.LVL84:
 257:hardware/LCD/ili9341.c **** }
 970              		.loc 1 257 0
 971 0072 09B0     		add	sp, sp, #36
 972              	.LCFI19:
 973              		.cfi_def_cfa_offset 4
 974              		@ sp needed
 975 0074 5DF804FB 		ldr	pc, [sp], #4
 976              	.L81:
 977              		.align	2
 978              	.L80:
 979 0078 00380240 		.word	1073887232
 980 007c 000C0240 		.word	1073875968
 981 0080 00100240 		.word	1073876992
 982              		.cfi_endproc
 983              	.LFE138:
 985              		.section	.text.LCD_Clear,"ax",%progbits
 986              		.align	1
 987              		.global	LCD_Clear
 988              		.syntax unified
 989              		.thumb
 990              		.thumb_func
 991              		.fpu fpv4-sp-d16
 993              	LCD_Clear:
 994              	.LFB140:
 258:hardware/LCD/ili9341.c ****         
 259:hardware/LCD/ili9341.c **** //初始化lcd
 260:hardware/LCD/ili9341.c **** //该初始化函数可以初始化各种型号的LCD(详见本.c文件最前面的描述)
 261:hardware/LCD/ili9341.c **** void LCD_Init(void)
 262:hardware/LCD/ili9341.c **** { 	  
 263:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 264:hardware/LCD/ili9341.c **** 	FMC_NORSRAM_TimingTypeDef FMC_ReadWriteTim;
 265:hardware/LCD/ili9341.c **** 	FMC_NORSRAM_TimingTypeDef FMC_WriteTim;
 266:hardware/LCD/ili9341.c ****     
 267:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOB_CLK_ENABLE();			//开启GPIOB时钟
 268:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_5|GPIO_PIN_6;  //PB5,背光控制。PB6,供电控制
 269:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 270:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 271:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;     //高速
 272:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOB,&GPIO_Initure); 
 273:hardware/LCD/ili9341.c ****     
 274:hardware/LCD/ili9341.c **** 	SRAM_Handler.Instance=FMC_NORSRAM_DEVICE;                
 275:hardware/LCD/ili9341.c **** 	SRAM_Handler.Extended=FMC_NORSRAM_EXTENDED_DEVICE;    
 276:hardware/LCD/ili9341.c ****     
 277:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.NSBank=FMC_NORSRAM_BANK1;     //使用NE1
 278:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.DataAddressMux=FMC_DATA_ADDRESS_MUX_DISABLE; //地址/数据线不复用
 279:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryType=FMC_MEMORY_TYPE_SRAM;   //SRAM
ARM GAS  /tmp/ccvxPE0v.s 			page 23


 280:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryDataWidth=FMC_NORSRAM_MEM_BUS_WIDTH_16; //16位数据宽度
 281:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.BurstAccessMode=FMC_BURST_ACCESS_MODE_DISABLE; //是否使能突发访问,仅对
 282:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalPolarity=FMC_WAIT_SIGNAL_POLARITY_LOW;//等待信号的极性,仅在
 283:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalActive=FMC_WAIT_TIMING_BEFORE_WS;   //存储器是在等待周期之
 284:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteOperation=FMC_WRITE_OPERATION_ENABLE;    //存储器写使能
 285:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignal=FMC_WAIT_SIGNAL_DISABLE;           //等待使能位,此处未用到
 286:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ExtendedMode=FMC_EXTENDED_MODE_ENABLE;        //读写使用不同的时序
 287:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.AsynchronousWait=FMC_ASYNCHRONOUS_WAIT_DISABLE;//是否使能同步传输模式
 288:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteBurst=FMC_WRITE_BURST_DISABLE;           //禁止突发写
 289:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ContinuousClock=FMC_CONTINUOUS_CLOCK_SYNC_ASYNC;
 290:hardware/LCD/ili9341.c ****     
 291:hardware/LCD/ili9341.c **** 	//FMC读时序控制寄存器
 292:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressSetupTime=0x0F;        //地址建立时间(ADDSET)为15个HCLK 1/180M*15=
 293:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressHoldTime=0x00;
 294:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.DataSetupTime=0x46;           //数据保存时间(DATAST)为70个HCLK	=5.5*70=38
 295:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AccessMode=FMC_ACCESS_MODE_A; //模式A
 296:hardware/LCD/ili9341.c **** 	//FMC写时序控制寄存器
 297:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressSetupTime=0x0F;            //地址建立时间(ADDSET)为15个HCLK=82.5ns
 298:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressHoldTime=0x00;
 299:hardware/LCD/ili9341.c **** 	FMC_WriteTim.DataSetupTime=0x0F;               //数据保存时间(DATAST)为5.5ns*15个HCLK=82.5
 300:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AccessMode=FMC_ACCESS_MODE_A;     //模式A
 301:hardware/LCD/ili9341.c **** 	HAL_SRAM_Init(&SRAM_Handler,&FMC_ReadWriteTim,&FMC_WriteTim);		
 302:hardware/LCD/ili9341.c **** 	delay_ms(50); // delay 50 ms 
 303:hardware/LCD/ili9341.c **** 	
 304:hardware/LCD/ili9341.c **** 	//尝试9341 ID的读取		
 305:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0XD3);				   
 306:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//dummy read 	
 307:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//读到0X00
 308:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();   	//读取93								   
 309:hardware/LCD/ili9341.c **** 	lcddev.id<<=8;
 310:hardware/LCD/ili9341.c **** 	lcddev.id|=LCD_RD_DATA();  	//读取41 	 
 311:hardware/LCD/ili9341.c **** 	printf(" LCD ID:%x\r\n",lcddev.id); //打印LCD ID 
 312:hardware/LCD/ili9341.c **** 
 313:hardware/LCD/ili9341.c **** 	/***************ILI9341初始化*************************/
 314:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCF);  
 315:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 316:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xC1); 
 317:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X30); 
 318:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xED);  
 319:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x64); 
 320:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x03); 
 321:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X12); 
 322:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X81); 
 323:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE8);  
 324:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x85); 
 325:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 326:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x7A); 
 327:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCB);  
 328:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x39); 
 329:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2C); 
 330:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 331:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x34); 
 332:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x02); 
 333:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF7);  
 334:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x20); 
 335:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xEA);  
 336:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
ARM GAS  /tmp/ccvxPE0v.s 			page 24


 337:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 338:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC0);    //Power control 
 339:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1B);   //VRH[5:0] 
 340:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC1);    //Power control 
 341:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);   //SAP[2:0];BT[3:0] 
 342:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC5);    //VCM control 
 343:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3F
 344:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3C
 345:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC7);    //VCM control2 
 346:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XB7); 
 347:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x36);    // Memory Access Control 
 348:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x48); 
 349:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x3A);   
 350:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x55); 
 351:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB1);   
 352:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);   
 353:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1A); 
 354:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB6);    // Display Function Control 
 355:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 356:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xA2); 
 357:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF2);    // 3Gamma Function Disable 
 358:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 359:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x26);    //Gamma curve selected 
 360:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01); 
 361:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE0);    //Set Gamma 
 362:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 363:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2A); 
 364:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x28); 
 365:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 366:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0E); 
 367:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 368:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x54); 
 369:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XA9); 
 370:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x43); 
 371:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 372:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 373:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 374:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 375:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 376:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 		 
 377:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0XE1);    //Set Gamma 
 378:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 379:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x15); 
 380:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x17); 
 381:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x07); 
 382:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x11); 
 383:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x06); 
 384:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2B); 
 385:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x56); 
 386:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3C); 
 387:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x05); 
 388:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 389:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 390:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 391:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 392:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 393:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2B); 
ARM GAS  /tmp/ccvxPE0v.s 			page 25


 394:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 395:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 396:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);
 397:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3f);
 398:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2A); 
 399:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 400:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 401:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 402:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xef);	 
 403:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x11); //Exit Sleep
 404:hardware/LCD/ili9341.c **** 		delay_ms(120);
 405:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x29); //display on
 406:hardware/LCD/ili9341.c **** 		
 407:hardware/LCD/ili9341.c **** 	LCD_Display_Dir(0);		//默认为竖屏
 408:hardware/LCD/ili9341.c **** 	LCD_LED=0;				//点亮背光
 409:hardware/LCD/ili9341.c **** 	LCD_Clear(GBLUE);
 410:hardware/LCD/ili9341.c **** }  
 411:hardware/LCD/ili9341.c **** //清屏函数
 412:hardware/LCD/ili9341.c **** //color:要清屏的填充色
 413:hardware/LCD/ili9341.c **** void LCD_Clear(u32 color)
 414:hardware/LCD/ili9341.c **** {
 995              		.loc 1 414 0
 996              		.cfi_startproc
 997              		@ args = 0, pretend = 0, frame = 0
 998              		@ frame_needed = 0, uses_anonymous_args = 0
 999              	.LVL85:
 1000 0000 38B5     		push	{r3, r4, r5, lr}
 1001              	.LCFI20:
 1002              		.cfi_def_cfa_offset 16
 1003              		.cfi_offset 3, -16
 1004              		.cfi_offset 4, -12
 1005              		.cfi_offset 5, -8
 1006              		.cfi_offset 14, -4
 1007 0002 0546     		mov	r5, r0
 1008              	.LVL86:
 415:hardware/LCD/ili9341.c **** 	u32 index=0;      
 416:hardware/LCD/ili9341.c **** 	u32 totalpoint=lcddev.width; 
 1009              		.loc 1 416 0
 1010 0004 094B     		ldr	r3, .L86
 1011 0006 1A88     		ldrh	r2, [r3]
 1012              	.LVL87:
 417:hardware/LCD/ili9341.c **** 	totalpoint*=lcddev.height; 			//得到总点数
 1013              		.loc 1 417 0
 1014 0008 5C88     		ldrh	r4, [r3, #2]
 1015 000a 04FB02F4 		mul	r4, r4, r2
 1016              	.LVL88:
 418:hardware/LCD/ili9341.c **** 	LCD_SetCursor(0x00,0x0000);			//设置光标位置 
 1017              		.loc 1 418 0
 1018 000e 0021     		movs	r1, #0
 1019 0010 0846     		mov	r0, r1
 1020              	.LVL89:
 1021 0012 FFF7FEFF 		bl	LCD_SetCursor
 1022              	.LVL90:
 419:hardware/LCD/ili9341.c **** 	LCD_WriteRAM_Prepare();     		//开始写入GRAM	 	  
 1023              		.loc 1 419 0
 1024 0016 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1025              	.LVL91:
ARM GAS  /tmp/ccvxPE0v.s 			page 26


 420:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1026              		.loc 1 420 0
 1027 001a 0022     		movs	r2, #0
 1028 001c 03E0     		b	.L83
 1029              	.LVL92:
 1030              	.L84:
 421:hardware/LCD/ili9341.c **** 	{
 422:hardware/LCD/ili9341.c **** 		LCD->LCD_RAM=color;	
 1031              		.loc 1 422 0 discriminator 3
 1032 001e ABB2     		uxth	r3, r5
 1033 0020 0349     		ldr	r1, .L86+4
 1034 0022 4B80     		strh	r3, [r1, #2]	@ movhi
 420:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1035              		.loc 1 420 0 discriminator 3
 1036 0024 0132     		adds	r2, r2, #1
 1037              	.LVL93:
 1038              	.L83:
 420:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1039              		.loc 1 420 0 is_stmt 0 discriminator 1
 1040 0026 A242     		cmp	r2, r4
 1041 0028 F9D3     		bcc	.L84
 423:hardware/LCD/ili9341.c **** 	} 
 424:hardware/LCD/ili9341.c **** }  
 1042              		.loc 1 424 0 is_stmt 1
 1043 002a 38BD     		pop	{r3, r4, r5, pc}
 1044              	.LVL94:
 1045              	.L87:
 1046              		.align	2
 1047              	.L86:
 1048 002c 00000000 		.word	lcddev
 1049 0030 FEFF0760 		.word	1611137022
 1050              		.cfi_endproc
 1051              	.LFE140:
 1053              		.section	.text.LCD_Init,"ax",%progbits
 1054              		.align	1
 1055              		.global	LCD_Init
 1056              		.syntax unified
 1057              		.thumb
 1058              		.thumb_func
 1059              		.fpu fpv4-sp-d16
 1061              	LCD_Init:
 1062              	.LFB139:
 262:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 1063              		.loc 1 262 0
 1064              		.cfi_startproc
 1065              		@ args = 0, pretend = 0, frame = 80
 1066              		@ frame_needed = 0, uses_anonymous_args = 0
 1067 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1068              	.LCFI21:
 1069              		.cfi_def_cfa_offset 28
 1070              		.cfi_offset 4, -28
 1071              		.cfi_offset 5, -24
 1072              		.cfi_offset 6, -20
 1073              		.cfi_offset 7, -16
 1074              		.cfi_offset 8, -12
 1075              		.cfi_offset 9, -8
 1076              		.cfi_offset 14, -4
ARM GAS  /tmp/ccvxPE0v.s 			page 27


 1077 0004 95B0     		sub	sp, sp, #84
 1078              	.LCFI22:
 1079              		.cfi_def_cfa_offset 112
 1080              	.LBB5:
 267:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_5|GPIO_PIN_6;  //PB5,背光控制。PB6,供电控制
 1081              		.loc 1 267 0
 1082 0006 0024     		movs	r4, #0
 1083 0008 0094     		str	r4, [sp]
 1084 000a C04B     		ldr	r3, .L90
 1085 000c 1A6B     		ldr	r2, [r3, #48]
 1086 000e 42F00202 		orr	r2, r2, #2
 1087 0012 1A63     		str	r2, [r3, #48]
 1088 0014 1B6B     		ldr	r3, [r3, #48]
 1089 0016 03F00203 		and	r3, r3, #2
 1090 001a 0093     		str	r3, [sp]
 1091 001c 009B     		ldr	r3, [sp]
 1092              	.LBE5:
 268:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 1093              		.loc 1 268 0
 1094 001e 6023     		movs	r3, #96
 1095 0020 0F93     		str	r3, [sp, #60]
 269:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 1096              		.loc 1 269 0
 1097 0022 0126     		movs	r6, #1
 1098 0024 1096     		str	r6, [sp, #64]
 270:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;     //高速
 1099              		.loc 1 270 0
 1100 0026 1196     		str	r6, [sp, #68]
 271:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOB,&GPIO_Initure); 
 1101              		.loc 1 271 0
 1102 0028 4FF00308 		mov	r8, #3
 1103 002c CDF84880 		str	r8, [sp, #72]
 272:hardware/LCD/ili9341.c ****     
 1104              		.loc 1 272 0
 1105 0030 0FA9     		add	r1, sp, #60
 1106 0032 B748     		ldr	r0, .L90+4
 1107 0034 FFF7FEFF 		bl	HAL_GPIO_Init
 1108              	.LVL95:
 274:hardware/LCD/ili9341.c **** 	SRAM_Handler.Extended=FMC_NORSRAM_EXTENDED_DEVICE;    
 1109              		.loc 1 274 0
 1110 0038 B648     		ldr	r0, .L90+8
 1111 003a 4FF02043 		mov	r3, #-1610612736
 1112 003e 0360     		str	r3, [r0]
 275:hardware/LCD/ili9341.c ****     
 1113              		.loc 1 275 0
 1114 0040 03F58273 		add	r3, r3, #260
 1115 0044 4360     		str	r3, [r0, #4]
 277:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.DataAddressMux=FMC_DATA_ADDRESS_MUX_DISABLE; //地址/数据线不复用
 1116              		.loc 1 277 0
 1117 0046 8460     		str	r4, [r0, #8]
 278:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryType=FMC_MEMORY_TYPE_SRAM;   //SRAM
 1118              		.loc 1 278 0
 1119 0048 C460     		str	r4, [r0, #12]
 279:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryDataWidth=FMC_NORSRAM_MEM_BUS_WIDTH_16; //16位数据宽度
 1120              		.loc 1 279 0
 1121 004a 0461     		str	r4, [r0, #16]
 280:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.BurstAccessMode=FMC_BURST_ACCESS_MODE_DISABLE; //是否使能突发访问,仅对
ARM GAS  /tmp/ccvxPE0v.s 			page 28


 1122              		.loc 1 280 0
 1123 004c 1027     		movs	r7, #16
 1124 004e 4761     		str	r7, [r0, #20]
 281:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalPolarity=FMC_WAIT_SIGNAL_POLARITY_LOW;//等待信号的极性,仅在
 1125              		.loc 1 281 0
 1126 0050 8461     		str	r4, [r0, #24]
 282:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalActive=FMC_WAIT_TIMING_BEFORE_WS;   //存储器是在等待周期之
 1127              		.loc 1 282 0
 1128 0052 C461     		str	r4, [r0, #28]
 283:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteOperation=FMC_WRITE_OPERATION_ENABLE;    //存储器写使能
 1129              		.loc 1 283 0
 1130 0054 4462     		str	r4, [r0, #36]
 284:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignal=FMC_WAIT_SIGNAL_DISABLE;           //等待使能位,此处未用到
 1131              		.loc 1 284 0
 1132 0056 4FF48053 		mov	r3, #4096
 1133 005a 8362     		str	r3, [r0, #40]
 285:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ExtendedMode=FMC_EXTENDED_MODE_ENABLE;        //读写使用不同的时序
 1134              		.loc 1 285 0
 1135 005c C462     		str	r4, [r0, #44]
 286:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.AsynchronousWait=FMC_ASYNCHRONOUS_WAIT_DISABLE;//是否使能同步传输模式
 1136              		.loc 1 286 0
 1137 005e 4FF48043 		mov	r3, #16384
 1138 0062 0363     		str	r3, [r0, #48]
 287:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteBurst=FMC_WRITE_BURST_DISABLE;           //禁止突发写
 1139              		.loc 1 287 0
 1140 0064 4463     		str	r4, [r0, #52]
 288:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ContinuousClock=FMC_CONTINUOUS_CLOCK_SYNC_ASYNC;
 1141              		.loc 1 288 0
 1142 0066 8463     		str	r4, [r0, #56]
 289:hardware/LCD/ili9341.c ****     
 1143              		.loc 1 289 0
 1144 0068 4FF48013 		mov	r3, #1048576
 1145 006c C363     		str	r3, [r0, #60]
 292:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressHoldTime=0x00;
 1146              		.loc 1 292 0
 1147 006e 0F25     		movs	r5, #15
 1148 0070 0895     		str	r5, [sp, #32]
 293:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.DataSetupTime=0x46;           //数据保存时间(DATAST)为70个HCLK	=5.5*70=38
 1149              		.loc 1 293 0
 1150 0072 0994     		str	r4, [sp, #36]
 294:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AccessMode=FMC_ACCESS_MODE_A; //模式A
 1151              		.loc 1 294 0
 1152 0074 4623     		movs	r3, #70
 1153 0076 0A93     		str	r3, [sp, #40]
 295:hardware/LCD/ili9341.c **** 	//FMC写时序控制寄存器
 1154              		.loc 1 295 0
 1155 0078 0E94     		str	r4, [sp, #56]
 297:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressHoldTime=0x00;
 1156              		.loc 1 297 0
 1157 007a 0195     		str	r5, [sp, #4]
 298:hardware/LCD/ili9341.c **** 	FMC_WriteTim.DataSetupTime=0x0F;               //数据保存时间(DATAST)为5.5ns*15个HCLK=82.5
 1158              		.loc 1 298 0
 1159 007c 0294     		str	r4, [sp, #8]
 299:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AccessMode=FMC_ACCESS_MODE_A;     //模式A
 1160              		.loc 1 299 0
 1161 007e 0395     		str	r5, [sp, #12]
 300:hardware/LCD/ili9341.c **** 	HAL_SRAM_Init(&SRAM_Handler,&FMC_ReadWriteTim,&FMC_WriteTim);		
ARM GAS  /tmp/ccvxPE0v.s 			page 29


 1162              		.loc 1 300 0
 1163 0080 0794     		str	r4, [sp, #28]
 301:hardware/LCD/ili9341.c **** 	delay_ms(50); // delay 50 ms 
 1164              		.loc 1 301 0
 1165 0082 01AA     		add	r2, sp, #4
 1166 0084 08A9     		add	r1, sp, #32
 1167 0086 FFF7FEFF 		bl	HAL_SRAM_Init
 1168              	.LVL96:
 302:hardware/LCD/ili9341.c **** 	
 1169              		.loc 1 302 0
 1170 008a 3220     		movs	r0, #50
 1171 008c FFF7FEFF 		bl	delay_ms
 1172              	.LVL97:
 305:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//dummy read 	
 1173              		.loc 1 305 0
 1174 0090 D320     		movs	r0, #211
 1175 0092 FFF7FEFF 		bl	LCD_WR_REG
 1176              	.LVL98:
 306:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//读到0X00
 1177              		.loc 1 306 0
 1178 0096 FFF7FEFF 		bl	LCD_RD_DATA
 1179              	.LVL99:
 1180 009a DFF88492 		ldr	r9, .L90+20
 1181 009e A9F80400 		strh	r0, [r9, #4]	@ movhi
 307:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();   	//读取93								   
 1182              		.loc 1 307 0
 1183 00a2 FFF7FEFF 		bl	LCD_RD_DATA
 1184              	.LVL100:
 1185 00a6 A9F80400 		strh	r0, [r9, #4]	@ movhi
 308:hardware/LCD/ili9341.c **** 	lcddev.id<<=8;
 1186              		.loc 1 308 0
 1187 00aa FFF7FEFF 		bl	LCD_RD_DATA
 1188              	.LVL101:
 309:hardware/LCD/ili9341.c **** 	lcddev.id|=LCD_RD_DATA();  	//读取41 	 
 1189              		.loc 1 309 0
 1190 00ae 0002     		lsls	r0, r0, #8
 1191 00b0 A9F80400 		strh	r0, [r9, #4]	@ movhi
 310:hardware/LCD/ili9341.c **** 	printf(" LCD ID:%x\r\n",lcddev.id); //打印LCD ID 
 1192              		.loc 1 310 0
 1193 00b4 FFF7FEFF 		bl	LCD_RD_DATA
 1194              	.LVL102:
 1195 00b8 B9F80410 		ldrh	r1, [r9, #4]
 1196 00bc 0143     		orrs	r1, r1, r0
 1197 00be 89B2     		uxth	r1, r1
 1198 00c0 A9F80410 		strh	r1, [r9, #4]	@ movhi
 311:hardware/LCD/ili9341.c **** 
 1199              		.loc 1 311 0
 1200 00c4 9448     		ldr	r0, .L90+12
 1201 00c6 FFF7FEFF 		bl	printf
 1202              	.LVL103:
 314:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1203              		.loc 1 314 0
 1204 00ca CF20     		movs	r0, #207
 1205 00cc FFF7FEFF 		bl	LCD_WR_REG
 1206              	.LVL104:
 315:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xC1); 
 1207              		.loc 1 315 0
ARM GAS  /tmp/ccvxPE0v.s 			page 30


 1208 00d0 2046     		mov	r0, r4
 1209 00d2 FFF7FEFF 		bl	LCD_WR_DATA
 1210              	.LVL105:
 316:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X30); 
 1211              		.loc 1 316 0
 1212 00d6 C120     		movs	r0, #193
 1213 00d8 FFF7FEFF 		bl	LCD_WR_DATA
 1214              	.LVL106:
 317:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xED);  
 1215              		.loc 1 317 0
 1216 00dc 3020     		movs	r0, #48
 1217 00de FFF7FEFF 		bl	LCD_WR_DATA
 1218              	.LVL107:
 318:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x64); 
 1219              		.loc 1 318 0
 1220 00e2 ED20     		movs	r0, #237
 1221 00e4 FFF7FEFF 		bl	LCD_WR_REG
 1222              	.LVL108:
 319:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x03); 
 1223              		.loc 1 319 0
 1224 00e8 6420     		movs	r0, #100
 1225 00ea FFF7FEFF 		bl	LCD_WR_DATA
 1226              	.LVL109:
 320:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X12); 
 1227              		.loc 1 320 0
 1228 00ee 4046     		mov	r0, r8
 1229 00f0 FFF7FEFF 		bl	LCD_WR_DATA
 1230              	.LVL110:
 321:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X81); 
 1231              		.loc 1 321 0
 1232 00f4 1220     		movs	r0, #18
 1233 00f6 FFF7FEFF 		bl	LCD_WR_DATA
 1234              	.LVL111:
 322:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE8);  
 1235              		.loc 1 322 0
 1236 00fa 8120     		movs	r0, #129
 1237 00fc FFF7FEFF 		bl	LCD_WR_DATA
 1238              	.LVL112:
 323:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x85); 
 1239              		.loc 1 323 0
 1240 0100 E820     		movs	r0, #232
 1241 0102 FFF7FEFF 		bl	LCD_WR_REG
 1242              	.LVL113:
 324:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 1243              		.loc 1 324 0
 1244 0106 8520     		movs	r0, #133
 1245 0108 FFF7FEFF 		bl	LCD_WR_DATA
 1246              	.LVL114:
 325:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x7A); 
 1247              		.loc 1 325 0
 1248 010c 3846     		mov	r0, r7
 1249 010e FFF7FEFF 		bl	LCD_WR_DATA
 1250              	.LVL115:
 326:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCB);  
 1251              		.loc 1 326 0
 1252 0112 7A20     		movs	r0, #122
 1253 0114 FFF7FEFF 		bl	LCD_WR_DATA
ARM GAS  /tmp/ccvxPE0v.s 			page 31


 1254              	.LVL116:
 327:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x39); 
 1255              		.loc 1 327 0
 1256 0118 CB20     		movs	r0, #203
 1257 011a FFF7FEFF 		bl	LCD_WR_REG
 1258              	.LVL117:
 328:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2C); 
 1259              		.loc 1 328 0
 1260 011e 3920     		movs	r0, #57
 1261 0120 FFF7FEFF 		bl	LCD_WR_DATA
 1262              	.LVL118:
 329:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1263              		.loc 1 329 0
 1264 0124 2C20     		movs	r0, #44
 1265 0126 FFF7FEFF 		bl	LCD_WR_DATA
 1266              	.LVL119:
 330:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x34); 
 1267              		.loc 1 330 0
 1268 012a 2046     		mov	r0, r4
 1269 012c FFF7FEFF 		bl	LCD_WR_DATA
 1270              	.LVL120:
 331:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x02); 
 1271              		.loc 1 331 0
 1272 0130 3420     		movs	r0, #52
 1273 0132 FFF7FEFF 		bl	LCD_WR_DATA
 1274              	.LVL121:
 332:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF7);  
 1275              		.loc 1 332 0
 1276 0136 0220     		movs	r0, #2
 1277 0138 FFF7FEFF 		bl	LCD_WR_DATA
 1278              	.LVL122:
 333:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x20); 
 1279              		.loc 1 333 0
 1280 013c F720     		movs	r0, #247
 1281 013e FFF7FEFF 		bl	LCD_WR_REG
 1282              	.LVL123:
 334:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xEA);  
 1283              		.loc 1 334 0
 1284 0142 2020     		movs	r0, #32
 1285 0144 FFF7FEFF 		bl	LCD_WR_DATA
 1286              	.LVL124:
 335:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1287              		.loc 1 335 0
 1288 0148 EA20     		movs	r0, #234
 1289 014a FFF7FEFF 		bl	LCD_WR_REG
 1290              	.LVL125:
 336:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1291              		.loc 1 336 0
 1292 014e 2046     		mov	r0, r4
 1293 0150 FFF7FEFF 		bl	LCD_WR_DATA
 1294              	.LVL126:
 337:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC0);    //Power control 
 1295              		.loc 1 337 0
 1296 0154 2046     		mov	r0, r4
 1297 0156 FFF7FEFF 		bl	LCD_WR_DATA
 1298              	.LVL127:
 338:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1B);   //VRH[5:0] 
ARM GAS  /tmp/ccvxPE0v.s 			page 32


 1299              		.loc 1 338 0
 1300 015a C020     		movs	r0, #192
 1301 015c FFF7FEFF 		bl	LCD_WR_REG
 1302              	.LVL128:
 339:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC1);    //Power control 
 1303              		.loc 1 339 0
 1304 0160 1B20     		movs	r0, #27
 1305 0162 FFF7FEFF 		bl	LCD_WR_DATA
 1306              	.LVL129:
 340:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);   //SAP[2:0];BT[3:0] 
 1307              		.loc 1 340 0
 1308 0166 C120     		movs	r0, #193
 1309 0168 FFF7FEFF 		bl	LCD_WR_REG
 1310              	.LVL130:
 341:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC5);    //VCM control 
 1311              		.loc 1 341 0
 1312 016c 3046     		mov	r0, r6
 1313 016e FFF7FEFF 		bl	LCD_WR_DATA
 1314              	.LVL131:
 342:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3F
 1315              		.loc 1 342 0
 1316 0172 C520     		movs	r0, #197
 1317 0174 FFF7FEFF 		bl	LCD_WR_REG
 1318              	.LVL132:
 343:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3C
 1319              		.loc 1 343 0
 1320 0178 3020     		movs	r0, #48
 1321 017a FFF7FEFF 		bl	LCD_WR_DATA
 1322              	.LVL133:
 344:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC7);    //VCM control2 
 1323              		.loc 1 344 0
 1324 017e 3020     		movs	r0, #48
 1325 0180 FFF7FEFF 		bl	LCD_WR_DATA
 1326              	.LVL134:
 345:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XB7); 
 1327              		.loc 1 345 0
 1328 0184 C720     		movs	r0, #199
 1329 0186 FFF7FEFF 		bl	LCD_WR_REG
 1330              	.LVL135:
 346:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x36);    // Memory Access Control 
 1331              		.loc 1 346 0
 1332 018a B720     		movs	r0, #183
 1333 018c FFF7FEFF 		bl	LCD_WR_DATA
 1334              	.LVL136:
 347:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x48); 
 1335              		.loc 1 347 0
 1336 0190 3620     		movs	r0, #54
 1337 0192 FFF7FEFF 		bl	LCD_WR_REG
 1338              	.LVL137:
 348:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x3A);   
 1339              		.loc 1 348 0
 1340 0196 4820     		movs	r0, #72
 1341 0198 FFF7FEFF 		bl	LCD_WR_DATA
 1342              	.LVL138:
 349:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x55); 
 1343              		.loc 1 349 0
 1344 019c 3A20     		movs	r0, #58
ARM GAS  /tmp/ccvxPE0v.s 			page 33


 1345 019e FFF7FEFF 		bl	LCD_WR_REG
 1346              	.LVL139:
 350:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB1);   
 1347              		.loc 1 350 0
 1348 01a2 5520     		movs	r0, #85
 1349 01a4 FFF7FEFF 		bl	LCD_WR_DATA
 1350              	.LVL140:
 351:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);   
 1351              		.loc 1 351 0
 1352 01a8 B120     		movs	r0, #177
 1353 01aa FFF7FEFF 		bl	LCD_WR_REG
 1354              	.LVL141:
 352:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1A); 
 1355              		.loc 1 352 0
 1356 01ae 2046     		mov	r0, r4
 1357 01b0 FFF7FEFF 		bl	LCD_WR_DATA
 1358              	.LVL142:
 353:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB6);    // Display Function Control 
 1359              		.loc 1 353 0
 1360 01b4 1A20     		movs	r0, #26
 1361 01b6 FFF7FEFF 		bl	LCD_WR_DATA
 1362              	.LVL143:
 354:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 1363              		.loc 1 354 0
 1364 01ba B620     		movs	r0, #182
 1365 01bc FFF7FEFF 		bl	LCD_WR_REG
 1366              	.LVL144:
 355:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xA2); 
 1367              		.loc 1 355 0
 1368 01c0 0A20     		movs	r0, #10
 1369 01c2 FFF7FEFF 		bl	LCD_WR_DATA
 1370              	.LVL145:
 356:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF2);    // 3Gamma Function Disable 
 1371              		.loc 1 356 0
 1372 01c6 A220     		movs	r0, #162
 1373 01c8 FFF7FEFF 		bl	LCD_WR_DATA
 1374              	.LVL146:
 357:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1375              		.loc 1 357 0
 1376 01cc F220     		movs	r0, #242
 1377 01ce FFF7FEFF 		bl	LCD_WR_REG
 1378              	.LVL147:
 358:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x26);    //Gamma curve selected 
 1379              		.loc 1 358 0
 1380 01d2 2046     		mov	r0, r4
 1381 01d4 FFF7FEFF 		bl	LCD_WR_DATA
 1382              	.LVL148:
 359:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01); 
 1383              		.loc 1 359 0
 1384 01d8 2620     		movs	r0, #38
 1385 01da FFF7FEFF 		bl	LCD_WR_REG
 1386              	.LVL149:
 360:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE0);    //Set Gamma 
 1387              		.loc 1 360 0
 1388 01de 3046     		mov	r0, r6
 1389 01e0 FFF7FEFF 		bl	LCD_WR_DATA
 1390              	.LVL150:
ARM GAS  /tmp/ccvxPE0v.s 			page 34


 361:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1391              		.loc 1 361 0
 1392 01e4 E020     		movs	r0, #224
 1393 01e6 FFF7FEFF 		bl	LCD_WR_REG
 1394              	.LVL151:
 362:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2A); 
 1395              		.loc 1 362 0
 1396 01ea 2846     		mov	r0, r5
 1397 01ec FFF7FEFF 		bl	LCD_WR_DATA
 1398              	.LVL152:
 363:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x28); 
 1399              		.loc 1 363 0
 1400 01f0 2A20     		movs	r0, #42
 1401 01f2 FFF7FEFF 		bl	LCD_WR_DATA
 1402              	.LVL153:
 364:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 1403              		.loc 1 364 0
 1404 01f6 2820     		movs	r0, #40
 1405 01f8 FFF7FEFF 		bl	LCD_WR_DATA
 1406              	.LVL154:
 365:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0E); 
 1407              		.loc 1 365 0
 1408 01fc 0820     		movs	r0, #8
 1409 01fe FFF7FEFF 		bl	LCD_WR_DATA
 1410              	.LVL155:
 366:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 1411              		.loc 1 366 0
 1412 0202 0E20     		movs	r0, #14
 1413 0204 FFF7FEFF 		bl	LCD_WR_DATA
 1414              	.LVL156:
 367:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x54); 
 1415              		.loc 1 367 0
 1416 0208 0820     		movs	r0, #8
 1417 020a FFF7FEFF 		bl	LCD_WR_DATA
 1418              	.LVL157:
 368:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XA9); 
 1419              		.loc 1 368 0
 1420 020e 5420     		movs	r0, #84
 1421 0210 FFF7FEFF 		bl	LCD_WR_DATA
 1422              	.LVL158:
 369:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x43); 
 1423              		.loc 1 369 0
 1424 0214 A920     		movs	r0, #169
 1425 0216 FFF7FEFF 		bl	LCD_WR_DATA
 1426              	.LVL159:
 370:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 1427              		.loc 1 370 0
 1428 021a 4320     		movs	r0, #67
 1429 021c FFF7FEFF 		bl	LCD_WR_DATA
 1430              	.LVL160:
 371:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1431              		.loc 1 371 0
 1432 0220 0A20     		movs	r0, #10
 1433 0222 FFF7FEFF 		bl	LCD_WR_DATA
 1434              	.LVL161:
 372:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1435              		.loc 1 372 0
ARM GAS  /tmp/ccvxPE0v.s 			page 35


 1436 0226 2846     		mov	r0, r5
 1437 0228 FFF7FEFF 		bl	LCD_WR_DATA
 1438              	.LVL162:
 373:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1439              		.loc 1 373 0
 1440 022c 2046     		mov	r0, r4
 1441 022e FFF7FEFF 		bl	LCD_WR_DATA
 1442              	.LVL163:
 374:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1443              		.loc 1 374 0
 1444 0232 2046     		mov	r0, r4
 1445 0234 FFF7FEFF 		bl	LCD_WR_DATA
 1446              	.LVL164:
 375:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 		 
 1447              		.loc 1 375 0
 1448 0238 2046     		mov	r0, r4
 1449 023a FFF7FEFF 		bl	LCD_WR_DATA
 1450              	.LVL165:
 376:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0XE1);    //Set Gamma 
 1451              		.loc 1 376 0
 1452 023e 2046     		mov	r0, r4
 1453 0240 FFF7FEFF 		bl	LCD_WR_DATA
 1454              	.LVL166:
 377:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1455              		.loc 1 377 0
 1456 0244 E120     		movs	r0, #225
 1457 0246 FFF7FEFF 		bl	LCD_WR_REG
 1458              	.LVL167:
 378:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x15); 
 1459              		.loc 1 378 0
 1460 024a 2046     		mov	r0, r4
 1461 024c FFF7FEFF 		bl	LCD_WR_DATA
 1462              	.LVL168:
 379:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x17); 
 1463              		.loc 1 379 0
 1464 0250 1520     		movs	r0, #21
 1465 0252 FFF7FEFF 		bl	LCD_WR_DATA
 1466              	.LVL169:
 380:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x07); 
 1467              		.loc 1 380 0
 1468 0256 1720     		movs	r0, #23
 1469 0258 FFF7FEFF 		bl	LCD_WR_DATA
 1470              	.LVL170:
 381:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x11); 
 1471              		.loc 1 381 0
 1472 025c 0720     		movs	r0, #7
 1473 025e FFF7FEFF 		bl	LCD_WR_DATA
 1474              	.LVL171:
 382:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x06); 
 1475              		.loc 1 382 0
 1476 0262 1120     		movs	r0, #17
 1477 0264 FFF7FEFF 		bl	LCD_WR_DATA
 1478              	.LVL172:
 383:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2B); 
 1479              		.loc 1 383 0
 1480 0268 0620     		movs	r0, #6
 1481 026a FFF7FEFF 		bl	LCD_WR_DATA
ARM GAS  /tmp/ccvxPE0v.s 			page 36


 1482              	.LVL173:
 384:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x56); 
 1483              		.loc 1 384 0
 1484 026e 2B20     		movs	r0, #43
 1485 0270 FFF7FEFF 		bl	LCD_WR_DATA
 1486              	.LVL174:
 385:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3C); 
 1487              		.loc 1 385 0
 1488 0274 5620     		movs	r0, #86
 1489 0276 FFF7FEFF 		bl	LCD_WR_DATA
 1490              	.LVL175:
 386:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x05); 
 1491              		.loc 1 386 0
 1492 027a 3C20     		movs	r0, #60
 1493 027c FFF7FEFF 		bl	LCD_WR_DATA
 1494              	.LVL176:
 387:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 1495              		.loc 1 387 0
 1496 0280 0520     		movs	r0, #5
 1497 0282 FFF7FEFF 		bl	LCD_WR_DATA
 1498              	.LVL177:
 388:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1499              		.loc 1 388 0
 1500 0286 3846     		mov	r0, r7
 1501 0288 FFF7FEFF 		bl	LCD_WR_DATA
 1502              	.LVL178:
 389:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 1503              		.loc 1 389 0
 1504 028c 2846     		mov	r0, r5
 1505 028e FFF7FEFF 		bl	LCD_WR_DATA
 1506              	.LVL179:
 390:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 1507              		.loc 1 390 0
 1508 0292 3F20     		movs	r0, #63
 1509 0294 FFF7FEFF 		bl	LCD_WR_DATA
 1510              	.LVL180:
 391:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1511              		.loc 1 391 0
 1512 0298 3F20     		movs	r0, #63
 1513 029a FFF7FEFF 		bl	LCD_WR_DATA
 1514              	.LVL181:
 392:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2B); 
 1515              		.loc 1 392 0
 1516 029e 2846     		mov	r0, r5
 1517 02a0 FFF7FEFF 		bl	LCD_WR_DATA
 1518              	.LVL182:
 393:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1519              		.loc 1 393 0
 1520 02a4 2B20     		movs	r0, #43
 1521 02a6 FFF7FEFF 		bl	LCD_WR_REG
 1522              	.LVL183:
 394:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1523              		.loc 1 394 0
 1524 02aa 2046     		mov	r0, r4
 1525 02ac FFF7FEFF 		bl	LCD_WR_DATA
 1526              	.LVL184:
 395:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);
ARM GAS  /tmp/ccvxPE0v.s 			page 37


 1527              		.loc 1 395 0
 1528 02b0 2046     		mov	r0, r4
 1529 02b2 FFF7FEFF 		bl	LCD_WR_DATA
 1530              	.LVL185:
 396:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3f);
 1531              		.loc 1 396 0
 1532 02b6 3046     		mov	r0, r6
 1533 02b8 FFF7FEFF 		bl	LCD_WR_DATA
 1534              	.LVL186:
 397:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2A); 
 1535              		.loc 1 397 0
 1536 02bc 3F20     		movs	r0, #63
 1537 02be FFF7FEFF 		bl	LCD_WR_DATA
 1538              	.LVL187:
 398:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1539              		.loc 1 398 0
 1540 02c2 2A20     		movs	r0, #42
 1541 02c4 FFF7FEFF 		bl	LCD_WR_REG
 1542              	.LVL188:
 399:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1543              		.loc 1 399 0
 1544 02c8 2046     		mov	r0, r4
 1545 02ca FFF7FEFF 		bl	LCD_WR_DATA
 1546              	.LVL189:
 400:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1547              		.loc 1 400 0
 1548 02ce 2046     		mov	r0, r4
 1549 02d0 FFF7FEFF 		bl	LCD_WR_DATA
 1550              	.LVL190:
 401:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xef);	 
 1551              		.loc 1 401 0
 1552 02d4 2046     		mov	r0, r4
 1553 02d6 FFF7FEFF 		bl	LCD_WR_DATA
 1554              	.LVL191:
 402:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x11); //Exit Sleep
 1555              		.loc 1 402 0
 1556 02da EF20     		movs	r0, #239
 1557 02dc FFF7FEFF 		bl	LCD_WR_DATA
 1558              	.LVL192:
 403:hardware/LCD/ili9341.c **** 		delay_ms(120);
 1559              		.loc 1 403 0
 1560 02e0 1120     		movs	r0, #17
 1561 02e2 FFF7FEFF 		bl	LCD_WR_REG
 1562              	.LVL193:
 404:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x29); //display on
 1563              		.loc 1 404 0
 1564 02e6 7820     		movs	r0, #120
 1565 02e8 FFF7FEFF 		bl	delay_ms
 1566              	.LVL194:
 405:hardware/LCD/ili9341.c **** 		
 1567              		.loc 1 405 0
 1568 02ec 2920     		movs	r0, #41
 1569 02ee FFF7FEFF 		bl	LCD_WR_REG
 1570              	.LVL195:
 407:hardware/LCD/ili9341.c **** 	LCD_LED=0;				//点亮背光
 1571              		.loc 1 407 0
 1572 02f2 2046     		mov	r0, r4
ARM GAS  /tmp/ccvxPE0v.s 			page 38


 1573 02f4 FFF7FEFF 		bl	LCD_Display_Dir
 1574              	.LVL196:
 408:hardware/LCD/ili9341.c **** 	LCD_Clear(GBLUE);
 1575              		.loc 1 408 0
 1576 02f8 084B     		ldr	r3, .L90+16
 1577 02fa 1C60     		str	r4, [r3]
 409:hardware/LCD/ili9341.c **** }  
 1578              		.loc 1 409 0
 1579 02fc 40F2FF70 		movw	r0, #2047
 1580 0300 FFF7FEFF 		bl	LCD_Clear
 1581              	.LVL197:
 410:hardware/LCD/ili9341.c **** //清屏函数
 1582              		.loc 1 410 0
 1583 0304 15B0     		add	sp, sp, #84
 1584              	.LCFI23:
 1585              		.cfi_def_cfa_offset 28
 1586              		@ sp needed
 1587 0306 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1588              	.L91:
 1589 030a 00BF     		.align	2
 1590              	.L90:
 1591 030c 00380240 		.word	1073887232
 1592 0310 00040240 		.word	1073873920
 1593 0314 00000000 		.word	SRAM_Handler
 1594 0318 00000000 		.word	.LC0
 1595 031c 94824042 		.word	1111523988
 1596 0320 00000000 		.word	lcddev
 1597              		.cfi_endproc
 1598              	.LFE139:
 1600              		.section	.text.LCD_Fill,"ax",%progbits
 1601              		.align	1
 1602              		.global	LCD_Fill
 1603              		.syntax unified
 1604              		.thumb
 1605              		.thumb_func
 1606              		.fpu fpv4-sp-d16
 1608              	LCD_Fill:
 1609              	.LFB141:
 425:hardware/LCD/ili9341.c **** //在指定区域内填充单个颜色
 426:hardware/LCD/ili9341.c **** //(sx,sy),(ex,ey):填充矩形对角坐标,区域大小为:(ex-sx+1)*(ey-sy+1)   
 427:hardware/LCD/ili9341.c **** //color:要填充的颜色
 428:hardware/LCD/ili9341.c **** void LCD_Fill(u16 sx,u16 sy,u16 ex,u16 ey,u32 color)
 429:hardware/LCD/ili9341.c **** {          
 1610              		.loc 1 429 0
 1611              		.cfi_startproc
 1612              		@ args = 4, pretend = 0, frame = 0
 1613              		@ frame_needed = 0, uses_anonymous_args = 0
 1614              	.LVL198:
 1615 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1616              	.LCFI24:
 1617              		.cfi_def_cfa_offset 24
 1618              		.cfi_offset 4, -24
 1619              		.cfi_offset 5, -20
 1620              		.cfi_offset 6, -16
 1621              		.cfi_offset 7, -12
 1622              		.cfi_offset 8, -8
 1623              		.cfi_offset 14, -4
ARM GAS  /tmp/ccvxPE0v.s 			page 39


 1624 0004 0746     		mov	r7, r0
 1625 0006 0E46     		mov	r6, r1
 1626 0008 9846     		mov	r8, r3
 1627 000a 069D     		ldr	r5, [sp, #24]
 1628              	.LVL199:
 430:hardware/LCD/ili9341.c **** 	u16 i,j;
 431:hardware/LCD/ili9341.c **** 	u16 xlen=0; 
 432:hardware/LCD/ili9341.c **** 	xlen=ex-sx+1;	 
 1629              		.loc 1 432 0
 1630 000c 141A     		subs	r4, r2, r0
 1631 000e A4B2     		uxth	r4, r4
 1632 0010 0134     		adds	r4, r4, #1
 1633 0012 A4B2     		uxth	r4, r4
 1634              	.LVL200:
 433:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1635              		.loc 1 433 0
 1636 0014 08E0     		b	.L93
 1637              	.LVL201:
 1638              	.L95:
 434:hardware/LCD/ili9341.c **** 	{
 435:hardware/LCD/ili9341.c **** 		LCD_SetCursor(sx,i);      				//设置光标位置 
 436:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     			//开始写入GRAM	  
 437:hardware/LCD/ili9341.c **** 		for(j=0;j<xlen;j++)LCD->LCD_RAM=color;	//显示颜色 	    
 1639              		.loc 1 437 0 discriminator 3
 1640 0016 A9B2     		uxth	r1, r5
 1641 0018 094A     		ldr	r2, .L99
 1642 001a 5180     		strh	r1, [r2, #2]	@ movhi
 1643 001c 0133     		adds	r3, r3, #1
 1644              	.LVL202:
 1645 001e 9BB2     		uxth	r3, r3
 1646              	.LVL203:
 1647              	.L94:
 1648              		.loc 1 437 0 is_stmt 0 discriminator 1
 1649 0020 A342     		cmp	r3, r4
 1650 0022 F8D3     		bcc	.L95
 433:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1651              		.loc 1 433 0 is_stmt 1 discriminator 2
 1652 0024 0136     		adds	r6, r6, #1
 1653              	.LVL204:
 1654 0026 B6B2     		uxth	r6, r6
 1655              	.LVL205:
 1656              	.L93:
 433:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1657              		.loc 1 433 0 is_stmt 0 discriminator 1
 1658 0028 4645     		cmp	r6, r8
 1659 002a 07D8     		bhi	.L98
 435:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     			//开始写入GRAM	  
 1660              		.loc 1 435 0 is_stmt 1
 1661 002c 3146     		mov	r1, r6
 1662 002e 3846     		mov	r0, r7
 1663 0030 FFF7FEFF 		bl	LCD_SetCursor
 1664              	.LVL206:
 436:hardware/LCD/ili9341.c **** 		for(j=0;j<xlen;j++)LCD->LCD_RAM=color;	//显示颜色 	    
 1665              		.loc 1 436 0
 1666 0034 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1667              	.LVL207:
 1668              		.loc 1 437 0
ARM GAS  /tmp/ccvxPE0v.s 			page 40


 1669 0038 0023     		movs	r3, #0
 1670 003a F1E7     		b	.L94
 1671              	.LVL208:
 1672              	.L98:
 438:hardware/LCD/ili9341.c **** 	}  
 439:hardware/LCD/ili9341.c **** }  
 1673              		.loc 1 439 0
 1674 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1675              	.LVL209:
 1676              	.L100:
 1677              		.align	2
 1678              	.L99:
 1679 0040 FEFF0760 		.word	1611137022
 1680              		.cfi_endproc
 1681              	.LFE141:
 1683              		.section	.text.LCD_Color_Fill,"ax",%progbits
 1684              		.align	1
 1685              		.global	LCD_Color_Fill
 1686              		.syntax unified
 1687              		.thumb
 1688              		.thumb_func
 1689              		.fpu fpv4-sp-d16
 1691              	LCD_Color_Fill:
 1692              	.LFB142:
 440:hardware/LCD/ili9341.c **** //在指定区域内填充指定颜色块			 
 441:hardware/LCD/ili9341.c **** //(sx,sy),(ex,ey):填充矩形对角坐标,区域大小为:(ex-sx+1)*(ey-sy+1)   
 442:hardware/LCD/ili9341.c **** //color:要填充的颜色
 443:hardware/LCD/ili9341.c **** void LCD_Color_Fill(u16 sx,u16 sy,u16 ex,u16 ey,u16 *color)
 444:hardware/LCD/ili9341.c **** {  
 1693              		.loc 1 444 0
 1694              		.cfi_startproc
 1695              		@ args = 4, pretend = 0, frame = 0
 1696              		@ frame_needed = 0, uses_anonymous_args = 0
 1697              	.LVL210:
 1698 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1699              	.LCFI25:
 1700              		.cfi_def_cfa_offset 32
 1701              		.cfi_offset 3, -32
 1702              		.cfi_offset 4, -28
 1703              		.cfi_offset 5, -24
 1704              		.cfi_offset 6, -20
 1705              		.cfi_offset 7, -16
 1706              		.cfi_offset 8, -12
 1707              		.cfi_offset 9, -8
 1708              		.cfi_offset 14, -4
 1709 0004 8146     		mov	r9, r0
 1710 0006 8846     		mov	r8, r1
 1711 0008 089E     		ldr	r6, [sp, #32]
 445:hardware/LCD/ili9341.c **** 	u16 height,width;
 446:hardware/LCD/ili9341.c **** 	u16 i,j; 
 447:hardware/LCD/ili9341.c **** 	width=ex-sx+1; 			//得到填充的宽度
 1712              		.loc 1 447 0
 1713 000a 141A     		subs	r4, r2, r0
 1714 000c A4B2     		uxth	r4, r4
 1715 000e 0134     		adds	r4, r4, #1
 1716 0010 A4B2     		uxth	r4, r4
 1717              	.LVL211:
ARM GAS  /tmp/ccvxPE0v.s 			page 41


 448:hardware/LCD/ili9341.c **** 	height=ey-sy+1;			//高度
 1718              		.loc 1 448 0
 1719 0012 5F1A     		subs	r7, r3, r1
 1720 0014 BFB2     		uxth	r7, r7
 1721 0016 0137     		adds	r7, r7, #1
 1722 0018 BFB2     		uxth	r7, r7
 1723              	.LVL212:
 449:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1724              		.loc 1 449 0
 1725 001a 0025     		movs	r5, #0
 1726 001c 0BE0     		b	.L102
 1727              	.LVL213:
 1728              	.L104:
 450:hardware/LCD/ili9341.c **** 	{
 451:hardware/LCD/ili9341.c **** 		LCD_SetCursor(sx,sy+i);   	//设置光标位置 
 452:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     //开始写入GRAM
 453:hardware/LCD/ili9341.c **** 		for(j=0;j<width;j++)LCD->LCD_RAM=color[i*width+j];//写入数据 
 1729              		.loc 1 453 0 discriminator 3
 1730 001e 04FB0532 		mla	r2, r4, r5, r3
 1731 0022 36F81210 		ldrh	r1, [r6, r2, lsl #1]
 1732 0026 0B4A     		ldr	r2, .L108
 1733 0028 5180     		strh	r1, [r2, #2]	@ movhi
 1734 002a 0133     		adds	r3, r3, #1
 1735              	.LVL214:
 1736 002c 9BB2     		uxth	r3, r3
 1737              	.LVL215:
 1738              	.L103:
 1739              		.loc 1 453 0 is_stmt 0 discriminator 1
 1740 002e A342     		cmp	r3, r4
 1741 0030 F5D3     		bcc	.L104
 449:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1742              		.loc 1 449 0 is_stmt 1 discriminator 2
 1743 0032 0135     		adds	r5, r5, #1
 1744              	.LVL216:
 1745 0034 ADB2     		uxth	r5, r5
 1746              	.LVL217:
 1747              	.L102:
 449:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1748              		.loc 1 449 0 is_stmt 0 discriminator 1
 1749 0036 BD42     		cmp	r5, r7
 1750 0038 09D2     		bcs	.L107
 451:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     //开始写入GRAM
 1751              		.loc 1 451 0 is_stmt 1
 1752 003a 05EB0801 		add	r1, r5, r8
 1753 003e 89B2     		uxth	r1, r1
 1754 0040 4846     		mov	r0, r9
 1755 0042 FFF7FEFF 		bl	LCD_SetCursor
 1756              	.LVL218:
 452:hardware/LCD/ili9341.c **** 		for(j=0;j<width;j++)LCD->LCD_RAM=color[i*width+j];//写入数据 
 1757              		.loc 1 452 0
 1758 0046 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1759              	.LVL219:
 1760              		.loc 1 453 0
 1761 004a 0023     		movs	r3, #0
 1762 004c EFE7     		b	.L103
 1763              	.LVL220:
 1764              	.L107:
ARM GAS  /tmp/ccvxPE0v.s 			page 42


 454:hardware/LCD/ili9341.c **** 	} 
 455:hardware/LCD/ili9341.c **** }  
 1765              		.loc 1 455 0
 1766 004e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1767              	.LVL221:
 1768              	.L109:
 1769 0052 00BF     		.align	2
 1770              	.L108:
 1771 0054 FEFF0760 		.word	1611137022
 1772              		.cfi_endproc
 1773              	.LFE142:
 1775              		.section	.text.LCD_DrawLine,"ax",%progbits
 1776              		.align	1
 1777              		.global	LCD_DrawLine
 1778              		.syntax unified
 1779              		.thumb
 1780              		.thumb_func
 1781              		.fpu fpv4-sp-d16
 1783              	LCD_DrawLine:
 1784              	.LFB143:
 456:hardware/LCD/ili9341.c **** //画线
 457:hardware/LCD/ili9341.c **** //x1,y1:起点坐标
 458:hardware/LCD/ili9341.c **** //x2,y2:终点坐标  
 459:hardware/LCD/ili9341.c **** void LCD_DrawLine(u16 x1, u16 y1, u16 x2, u16 y2)
 460:hardware/LCD/ili9341.c **** {
 1785              		.loc 1 460 0
 1786              		.cfi_startproc
 1787              		@ args = 0, pretend = 0, frame = 8
 1788              		@ frame_needed = 0, uses_anonymous_args = 0
 1789              	.LVL222:
 1790 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1791              	.LCFI26:
 1792              		.cfi_def_cfa_offset 36
 1793              		.cfi_offset 4, -36
 1794              		.cfi_offset 5, -32
 1795              		.cfi_offset 6, -28
 1796              		.cfi_offset 7, -24
 1797              		.cfi_offset 8, -20
 1798              		.cfi_offset 9, -16
 1799              		.cfi_offset 10, -12
 1800              		.cfi_offset 11, -8
 1801              		.cfi_offset 14, -4
 1802 0004 83B0     		sub	sp, sp, #12
 1803              	.LCFI27:
 1804              		.cfi_def_cfa_offset 48
 1805              	.LVL223:
 461:hardware/LCD/ili9341.c **** 	u16 t; 
 462:hardware/LCD/ili9341.c **** 	int xerr=0,yerr=0,delta_x,delta_y,distance; 
 463:hardware/LCD/ili9341.c **** 	int incx,incy,uRow,uCol; 
 464:hardware/LCD/ili9341.c **** 	delta_x=x2-x1; //计算坐标增量 
 1806              		.loc 1 464 0
 1807 0006 8046     		mov	r8, r0
 1808 0008 A2EB000A 		sub	r10, r2, r0
 1809              	.LVL224:
 465:hardware/LCD/ili9341.c **** 	delta_y=y2-y1; 
 1810              		.loc 1 465 0
 1811 000c 8946     		mov	r9, r1
ARM GAS  /tmp/ccvxPE0v.s 			page 43


 1812 000e A3EB010B 		sub	fp, r3, r1
 1813              	.LVL225:
 466:hardware/LCD/ili9341.c **** 	uRow=x1; 
 467:hardware/LCD/ili9341.c **** 	uCol=y1; 
 468:hardware/LCD/ili9341.c **** 	
 469:hardware/LCD/ili9341.c **** 	if(delta_x>0)
 1814              		.loc 1 469 0
 1815 0012 BAF1000F 		cmp	r10, #0
 1816 0016 0DDD     		ble	.L124
 470:hardware/LCD/ili9341.c **** 		incx=1; //设置单步方向 
 1817              		.loc 1 470 0
 1818 0018 0123     		movs	r3, #1
 1819              	.LVL226:
 1820 001a 0093     		str	r3, [sp]
 1821              	.L111:
 1822              	.LVL227:
 471:hardware/LCD/ili9341.c **** 	else if
 472:hardware/LCD/ili9341.c **** 		(delta_x==0)incx=0;//垂直线 
 473:hardware/LCD/ili9341.c **** 	else 
 474:hardware/LCD/ili9341.c **** 		{incx=-1;delta_x=-delta_x;} 
 475:hardware/LCD/ili9341.c **** 
 476:hardware/LCD/ili9341.c **** 	
 477:hardware/LCD/ili9341.c **** 	if(delta_y>0)
 1823              		.loc 1 477 0
 1824 001c BBF1000F 		cmp	fp, #0
 1825 0020 14DD     		ble	.L125
 478:hardware/LCD/ili9341.c **** 		incy=1; 
 1826              		.loc 1 478 0
 1827 0022 0123     		movs	r3, #1
 1828 0024 0193     		str	r3, [sp, #4]
 1829              	.L112:
 1830              	.LVL228:
 479:hardware/LCD/ili9341.c **** 	else if
 480:hardware/LCD/ili9341.c **** 		(delta_y==0)incy=0;//水平线 
 481:hardware/LCD/ili9341.c **** 	else
 482:hardware/LCD/ili9341.c **** 		{incy=-1;delta_y=-delta_y;} 
 483:hardware/LCD/ili9341.c **** 	
 484:hardware/LCD/ili9341.c **** 	if( delta_x>delta_y)
 1831              		.loc 1 484 0
 1832 0026 DA45     		cmp	r10, fp
 1833 0028 1CDD     		ble	.L122
 485:hardware/LCD/ili9341.c **** 		distance=delta_x; //选取基本增量坐标轴 
 1834              		.loc 1 485 0
 1835 002a 5646     		mov	r6, r10
 1836              	.L113:
 1837              	.LVL229:
 462:hardware/LCD/ili9341.c **** 	int incx,incy,uRow,uCol; 
 1838              		.loc 1 462 0
 1839 002c 0025     		movs	r5, #0
 1840 002e 2F46     		mov	r7, r5
 486:hardware/LCD/ili9341.c **** 	else 
 487:hardware/LCD/ili9341.c **** 		distance=delta_y; 
 488:hardware/LCD/ili9341.c **** 	
 489:hardware/LCD/ili9341.c **** 	for(t=0;t<=distance+1;t++ )//画线输出 
 1841              		.loc 1 489 0
 1842 0030 2C46     		mov	r4, r5
 1843 0032 1BE0     		b	.L114
ARM GAS  /tmp/ccvxPE0v.s 			page 44


 1844              	.LVL230:
 1845              	.L124:
 472:hardware/LCD/ili9341.c **** 	else 
 1846              		.loc 1 472 0
 1847 0034 BAF1000F 		cmp	r10, #0
 1848 0038 05D0     		beq	.L119
 1849              	.LVL231:
 474:hardware/LCD/ili9341.c **** 
 1850              		.loc 1 474 0
 1851 003a CAF1000A 		rsb	r10, r10, #0
 1852              	.LVL232:
 1853 003e 4FF0FF33 		mov	r3, #-1
 1854              	.LVL233:
 1855 0042 0093     		str	r3, [sp]
 1856 0044 EAE7     		b	.L111
 1857              	.LVL234:
 1858              	.L119:
 472:hardware/LCD/ili9341.c **** 	else 
 1859              		.loc 1 472 0
 1860 0046 CDF800A0 		str	r10, [sp]
 1861 004a E7E7     		b	.L111
 1862              	.LVL235:
 1863              	.L125:
 480:hardware/LCD/ili9341.c **** 	else
 1864              		.loc 1 480 0
 1865 004c BBF1000F 		cmp	fp, #0
 1866 0050 05D0     		beq	.L121
 1867              	.LVL236:
 482:hardware/LCD/ili9341.c **** 	
 1868              		.loc 1 482 0
 1869 0052 CBF1000B 		rsb	fp, fp, #0
 1870              	.LVL237:
 1871 0056 4FF0FF33 		mov	r3, #-1
 1872 005a 0193     		str	r3, [sp, #4]
 1873 005c E3E7     		b	.L112
 1874              	.LVL238:
 1875              	.L121:
 480:hardware/LCD/ili9341.c **** 	else
 1876              		.loc 1 480 0
 1877 005e CDF804B0 		str	fp, [sp, #4]
 1878 0062 E0E7     		b	.L112
 1879              	.LVL239:
 1880              	.L122:
 487:hardware/LCD/ili9341.c **** 	
 1881              		.loc 1 487 0
 1882 0064 5E46     		mov	r6, fp
 1883 0066 E1E7     		b	.L113
 1884              	.LVL240:
 1885              	.L116:
 1886              		.loc 1 489 0 discriminator 2
 1887 0068 0134     		adds	r4, r4, #1
 1888              	.LVL241:
 1889 006a A4B2     		uxth	r4, r4
 1890              	.LVL242:
 1891              	.L114:
 1892              		.loc 1 489 0 is_stmt 0 discriminator 1
 1893 006c 731C     		adds	r3, r6, #1
ARM GAS  /tmp/ccvxPE0v.s 			page 45


 1894 006e 9C42     		cmp	r4, r3
 1895 0070 12DC     		bgt	.L126
 490:hardware/LCD/ili9341.c **** 	{  
 491:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(uRow,uCol);//画点 
 1896              		.loc 1 491 0 is_stmt 1
 1897 0072 1FFA89F1 		uxth	r1, r9
 1898 0076 1FFA88F0 		uxth	r0, r8
 1899 007a FFF7FEFF 		bl	LCD_DrawPoint
 1900              	.LVL243:
 492:hardware/LCD/ili9341.c **** 		xerr+=delta_x ; 
 1901              		.loc 1 492 0
 1902 007e 5744     		add	r7, r7, r10
 1903              	.LVL244:
 493:hardware/LCD/ili9341.c **** 		yerr+=delta_y ; 
 1904              		.loc 1 493 0
 1905 0080 5D44     		add	r5, r5, fp
 1906              	.LVL245:
 494:hardware/LCD/ili9341.c **** 		if(xerr>distance) 
 1907              		.loc 1 494 0
 1908 0082 BE42     		cmp	r6, r7
 1909 0084 02DA     		bge	.L115
 495:hardware/LCD/ili9341.c **** 		{ 
 496:hardware/LCD/ili9341.c **** 			xerr-=distance; 
 1910              		.loc 1 496 0
 1911 0086 BF1B     		subs	r7, r7, r6
 1912              	.LVL246:
 497:hardware/LCD/ili9341.c **** 			uRow+=incx; 
 1913              		.loc 1 497 0
 1914 0088 009B     		ldr	r3, [sp]
 1915 008a 9844     		add	r8, r8, r3
 1916              	.LVL247:
 1917              	.L115:
 498:hardware/LCD/ili9341.c **** 		} 
 499:hardware/LCD/ili9341.c **** 		if(yerr>distance) 
 1918              		.loc 1 499 0
 1919 008c AE42     		cmp	r6, r5
 1920 008e EBDA     		bge	.L116
 500:hardware/LCD/ili9341.c **** 		{ 
 501:hardware/LCD/ili9341.c **** 			yerr-=distance; 
 1921              		.loc 1 501 0
 1922 0090 AD1B     		subs	r5, r5, r6
 1923              	.LVL248:
 502:hardware/LCD/ili9341.c **** 			uCol+=incy; 
 1924              		.loc 1 502 0
 1925 0092 019B     		ldr	r3, [sp, #4]
 1926 0094 9944     		add	r9, r9, r3
 1927              	.LVL249:
 1928 0096 E7E7     		b	.L116
 1929              	.L126:
 503:hardware/LCD/ili9341.c **** 		} 
 504:hardware/LCD/ili9341.c **** 	}  
 505:hardware/LCD/ili9341.c **** }    
 1930              		.loc 1 505 0
 1931 0098 03B0     		add	sp, sp, #12
 1932              	.LCFI28:
 1933              		.cfi_def_cfa_offset 36
 1934              	.LVL250:
ARM GAS  /tmp/ccvxPE0v.s 			page 46


 1935              		@ sp needed
 1936 009a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1937              		.cfi_endproc
 1938              	.LFE143:
 1940              		.section	.text.LCD_DrawRectangle,"ax",%progbits
 1941              		.align	1
 1942              		.global	LCD_DrawRectangle
 1943              		.syntax unified
 1944              		.thumb
 1945              		.thumb_func
 1946              		.fpu fpv4-sp-d16
 1948              	LCD_DrawRectangle:
 1949              	.LFB144:
 506:hardware/LCD/ili9341.c **** //画矩形	  
 507:hardware/LCD/ili9341.c **** //(x1,y1),(x2,y2):矩形的对角坐标
 508:hardware/LCD/ili9341.c **** void LCD_DrawRectangle(u16 x1, u16 y1, u16 x2, u16 y2)
 509:hardware/LCD/ili9341.c **** {
 1950              		.loc 1 509 0
 1951              		.cfi_startproc
 1952              		@ args = 0, pretend = 0, frame = 0
 1953              		@ frame_needed = 0, uses_anonymous_args = 0
 1954              	.LVL251:
 1955 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1956              	.LCFI29:
 1957              		.cfi_def_cfa_offset 24
 1958              		.cfi_offset 3, -24
 1959              		.cfi_offset 4, -20
 1960              		.cfi_offset 5, -16
 1961              		.cfi_offset 6, -12
 1962              		.cfi_offset 7, -8
 1963              		.cfi_offset 14, -4
 1964 0002 0746     		mov	r7, r0
 1965 0004 0E46     		mov	r6, r1
 1966 0006 1546     		mov	r5, r2
 1967 0008 1C46     		mov	r4, r3
 510:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y1,x2,y1);
 1968              		.loc 1 510 0
 1969 000a 0B46     		mov	r3, r1
 1970              	.LVL252:
 1971 000c FFF7FEFF 		bl	LCD_DrawLine
 1972              	.LVL253:
 511:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y1,x1,y2);
 1973              		.loc 1 511 0
 1974 0010 2346     		mov	r3, r4
 1975 0012 3A46     		mov	r2, r7
 1976 0014 3146     		mov	r1, r6
 1977 0016 3846     		mov	r0, r7
 1978 0018 FFF7FEFF 		bl	LCD_DrawLine
 1979              	.LVL254:
 512:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y2,x2,y2);
 1980              		.loc 1 512 0
 1981 001c 2346     		mov	r3, r4
 1982 001e 2A46     		mov	r2, r5
 1983 0020 2146     		mov	r1, r4
 1984 0022 3846     		mov	r0, r7
 1985 0024 FFF7FEFF 		bl	LCD_DrawLine
 1986              	.LVL255:
ARM GAS  /tmp/ccvxPE0v.s 			page 47


 513:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x2,y1,x2,y2);
 1987              		.loc 1 513 0
 1988 0028 2346     		mov	r3, r4
 1989 002a 2A46     		mov	r2, r5
 1990 002c 3146     		mov	r1, r6
 1991 002e 2846     		mov	r0, r5
 1992 0030 FFF7FEFF 		bl	LCD_DrawLine
 1993              	.LVL256:
 1994 0034 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1995              		.cfi_endproc
 1996              	.LFE144:
 1998              		.section	.text.LCD_Draw_Circle,"ax",%progbits
 1999              		.align	1
 2000              		.global	LCD_Draw_Circle
 2001              		.syntax unified
 2002              		.thumb
 2003              		.thumb_func
 2004              		.fpu fpv4-sp-d16
 2006              	LCD_Draw_Circle:
 2007              	.LFB145:
 514:hardware/LCD/ili9341.c **** }
 515:hardware/LCD/ili9341.c **** //在指定位置画一个指定大小的圆
 516:hardware/LCD/ili9341.c **** //(x,y):中心点
 517:hardware/LCD/ili9341.c **** //r    :半径
 518:hardware/LCD/ili9341.c **** void LCD_Draw_Circle(u16 x0,u16 y0,u8 r)
 519:hardware/LCD/ili9341.c **** {
 2008              		.loc 1 519 0
 2009              		.cfi_startproc
 2010              		@ args = 0, pretend = 0, frame = 16
 2011              		@ frame_needed = 0, uses_anonymous_args = 0
 2012              	.LVL257:
 2013 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2014              	.LCFI30:
 2015              		.cfi_def_cfa_offset 36
 2016              		.cfi_offset 4, -36
 2017              		.cfi_offset 5, -32
 2018              		.cfi_offset 6, -28
 2019              		.cfi_offset 7, -24
 2020              		.cfi_offset 8, -20
 2021              		.cfi_offset 9, -16
 2022              		.cfi_offset 10, -12
 2023              		.cfi_offset 11, -8
 2024              		.cfi_offset 14, -4
 2025 0004 85B0     		sub	sp, sp, #20
 2026              	.LCFI31:
 2027              		.cfi_def_cfa_offset 56
 2028 0006 8346     		mov	fp, r0
 2029 0008 8946     		mov	r9, r1
 2030 000a 9046     		mov	r8, r2
 2031              	.LVL258:
 520:hardware/LCD/ili9341.c **** 	int a,b;
 521:hardware/LCD/ili9341.c **** 	int di;
 522:hardware/LCD/ili9341.c **** 	a=0;b=r;	  
 523:hardware/LCD/ili9341.c **** 	di=3-(r<<1);             //判断下个点位置的标志
 2032              		.loc 1 523 0
 2033 000c 5300     		lsls	r3, r2, #1
 2034 000e C3F10307 		rsb	r7, r3, #3
ARM GAS  /tmp/ccvxPE0v.s 			page 48


 2035              	.LVL259:
 522:hardware/LCD/ili9341.c **** 	di=3-(r<<1);             //判断下个点位置的标志
 2036              		.loc 1 522 0
 2037 0012 0026     		movs	r6, #0
 524:hardware/LCD/ili9341.c **** 	while(a<=b)
 2038              		.loc 1 524 0
 2039 0014 02E0     		b	.L130
 2040              	.LVL260:
 2041              	.L136:
 525:hardware/LCD/ili9341.c **** 	{
 526:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0-b);             //5
 527:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0+b,y0-a);             //0           
 528:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+b,y0+a);             //4               
 529:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0+b);             //6 
 530:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0+b);             //1       
 531:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0-b,y0+a);             
 532:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0-b);             //2             
 533:hardware/LCD/ili9341.c ****   		LCD_DrawPoint(x0-b,y0-a);             //7     	         
 534:hardware/LCD/ili9341.c **** 		a++;
 535:hardware/LCD/ili9341.c **** 		//使用Bresenham算法画圆     
 536:hardware/LCD/ili9341.c **** 		if(di<0)di +=4*a+6;	  
 2042              		.loc 1 536 0 discriminator 1
 2043 0016 B300     		lsls	r3, r6, #2
 2044 0018 0633     		adds	r3, r3, #6
 2045 001a 1F44     		add	r7, r7, r3
 2046              	.LVL261:
 2047              	.L130:
 524:hardware/LCD/ili9341.c **** 	while(a<=b)
 2048              		.loc 1 524 0
 2049 001c 4645     		cmp	r6, r8
 2050 001e 4CDC     		bgt	.L135
 526:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0+b,y0-a);             //0           
 2051              		.loc 1 526 0
 2052 0020 B5B2     		uxth	r5, r6
 2053 0022 05EB0B03 		add	r3, r5, fp
 2054 0026 9BB2     		uxth	r3, r3
 2055 0028 1A46     		mov	r2, r3
 2056 002a 1FFA88F4 		uxth	r4, r8
 2057 002e A9EB0403 		sub	r3, r9, r4
 2058 0032 9BB2     		uxth	r3, r3
 2059 0034 0193     		str	r3, [sp, #4]
 2060 0036 1946     		mov	r1, r3
 2061 0038 0092     		str	r2, [sp]
 2062 003a 1046     		mov	r0, r2
 2063 003c FFF7FEFF 		bl	LCD_DrawPoint
 2064              	.LVL262:
 527:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+b,y0+a);             //4               
 2065              		.loc 1 527 0
 2066 0040 0BEB040A 		add	r10, fp, r4
 2067 0044 1FFA8AFA 		uxth	r10, r10
 2068 0048 A9EB0503 		sub	r3, r9, r5
 2069 004c 9AB2     		uxth	r2, r3
 2070 004e 0292     		str	r2, [sp, #8]
 2071 0050 1146     		mov	r1, r2
 2072 0052 5046     		mov	r0, r10
 2073 0054 FFF7FEFF 		bl	LCD_DrawPoint
 2074              	.LVL263:
ARM GAS  /tmp/ccvxPE0v.s 			page 49


 528:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0+b);             //6 
 2075              		.loc 1 528 0
 2076 0058 05EB0903 		add	r3, r5, r9
 2077 005c 98B2     		uxth	r0, r3
 2078 005e 0390     		str	r0, [sp, #12]
 2079 0060 0146     		mov	r1, r0
 2080 0062 5046     		mov	r0, r10
 2081 0064 FFF7FEFF 		bl	LCD_DrawPoint
 2082              	.LVL264:
 529:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0+b);             //1       
 2083              		.loc 1 529 0
 2084 0068 04EB090A 		add	r10, r4, r9
 2085 006c 1FFA8AFA 		uxth	r10, r10
 2086 0070 5146     		mov	r1, r10
 2087 0072 0098     		ldr	r0, [sp]
 2088 0074 FFF7FEFF 		bl	LCD_DrawPoint
 2089              	.LVL265:
 530:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0-b,y0+a);             
 2090              		.loc 1 530 0
 2091 0078 ABEB0505 		sub	r5, fp, r5
 2092 007c ADB2     		uxth	r5, r5
 2093 007e 5146     		mov	r1, r10
 2094 0080 2846     		mov	r0, r5
 2095 0082 FFF7FEFF 		bl	LCD_DrawPoint
 2096              	.LVL266:
 531:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0-b);             //2             
 2097              		.loc 1 531 0
 2098 0086 ABEB0404 		sub	r4, fp, r4
 2099 008a A4B2     		uxth	r4, r4
 2100 008c 0399     		ldr	r1, [sp, #12]
 2101 008e 2046     		mov	r0, r4
 2102 0090 FFF7FEFF 		bl	LCD_DrawPoint
 2103              	.LVL267:
 532:hardware/LCD/ili9341.c ****   		LCD_DrawPoint(x0-b,y0-a);             //7     	         
 2104              		.loc 1 532 0
 2105 0094 0199     		ldr	r1, [sp, #4]
 2106 0096 2846     		mov	r0, r5
 2107 0098 FFF7FEFF 		bl	LCD_DrawPoint
 2108              	.LVL268:
 533:hardware/LCD/ili9341.c **** 		a++;
 2109              		.loc 1 533 0
 2110 009c 0299     		ldr	r1, [sp, #8]
 2111 009e 2046     		mov	r0, r4
 2112 00a0 FFF7FEFF 		bl	LCD_DrawPoint
 2113              	.LVL269:
 534:hardware/LCD/ili9341.c **** 		//使用Bresenham算法画圆     
 2114              		.loc 1 534 0
 2115 00a4 0136     		adds	r6, r6, #1
 2116              	.LVL270:
 2117              		.loc 1 536 0
 2118 00a6 002F     		cmp	r7, #0
 2119 00a8 B5DB     		blt	.L136
 537:hardware/LCD/ili9341.c **** 		else
 538:hardware/LCD/ili9341.c **** 		{
 539:hardware/LCD/ili9341.c **** 			di+=10+4*(a-b);   
 2120              		.loc 1 539 0
 2121 00aa A6EB0803 		sub	r3, r6, r8
ARM GAS  /tmp/ccvxPE0v.s 			page 50


 2122 00ae 9B00     		lsls	r3, r3, #2
 2123 00b0 0A33     		adds	r3, r3, #10
 2124 00b2 1F44     		add	r7, r7, r3
 2125              	.LVL271:
 540:hardware/LCD/ili9341.c **** 			b--;
 2126              		.loc 1 540 0
 2127 00b4 08F1FF38 		add	r8, r8, #-1
 2128              	.LVL272:
 2129 00b8 B0E7     		b	.L130
 2130              	.L135:
 541:hardware/LCD/ili9341.c **** 		} 						    
 542:hardware/LCD/ili9341.c **** 	}
 543:hardware/LCD/ili9341.c **** } 									  
 2131              		.loc 1 543 0
 2132 00ba 05B0     		add	sp, sp, #20
 2133              	.LCFI32:
 2134              		.cfi_def_cfa_offset 36
 2135              		@ sp needed
 2136 00bc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2137              		.cfi_endproc
 2138              	.LFE145:
 2140              		.section	.text.LCD_ShowChar,"ax",%progbits
 2141              		.align	1
 2142              		.global	LCD_ShowChar
 2143              		.syntax unified
 2144              		.thumb
 2145              		.thumb_func
 2146              		.fpu fpv4-sp-d16
 2148              	LCD_ShowChar:
 2149              	.LFB146:
 544:hardware/LCD/ili9341.c **** //在指定位置显示一个字符
 545:hardware/LCD/ili9341.c **** //x,y:起始坐标
 546:hardware/LCD/ili9341.c **** //num:要显示的字符:" "--->"~"
 547:hardware/LCD/ili9341.c **** //size:字体大小 12/16/24/32
 548:hardware/LCD/ili9341.c **** //mode:叠加方式(1)还是非叠加方式(0)
 549:hardware/LCD/ili9341.c **** void LCD_ShowChar(u16 x,u16 y,u8 num,u8 size,u8 mode)
 550:hardware/LCD/ili9341.c **** {  							  
 2150              		.loc 1 550 0
 2151              		.cfi_startproc
 2152              		@ args = 4, pretend = 0, frame = 8
 2153              		@ frame_needed = 0, uses_anonymous_args = 0
 2154              	.LVL273:
 2155 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2156              	.LCFI33:
 2157              		.cfi_def_cfa_offset 36
 2158              		.cfi_offset 4, -36
 2159              		.cfi_offset 5, -32
 2160              		.cfi_offset 6, -28
 2161              		.cfi_offset 7, -24
 2162              		.cfi_offset 8, -20
 2163              		.cfi_offset 9, -16
 2164              		.cfi_offset 10, -12
 2165              		.cfi_offset 11, -8
 2166              		.cfi_offset 14, -4
 2167 0004 83B0     		sub	sp, sp, #12
 2168              	.LCFI34:
 2169              		.cfi_def_cfa_offset 48
ARM GAS  /tmp/ccvxPE0v.s 			page 51


 2170 0006 0090     		str	r0, [sp]
 2171 0008 8846     		mov	r8, r1
 2172 000a 1F46     		mov	r7, r3
 2173 000c 9DF830A0 		ldrb	r10, [sp, #48]	@ zero_extendqisi2
 2174              	.LVL274:
 551:hardware/LCD/ili9341.c ****     u8 temp,t1,t;
 552:hardware/LCD/ili9341.c **** 	u16 y0=y;
 553:hardware/LCD/ili9341.c **** 	u8 csize=(size/8+((size%8)?1:0))*(size/2);		//得到字体一个字符对应点阵集所占的字
 2175              		.loc 1 553 0
 2176 0010 13F00703 		ands	r3, r3, #7
 2177              	.LVL275:
 2178 0014 18BF     		it	ne
 2179 0016 0123     		movne	r3, #1
 2180 0018 03EBD703 		add	r3, r3, r7, lsr #3
 2181 001c 7908     		lsrs	r1, r7, #1
 2182              	.LVL276:
 2183 001e 11FB03F3 		smulbb	r3, r1, r3
 2184 0022 DBB2     		uxtb	r3, r3
 2185 0024 0193     		str	r3, [sp, #4]
 2186              	.LVL277:
 554:hardware/LCD/ili9341.c ****  	num=num-' ';//得到偏移后的值（ASCII字库是从空格开始取模，所以-' '就是对
 2187              		.loc 1 554 0
 2188 0026 203A     		subs	r2, r2, #32
 2189              	.LVL278:
 2190 0028 5FFA82FB 		uxtb	fp, r2
 2191              	.LVL279:
 555:hardware/LCD/ili9341.c **** 	for(t=0;t<csize;t++)
 2192              		.loc 1 555 0
 2193 002c 4446     		mov	r4, r8
 2194 002e 4FF00009 		mov	r9, #0
 2195 0032 46E0     		b	.L138
 2196              	.LVL280:
 2197              	.L154:
 556:hardware/LCD/ili9341.c **** 	{   
 557:hardware/LCD/ili9341.c **** 		if(size==12)temp=asc2_1206[num][t]; 	 	//调用1206字体
 2198              		.loc 1 557 0 discriminator 1
 2199 0034 0BEB4B03 		add	r3, fp, fp, lsl #1
 2200 0038 9A00     		lsls	r2, r3, #2
 2201 003a 2C4B     		ldr	r3, .L157
 2202 003c 1344     		add	r3, r3, r2
 2203 003e 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2204              	.LVL281:
 2205 0042 4EE0     		b	.L140
 2206              	.LVL282:
 2207              	.L155:
 558:hardware/LCD/ili9341.c **** 		else if(size==16)temp=asc2_1608[num][t];	//调用1608字体
 2208              		.loc 1 558 0 discriminator 1
 2209 0044 2A4B     		ldr	r3, .L157+4
 2210 0046 03EB0B13 		add	r3, r3, fp, lsl #4
 2211 004a 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2212              	.LVL283:
 2213 004e 48E0     		b	.L140
 2214              	.LVL284:
 2215              	.L156:
 559:hardware/LCD/ili9341.c **** 		else if(size==24)temp=asc2_2412[num][t];	//调用2412字体
 2216              		.loc 1 559 0 discriminator 1
 2217 0050 0BEBCB03 		add	r3, fp, fp, lsl #3
ARM GAS  /tmp/ccvxPE0v.s 			page 52


 2218 0054 9A00     		lsls	r2, r3, #2
 2219 0056 274B     		ldr	r3, .L157+8
 2220 0058 1344     		add	r3, r3, r2
 2221 005a 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2222              	.LVL285:
 2223 005e 40E0     		b	.L140
 2224              	.LVL286:
 2225              	.L153:
 560:hardware/LCD/ili9341.c **** 		else if(size==32)temp=asc2_3216[num][t];	//调用3216字体
 561:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 562:hardware/LCD/ili9341.c **** 		for(t1=0;t1<8;t1++)
 563:hardware/LCD/ili9341.c **** 		{			    
 564:hardware/LCD/ili9341.c **** 			if(temp&0x80)LCD_Fast_DrawPoint(x,y,POINT_COLOR);
 2226              		.loc 1 564 0 discriminator 1
 2227 0060 254B     		ldr	r3, .L157+12
 2228 0062 1A68     		ldr	r2, [r3]
 2229 0064 2146     		mov	r1, r4
 2230 0066 0098     		ldr	r0, [sp]
 2231 0068 FFF7FEFF 		bl	LCD_Fast_DrawPoint
 2232              	.LVL287:
 2233              	.L146:
 565:hardware/LCD/ili9341.c **** 			else if(mode==0)LCD_Fast_DrawPoint(x,y,BACK_COLOR);
 566:hardware/LCD/ili9341.c **** 			temp<<=1;
 2234              		.loc 1 566 0
 2235 006c 6D00     		lsls	r5, r5, #1
 2236              	.LVL288:
 2237 006e EDB2     		uxtb	r5, r5
 2238              	.LVL289:
 567:hardware/LCD/ili9341.c **** 			y++;
 2239              		.loc 1 567 0
 2240 0070 0134     		adds	r4, r4, #1
 2241              	.LVL290:
 2242 0072 A4B2     		uxth	r4, r4
 2243              	.LVL291:
 568:hardware/LCD/ili9341.c **** 			if(y>=lcddev.height)return;		//超区域了
 2244              		.loc 1 568 0
 2245 0074 214B     		ldr	r3, .L157+16
 2246 0076 5B88     		ldrh	r3, [r3, #2]
 2247 0078 9C42     		cmp	r4, r3
 2248 007a 34D2     		bcs	.L137
 569:hardware/LCD/ili9341.c **** 			if((y-y0)==size)
 2249              		.loc 1 569 0
 2250 007c A4EB0803 		sub	r3, r4, r8
 2251 0080 BB42     		cmp	r3, r7
 2252 0082 10D0     		beq	.L152
 562:hardware/LCD/ili9341.c **** 		{			    
 2253              		.loc 1 562 0 discriminator 2
 2254 0084 0136     		adds	r6, r6, #1
 2255              	.LVL292:
 2256 0086 F6B2     		uxtb	r6, r6
 2257              	.LVL293:
 2258              	.L143:
 562:hardware/LCD/ili9341.c **** 		{			    
 2259              		.loc 1 562 0 is_stmt 0 discriminator 1
 2260 0088 072E     		cmp	r6, #7
 2261 008a 16D8     		bhi	.L148
 564:hardware/LCD/ili9341.c **** 			else if(mode==0)LCD_Fast_DrawPoint(x,y,BACK_COLOR);
ARM GAS  /tmp/ccvxPE0v.s 			page 53


 2262              		.loc 1 564 0 is_stmt 1
 2263 008c 15F0800F 		tst	r5, #128
 2264 0090 E6D1     		bne	.L153
 565:hardware/LCD/ili9341.c **** 			temp<<=1;
 2265              		.loc 1 565 0
 2266 0092 BAF1000F 		cmp	r10, #0
 2267 0096 E9D1     		bne	.L146
 565:hardware/LCD/ili9341.c **** 			temp<<=1;
 2268              		.loc 1 565 0 is_stmt 0 discriminator 1
 2269 0098 194B     		ldr	r3, .L157+20
 2270 009a 1A68     		ldr	r2, [r3]
 2271 009c 2146     		mov	r1, r4
 2272 009e 0098     		ldr	r0, [sp]
 2273 00a0 FFF7FEFF 		bl	LCD_Fast_DrawPoint
 2274              	.LVL294:
 2275 00a4 E2E7     		b	.L146
 2276              	.L152:
 2277              	.LVL295:
 570:hardware/LCD/ili9341.c **** 			{
 571:hardware/LCD/ili9341.c **** 				y=y0;
 572:hardware/LCD/ili9341.c **** 				x++;
 2278              		.loc 1 572 0 is_stmt 1
 2279 00a6 009B     		ldr	r3, [sp]
 2280 00a8 0133     		adds	r3, r3, #1
 2281 00aa 9BB2     		uxth	r3, r3
 2282 00ac 1A46     		mov	r2, r3
 2283 00ae 0093     		str	r3, [sp]
 2284              	.LVL296:
 573:hardware/LCD/ili9341.c **** 				if(x>=lcddev.width)return;	//超区域了
 2285              		.loc 1 573 0
 2286 00b0 124B     		ldr	r3, .L157+16
 2287 00b2 1B88     		ldrh	r3, [r3]
 2288 00b4 9A42     		cmp	r2, r3
 2289 00b6 16D2     		bcs	.L137
 571:hardware/LCD/ili9341.c **** 				x++;
 2290              		.loc 1 571 0
 2291 00b8 4446     		mov	r4, r8
 2292              	.LVL297:
 2293              	.L148:
 555:hardware/LCD/ili9341.c **** 	{   
 2294              		.loc 1 555 0 discriminator 2
 2295 00ba 09F10109 		add	r9, r9, #1
 2296              	.LVL298:
 2297 00be 5FFA89F9 		uxtb	r9, r9
 2298              	.LVL299:
 2299              	.L138:
 555:hardware/LCD/ili9341.c **** 	{   
 2300              		.loc 1 555 0 is_stmt 0 discriminator 1
 2301 00c2 019B     		ldr	r3, [sp, #4]
 2302 00c4 9945     		cmp	r9, r3
 2303 00c6 0ED2     		bcs	.L137
 557:hardware/LCD/ili9341.c **** 		else if(size==16)temp=asc2_1608[num][t];	//调用1608字体
 2304              		.loc 1 557 0 is_stmt 1
 2305 00c8 0C2F     		cmp	r7, #12
 2306 00ca B3D0     		beq	.L154
 558:hardware/LCD/ili9341.c **** 		else if(size==24)temp=asc2_2412[num][t];	//调用2412字体
 2307              		.loc 1 558 0
ARM GAS  /tmp/ccvxPE0v.s 			page 54


 2308 00cc 102F     		cmp	r7, #16
 2309 00ce B9D0     		beq	.L155
 559:hardware/LCD/ili9341.c **** 		else if(size==32)temp=asc2_3216[num][t];	//调用3216字体
 2310              		.loc 1 559 0
 2311 00d0 182F     		cmp	r7, #24
 2312 00d2 BDD0     		beq	.L156
 560:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 2313              		.loc 1 560 0
 2314 00d4 202F     		cmp	r7, #32
 2315 00d6 06D1     		bne	.L137
 560:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 2316              		.loc 1 560 0 is_stmt 0 discriminator 1
 2317 00d8 0A4B     		ldr	r3, .L157+24
 2318 00da 03EBCB13 		add	r3, r3, fp, lsl #7
 2319 00de 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2320              	.LVL300:
 2321              	.L140:
 550:hardware/LCD/ili9341.c ****     u8 temp,t1,t;
 2322              		.loc 1 550 0 is_stmt 1 discriminator 1
 2323 00e2 0026     		movs	r6, #0
 2324 00e4 D0E7     		b	.L143
 2325              	.LVL301:
 2326              	.L137:
 574:hardware/LCD/ili9341.c **** 				break;
 575:hardware/LCD/ili9341.c **** 			}
 576:hardware/LCD/ili9341.c **** 		}  	 
 577:hardware/LCD/ili9341.c **** 	}  	    	   	 	  
 578:hardware/LCD/ili9341.c **** }   
 2327              		.loc 1 578 0
 2328 00e6 03B0     		add	sp, sp, #12
 2329              	.LCFI35:
 2330              		.cfi_def_cfa_offset 36
 2331              		@ sp needed
 2332 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2333              	.LVL302:
 2334              	.L158:
 2335              		.align	2
 2336              	.L157:
 2337 00ec 00000000 		.word	asc2_1206
 2338 00f0 00000000 		.word	asc2_1608
 2339 00f4 00000000 		.word	asc2_2412
 2340 00f8 00000000 		.word	.LANCHOR0
 2341 00fc 00000000 		.word	lcddev
 2342 0100 00000000 		.word	.LANCHOR1
 2343 0104 00000000 		.word	asc2_3216
 2344              		.cfi_endproc
 2345              	.LFE146:
 2347              		.section	.text.LCD_Pow,"ax",%progbits
 2348              		.align	1
 2349              		.global	LCD_Pow
 2350              		.syntax unified
 2351              		.thumb
 2352              		.thumb_func
 2353              		.fpu fpv4-sp-d16
 2355              	LCD_Pow:
 2356              	.LFB147:
 579:hardware/LCD/ili9341.c **** //m^n函数
ARM GAS  /tmp/ccvxPE0v.s 			page 55


 580:hardware/LCD/ili9341.c **** //返回值:m^n次方.
 581:hardware/LCD/ili9341.c **** u32 LCD_Pow(u8 m,u8 n)
 582:hardware/LCD/ili9341.c **** {
 2357              		.loc 1 582 0
 2358              		.cfi_startproc
 2359              		@ args = 0, pretend = 0, frame = 0
 2360              		@ frame_needed = 0, uses_anonymous_args = 0
 2361              		@ link register save eliminated.
 2362              	.LVL303:
 583:hardware/LCD/ili9341.c **** 	u32 result=1;	 
 2363              		.loc 1 583 0
 2364 0000 0122     		movs	r2, #1
 584:hardware/LCD/ili9341.c **** 	while(n--)result*=m;    
 2365              		.loc 1 584 0
 2366 0002 02E0     		b	.L160
 2367              	.LVL304:
 2368              	.L161:
 2369              		.loc 1 584 0 is_stmt 0 discriminator 2
 2370 0004 00FB02F2 		mul	r2, r0, r2
 2371              	.LVL305:
 2372 0008 1946     		mov	r1, r3
 2373              	.LVL306:
 2374              	.L160:
 2375              		.loc 1 584 0 discriminator 1
 2376 000a 4B1E     		subs	r3, r1, #1
 2377 000c DBB2     		uxtb	r3, r3
 2378              	.LVL307:
 2379 000e 0029     		cmp	r1, #0
 2380 0010 F8D1     		bne	.L161
 585:hardware/LCD/ili9341.c **** 	return result;
 586:hardware/LCD/ili9341.c **** }			 
 2381              		.loc 1 586 0 is_stmt 1
 2382 0012 1046     		mov	r0, r2
 2383              	.LVL308:
 2384 0014 7047     		bx	lr
 2385              		.cfi_endproc
 2386              	.LFE147:
 2388              		.section	.text.LCD_ShowNum,"ax",%progbits
 2389              		.align	1
 2390              		.global	LCD_ShowNum
 2391              		.syntax unified
 2392              		.thumb
 2393              		.thumb_func
 2394              		.fpu fpv4-sp-d16
 2396              	LCD_ShowNum:
 2397              	.LFB148:
 587:hardware/LCD/ili9341.c **** //显示数字,高位为0,则不显示
 588:hardware/LCD/ili9341.c **** //x,y :起点坐标	 
 589:hardware/LCD/ili9341.c **** //len :数字的位数
 590:hardware/LCD/ili9341.c **** //size:字体大小
 591:hardware/LCD/ili9341.c **** //color:颜色 
 592:hardware/LCD/ili9341.c **** //num:数值(0~4294967295);	 
 593:hardware/LCD/ili9341.c **** void LCD_ShowNum(u16 x,u16 y,u32 num,u8 len,u8 size)
 594:hardware/LCD/ili9341.c **** {         	
 2398              		.loc 1 594 0
 2399              		.cfi_startproc
 2400              		@ args = 4, pretend = 0, frame = 0
ARM GAS  /tmp/ccvxPE0v.s 			page 56


 2401              		@ frame_needed = 0, uses_anonymous_args = 0
 2402              	.LVL309:
 2403 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2404              	.LCFI36:
 2405              		.cfi_def_cfa_offset 32
 2406              		.cfi_offset 4, -32
 2407              		.cfi_offset 5, -28
 2408              		.cfi_offset 6, -24
 2409              		.cfi_offset 7, -20
 2410              		.cfi_offset 8, -16
 2411              		.cfi_offset 9, -12
 2412              		.cfi_offset 10, -8
 2413              		.cfi_offset 14, -4
 2414 0004 82B0     		sub	sp, sp, #8
 2415              	.LCFI37:
 2416              		.cfi_def_cfa_offset 40
 2417 0006 8246     		mov	r10, r0
 2418 0008 8946     		mov	r9, r1
 2419 000a 9046     		mov	r8, r2
 2420 000c 1D46     		mov	r5, r3
 2421 000e 9DF82860 		ldrb	r6, [sp, #40]	@ zero_extendqisi2
 2422              	.LVL310:
 595:hardware/LCD/ili9341.c **** 	u8 t,temp;
 596:hardware/LCD/ili9341.c **** 	u8 enshow=0;						   
 2423              		.loc 1 596 0
 2424 0012 0027     		movs	r7, #0
 597:hardware/LCD/ili9341.c **** 	for(t=0;t<len;t++)
 2425              		.loc 1 597 0
 2426 0014 3C46     		mov	r4, r7
 2427 0016 19E0     		b	.L163
 2428              	.LVL311:
 2429              	.L170:
 598:hardware/LCD/ili9341.c **** 	{
 599:hardware/LCD/ili9341.c **** 		temp=(num/LCD_Pow(10,len-t-1))%10;
 600:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 601:hardware/LCD/ili9341.c **** 		{
 602:hardware/LCD/ili9341.c **** 			if(temp==0)
 603:hardware/LCD/ili9341.c **** 			{
 604:hardware/LCD/ili9341.c **** 				LCD_ShowChar(x+(size/2)*t,y,' ',size,0);
 2430              		.loc 1 604 0
 2431 0018 7008     		lsrs	r0, r6, #1
 2432 001a 00FB04A0 		mla	r0, r0, r4, r10
 2433 001e 0023     		movs	r3, #0
 2434 0020 0093     		str	r3, [sp]
 2435 0022 3346     		mov	r3, r6
 2436 0024 2022     		movs	r2, #32
 2437              	.LVL312:
 2438 0026 4946     		mov	r1, r9
 2439 0028 80B2     		uxth	r0, r0
 2440 002a FFF7FEFF 		bl	LCD_ShowChar
 2441              	.LVL313:
 605:hardware/LCD/ili9341.c **** 				continue;
 2442              		.loc 1 605 0
 2443 002e 0BE0     		b	.L165
 2444              	.LVL314:
 2445              	.L164:
 606:hardware/LCD/ili9341.c **** 			}else enshow=1; 
ARM GAS  /tmp/ccvxPE0v.s 			page 57


 607:hardware/LCD/ili9341.c **** 		 	 
 608:hardware/LCD/ili9341.c **** 		}
 609:hardware/LCD/ili9341.c **** 	 	LCD_ShowChar(x+(size/2)*t,y,temp+'0',size,0); 
 2446              		.loc 1 609 0
 2447 0030 7008     		lsrs	r0, r6, #1
 2448 0032 3032     		adds	r2, r2, #48
 2449              	.LVL315:
 2450 0034 00FB04A0 		mla	r0, r0, r4, r10
 2451 0038 0023     		movs	r3, #0
 2452 003a 0093     		str	r3, [sp]
 2453 003c 3346     		mov	r3, r6
 2454 003e D2B2     		uxtb	r2, r2
 2455              	.LVL316:
 2456 0040 4946     		mov	r1, r9
 2457 0042 80B2     		uxth	r0, r0
 2458 0044 FFF7FEFF 		bl	LCD_ShowChar
 2459              	.LVL317:
 2460              	.L165:
 597:hardware/LCD/ili9341.c **** 	{
 2461              		.loc 1 597 0 discriminator 2
 2462 0048 0134     		adds	r4, r4, #1
 2463              	.LVL318:
 2464 004a E4B2     		uxtb	r4, r4
 2465              	.LVL319:
 2466              	.L163:
 597:hardware/LCD/ili9341.c **** 	{
 2467              		.loc 1 597 0 is_stmt 0 discriminator 1
 2468 004c AC42     		cmp	r4, r5
 2469 004e 1AD2     		bcs	.L169
 599:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 2470              		.loc 1 599 0 is_stmt 1
 2471 0050 291B     		subs	r1, r5, r4
 2472 0052 C9B2     		uxtb	r1, r1
 2473 0054 0139     		subs	r1, r1, #1
 2474 0056 C9B2     		uxtb	r1, r1
 2475 0058 0A20     		movs	r0, #10
 2476 005a FFF7FEFF 		bl	LCD_Pow
 2477              	.LVL320:
 2478 005e B8FBF0F0 		udiv	r0, r8, r0
 2479 0062 0A4A     		ldr	r2, .L171
 2480 0064 A2FB0032 		umull	r3, r2, r2, r0
 2481 0068 D208     		lsrs	r2, r2, #3
 2482 006a 02EB8202 		add	r2, r2, r2, lsl #2
 2483 006e 5300     		lsls	r3, r2, #1
 2484 0070 C21A     		subs	r2, r0, r3
 2485 0072 D2B2     		uxtb	r2, r2
 2486              	.LVL321:
 600:hardware/LCD/ili9341.c **** 		{
 2487              		.loc 1 600 0
 2488 0074 002F     		cmp	r7, #0
 2489 0076 DBD1     		bne	.L164
 600:hardware/LCD/ili9341.c **** 		{
 2490              		.loc 1 600 0 is_stmt 0 discriminator 1
 2491 0078 6B1E     		subs	r3, r5, #1
 2492 007a 9C42     		cmp	r4, r3
 2493 007c D8DA     		bge	.L164
 602:hardware/LCD/ili9341.c **** 			{
ARM GAS  /tmp/ccvxPE0v.s 			page 58


 2494              		.loc 1 602 0 is_stmt 1
 2495 007e 002A     		cmp	r2, #0
 2496 0080 CAD0     		beq	.L170
 606:hardware/LCD/ili9341.c **** 		 	 
 2497              		.loc 1 606 0
 2498 0082 0127     		movs	r7, #1
 2499              	.LVL322:
 2500 0084 D4E7     		b	.L164
 2501              	.LVL323:
 2502              	.L169:
 610:hardware/LCD/ili9341.c **** 	}
 611:hardware/LCD/ili9341.c **** } 
 2503              		.loc 1 611 0
 2504 0086 02B0     		add	sp, sp, #8
 2505              	.LCFI38:
 2506              		.cfi_def_cfa_offset 32
 2507              		@ sp needed
 2508 0088 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2509              	.LVL324:
 2510              	.L172:
 2511              		.align	2
 2512              	.L171:
 2513 008c CDCCCCCC 		.word	-858993459
 2514              		.cfi_endproc
 2515              	.LFE148:
 2517              		.section	.text.LCD_ShowxNum,"ax",%progbits
 2518              		.align	1
 2519              		.global	LCD_ShowxNum
 2520              		.syntax unified
 2521              		.thumb
 2522              		.thumb_func
 2523              		.fpu fpv4-sp-d16
 2525              	LCD_ShowxNum:
 2526              	.LFB149:
 612:hardware/LCD/ili9341.c **** //显示数字,高位为0,还是显示
 613:hardware/LCD/ili9341.c **** //x,y:起点坐标
 614:hardware/LCD/ili9341.c **** //num:数值(0~999999999);	 
 615:hardware/LCD/ili9341.c **** //len:长度(即要显示的位数)
 616:hardware/LCD/ili9341.c **** //size:字体大小
 617:hardware/LCD/ili9341.c **** //mode:
 618:hardware/LCD/ili9341.c **** //[7]:0,不填充;1,填充0.
 619:hardware/LCD/ili9341.c **** //[6:1]:保留
 620:hardware/LCD/ili9341.c **** //[0]:0,非叠加显示;1,叠加显示.
 621:hardware/LCD/ili9341.c **** void LCD_ShowxNum(u16 x,u16 y,u32 num,u8 len,u8 size,u8 mode)
 622:hardware/LCD/ili9341.c **** {  
 2527              		.loc 1 622 0
 2528              		.cfi_startproc
 2529              		@ args = 8, pretend = 0, frame = 0
 2530              		@ frame_needed = 0, uses_anonymous_args = 0
 2531              	.LVL325:
 2532 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2533              	.LCFI39:
 2534              		.cfi_def_cfa_offset 36
 2535              		.cfi_offset 4, -36
 2536              		.cfi_offset 5, -32
 2537              		.cfi_offset 6, -28
 2538              		.cfi_offset 7, -24
ARM GAS  /tmp/ccvxPE0v.s 			page 59


 2539              		.cfi_offset 8, -20
 2540              		.cfi_offset 9, -16
 2541              		.cfi_offset 10, -12
 2542              		.cfi_offset 11, -8
 2543              		.cfi_offset 14, -4
 2544 0004 83B0     		sub	sp, sp, #12
 2545              	.LCFI40:
 2546              		.cfi_def_cfa_offset 48
 2547 0006 8346     		mov	fp, r0
 2548 0008 8A46     		mov	r10, r1
 2549 000a 9146     		mov	r9, r2
 2550 000c 1D46     		mov	r5, r3
 2551 000e 9DF83060 		ldrb	r6, [sp, #48]	@ zero_extendqisi2
 2552 0012 9DF83480 		ldrb	r8, [sp, #52]	@ zero_extendqisi2
 2553              	.LVL326:
 623:hardware/LCD/ili9341.c **** 	u8 t,temp;
 624:hardware/LCD/ili9341.c **** 	u8 enshow=0;						   
 2554              		.loc 1 624 0
 2555 0016 0027     		movs	r7, #0
 625:hardware/LCD/ili9341.c **** 	for(t=0;t<len;t++)
 2556              		.loc 1 625 0
 2557 0018 3C46     		mov	r4, r7
 2558 001a 1CE0     		b	.L174
 2559              	.LVL327:
 2560              	.L183:
 626:hardware/LCD/ili9341.c **** 	{
 627:hardware/LCD/ili9341.c **** 		temp=(num/LCD_Pow(10,len-t-1))%10;
 628:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 629:hardware/LCD/ili9341.c **** 		{
 630:hardware/LCD/ili9341.c **** 			if(temp==0)
 631:hardware/LCD/ili9341.c **** 			{
 632:hardware/LCD/ili9341.c **** 				if(mode&0X80)LCD_ShowChar(x+(size/2)*t,y,'0',size,mode&0X01);  
 2561              		.loc 1 632 0 discriminator 1
 2562 001c 7008     		lsrs	r0, r6, #1
 2563 001e 00FB04B0 		mla	r0, r0, r4, fp
 2564 0022 08F00103 		and	r3, r8, #1
 2565 0026 0093     		str	r3, [sp]
 2566 0028 3346     		mov	r3, r6
 2567 002a 3022     		movs	r2, #48
 2568              	.LVL328:
 2569 002c 5146     		mov	r1, r10
 2570 002e 80B2     		uxth	r0, r0
 2571 0030 FFF7FEFF 		bl	LCD_ShowChar
 2572              	.LVL329:
 2573 0034 0DE0     		b	.L178
 2574              	.LVL330:
 2575              	.L180:
 633:hardware/LCD/ili9341.c **** 				else LCD_ShowChar(x+(size/2)*t,y,' ',size,mode&0X01);  
 634:hardware/LCD/ili9341.c ****  				continue;
 635:hardware/LCD/ili9341.c **** 			}else enshow=1; 
 2576              		.loc 1 635 0
 2577 0036 0127     		movs	r7, #1
 2578              	.LVL331:
 2579              	.L175:
 636:hardware/LCD/ili9341.c **** 		 	 
 637:hardware/LCD/ili9341.c **** 		}
 638:hardware/LCD/ili9341.c **** 	 	LCD_ShowChar(x+(size/2)*t,y,temp+'0',size,mode&0X01); 
ARM GAS  /tmp/ccvxPE0v.s 			page 60


 2580              		.loc 1 638 0
 2581 0038 7008     		lsrs	r0, r6, #1
 2582 003a 3032     		adds	r2, r2, #48
 2583              	.LVL332:
 2584 003c 00FB04B0 		mla	r0, r0, r4, fp
 2585 0040 08F00103 		and	r3, r8, #1
 2586 0044 0093     		str	r3, [sp]
 2587 0046 3346     		mov	r3, r6
 2588 0048 D2B2     		uxtb	r2, r2
 2589              	.LVL333:
 2590 004a 5146     		mov	r1, r10
 2591 004c 80B2     		uxth	r0, r0
 2592 004e FFF7FEFF 		bl	LCD_ShowChar
 2593              	.LVL334:
 2594              	.L178:
 625:hardware/LCD/ili9341.c **** 	{
 2595              		.loc 1 625 0 discriminator 2
 2596 0052 0134     		adds	r4, r4, #1
 2597              	.LVL335:
 2598 0054 E4B2     		uxtb	r4, r4
 2599              	.LVL336:
 2600              	.L174:
 625:hardware/LCD/ili9341.c **** 	{
 2601              		.loc 1 625 0 is_stmt 0 discriminator 1
 2602 0056 AC42     		cmp	r4, r5
 2603 0058 28D2     		bcs	.L182
 627:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 2604              		.loc 1 627 0 is_stmt 1
 2605 005a 291B     		subs	r1, r5, r4
 2606 005c C9B2     		uxtb	r1, r1
 2607 005e 0139     		subs	r1, r1, #1
 2608 0060 C9B2     		uxtb	r1, r1
 2609 0062 0A20     		movs	r0, #10
 2610 0064 FFF7FEFF 		bl	LCD_Pow
 2611              	.LVL337:
 2612 0068 B9FBF0F0 		udiv	r0, r9, r0
 2613 006c 114A     		ldr	r2, .L184
 2614 006e A2FB0032 		umull	r3, r2, r2, r0
 2615 0072 D208     		lsrs	r2, r2, #3
 2616 0074 02EB8202 		add	r2, r2, r2, lsl #2
 2617 0078 5300     		lsls	r3, r2, #1
 2618 007a C21A     		subs	r2, r0, r3
 2619 007c D2B2     		uxtb	r2, r2
 2620              	.LVL338:
 628:hardware/LCD/ili9341.c **** 		{
 2621              		.loc 1 628 0
 2622 007e 002F     		cmp	r7, #0
 2623 0080 DAD1     		bne	.L175
 628:hardware/LCD/ili9341.c **** 		{
 2624              		.loc 1 628 0 is_stmt 0 discriminator 1
 2625 0082 6B1E     		subs	r3, r5, #1
 2626 0084 9C42     		cmp	r4, r3
 2627 0086 D7DA     		bge	.L175
 630:hardware/LCD/ili9341.c **** 			{
 2628              		.loc 1 630 0 is_stmt 1
 2629 0088 002A     		cmp	r2, #0
 2630 008a D4D1     		bne	.L180
ARM GAS  /tmp/ccvxPE0v.s 			page 61


 632:hardware/LCD/ili9341.c **** 				else LCD_ShowChar(x+(size/2)*t,y,' ',size,mode&0X01);  
 2631              		.loc 1 632 0
 2632 008c 18F0800F 		tst	r8, #128
 2633 0090 C4D1     		bne	.L183
 633:hardware/LCD/ili9341.c ****  				continue;
 2634              		.loc 1 633 0
 2635 0092 7008     		lsrs	r0, r6, #1
 2636 0094 00FB04B0 		mla	r0, r0, r4, fp
 2637 0098 08F00103 		and	r3, r8, #1
 2638 009c 0093     		str	r3, [sp]
 2639 009e 3346     		mov	r3, r6
 2640 00a0 2022     		movs	r2, #32
 2641              	.LVL339:
 2642 00a2 5146     		mov	r1, r10
 2643 00a4 80B2     		uxth	r0, r0
 2644 00a6 FFF7FEFF 		bl	LCD_ShowChar
 2645              	.LVL340:
 634:hardware/LCD/ili9341.c **** 			}else enshow=1; 
 2646              		.loc 1 634 0
 2647 00aa D2E7     		b	.L178
 2648              	.L182:
 639:hardware/LCD/ili9341.c **** 	}
 640:hardware/LCD/ili9341.c **** } 
 2649              		.loc 1 640 0
 2650 00ac 03B0     		add	sp, sp, #12
 2651              	.LCFI41:
 2652              		.cfi_def_cfa_offset 36
 2653              		@ sp needed
 2654 00ae BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2655              	.LVL341:
 2656              	.L185:
 2657 00b2 00BF     		.align	2
 2658              	.L184:
 2659 00b4 CDCCCCCC 		.word	-858993459
 2660              		.cfi_endproc
 2661              	.LFE149:
 2663              		.section	.text.LCD_ShowString,"ax",%progbits
 2664              		.align	1
 2665              		.global	LCD_ShowString
 2666              		.syntax unified
 2667              		.thumb
 2668              		.thumb_func
 2669              		.fpu fpv4-sp-d16
 2671              	LCD_ShowString:
 2672              	.LFB150:
 641:hardware/LCD/ili9341.c **** //显示字符串
 642:hardware/LCD/ili9341.c **** //x,y:起点坐标
 643:hardware/LCD/ili9341.c **** //width,height:区域大小  
 644:hardware/LCD/ili9341.c **** //size:字体大小
 645:hardware/LCD/ili9341.c **** //*p:字符串起始地址		  
 646:hardware/LCD/ili9341.c **** void LCD_ShowString(u16 x,u16 y,u16 width,u16 height,u8 size,u8 *p)
 647:hardware/LCD/ili9341.c **** {         
 2673              		.loc 1 647 0
 2674              		.cfi_startproc
 2675              		@ args = 8, pretend = 0, frame = 0
 2676              		@ frame_needed = 0, uses_anonymous_args = 0
 2677              	.LVL342:
ARM GAS  /tmp/ccvxPE0v.s 			page 62


 2678 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2679              	.LCFI42:
 2680              		.cfi_def_cfa_offset 32
 2681              		.cfi_offset 4, -32
 2682              		.cfi_offset 5, -28
 2683              		.cfi_offset 6, -24
 2684              		.cfi_offset 7, -20
 2685              		.cfi_offset 8, -16
 2686              		.cfi_offset 9, -12
 2687              		.cfi_offset 10, -8
 2688              		.cfi_offset 14, -4
 2689 0004 82B0     		sub	sp, sp, #8
 2690              	.LCFI43:
 2691              		.cfi_def_cfa_offset 40
 2692 0006 8246     		mov	r10, r0
 2693 0008 0D46     		mov	r5, r1
 2694 000a 9DF82870 		ldrb	r7, [sp, #40]	@ zero_extendqisi2
 2695 000e 0B9E     		ldr	r6, [sp, #44]
 2696              	.LVL343:
 648:hardware/LCD/ili9341.c **** 	u8 x0=x;
 649:hardware/LCD/ili9341.c **** 	width+=x;
 2697              		.loc 1 649 0
 2698 0010 0244     		add	r2, r2, r0
 2699              	.LVL344:
 2700 0012 1FFA82F9 		uxth	r9, r2
 2701              	.LVL345:
 650:hardware/LCD/ili9341.c **** 	height+=y;
 2702              		.loc 1 650 0
 2703 0016 0B44     		add	r3, r3, r1
 2704              	.LVL346:
 2705 0018 1FFA83F8 		uxth	r8, r3
 2706              	.LVL347:
 651:hardware/LCD/ili9341.c ****     while((*p<='~')&&(*p>=' '))//判断是不是非法字符!
 2707              		.loc 1 651 0
 2708 001c 0446     		mov	r4, r0
 2709 001e 0CE0     		b	.L187
 2710              	.LVL348:
 2711              	.L188:
 652:hardware/LCD/ili9341.c ****     {       
 653:hardware/LCD/ili9341.c ****         if(x>=width){x=x0;y+=size;}
 654:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2712              		.loc 1 654 0
 2713 0020 4545     		cmp	r5, r8
 2714 0022 17D2     		bcs	.L186
 655:hardware/LCD/ili9341.c ****         LCD_ShowChar(x,y,*p,size,0);
 2715              		.loc 1 655 0
 2716 0024 0023     		movs	r3, #0
 2717 0026 0093     		str	r3, [sp]
 2718 0028 3B46     		mov	r3, r7
 2719 002a 2946     		mov	r1, r5
 2720 002c 2046     		mov	r0, r4
 2721 002e FFF7FEFF 		bl	LCD_ShowChar
 2722              	.LVL349:
 656:hardware/LCD/ili9341.c ****         x+=size/2;
 2723              		.loc 1 656 0
 2724 0032 04EB5704 		add	r4, r4, r7, lsr #1
 2725              	.LVL350:
ARM GAS  /tmp/ccvxPE0v.s 			page 63


 2726 0036 A4B2     		uxth	r4, r4
 2727              	.LVL351:
 657:hardware/LCD/ili9341.c ****         p++;
 2728              		.loc 1 657 0
 2729 0038 0136     		adds	r6, r6, #1
 2730              	.LVL352:
 2731              	.L187:
 651:hardware/LCD/ili9341.c ****     {       
 2732              		.loc 1 651 0
 2733 003a 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 2734 003c A2F12003 		sub	r3, r2, #32
 2735 0040 DBB2     		uxtb	r3, r3
 2736 0042 5E2B     		cmp	r3, #94
 2737 0044 06D8     		bhi	.L186
 653:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2738              		.loc 1 653 0
 2739 0046 4C45     		cmp	r4, r9
 2740 0048 EAD3     		bcc	.L188
 2741 004a 5FFA8AF4 		uxtb	r4, r10
 2742              	.LVL353:
 653:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2743              		.loc 1 653 0 is_stmt 0 discriminator 1
 2744 004e 3D44     		add	r5, r5, r7
 2745              	.LVL354:
 2746 0050 ADB2     		uxth	r5, r5
 2747              	.LVL355:
 2748 0052 E5E7     		b	.L188
 2749              	.L186:
 658:hardware/LCD/ili9341.c ****     }  
 659:hardware/LCD/ili9341.c **** }
 2750              		.loc 1 659 0 is_stmt 1
 2751 0054 02B0     		add	sp, sp, #8
 2752              	.LCFI44:
 2753              		.cfi_def_cfa_offset 32
 2754              		@ sp needed
 2755 0056 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2756              		.cfi_endproc
 2757              	.LFE150:
 2759              		.comm	lcddev,14,4
 2760              		.global	BACK_COLOR
 2761              		.global	POINT_COLOR
 2762              		.comm	SRAM_Handler,80,4
 2763              		.section	.data.BACK_COLOR,"aw",%progbits
 2764              		.align	2
 2765              		.set	.LANCHOR1,. + 0
 2768              	BACK_COLOR:
 2769 0000 FF070000 		.word	2047
 2770              		.section	.data.POINT_COLOR,"aw",%progbits
 2771              		.align	2
 2772              		.set	.LANCHOR0,. + 0
 2775              	POINT_COLOR:
 2776 0000 000000FF 		.word	-16777216
 2777              		.section	.rodata.LCD_Init.str1.4,"aMS",%progbits,1
 2778              		.align	2
 2779              	.LC0:
 2780 0000 204C4344 		.ascii	" LCD ID:%x\015\012\000"
 2780      2049443A 
ARM GAS  /tmp/ccvxPE0v.s 			page 64


 2780      25780D0A 
 2780      00
 2781              		.text
 2782              	.Letext0:
 2783              		.file 2 "hardware/LCD/font.h"
 2784              		.file 3 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/machine/_default_types.h"
 2785              		.file 4 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_stdint.h"
 2786              		.file 5 "CORE/core_cm4.h"
 2787              		.file 6 "USER/system_stm32f4xx.h"
 2788              		.file 7 "USER/stm32f429xx.h"
 2789              		.file 8 "HALLIB/Inc/stm32f4xx_hal_def.h"
 2790              		.file 9 "HALLIB/Inc/stm32f4xx_hal_gpio.h"
 2791              		.file 10 "HALLIB/Inc/stm32f4xx_hal_dma.h"
 2792              		.file 11 "HALLIB/Inc/stm32f4xx_ll_fmc.h"
 2793              		.file 12 "HALLIB/Inc/stm32f4xx_hal_sram.h"
 2794              		.file 13 "HALLIB/Inc/stm32f4xx_hal.h"
 2795              		.file 14 "SYSTEM/sys/sys.h"
 2796              		.file 15 "hardware/LCD/lcd.h"
 2797              		.file 16 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/lock.h"
 2798              		.file 17 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_types.h"
 2799              		.file 18 "/opt/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 2800              		.file 19 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/reent.h"
 2801              		.file 20 "SYSTEM/delay/delay.h"
 2802              		.file 21 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/stdio.h"
ARM GAS  /tmp/ccvxPE0v.s 			page 65


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ili9341.c
     /tmp/ccvxPE0v.s:18     .text.LCD_WR_REG:0000000000000000 $t
     /tmp/ccvxPE0v.s:25     .text.LCD_WR_REG:0000000000000000 LCD_WR_REG
     /tmp/ccvxPE0v.s:56     .text.LCD_WR_REG:0000000000000020 $d
     /tmp/ccvxPE0v.s:61     .text.LCD_WR_DATA:0000000000000000 $t
     /tmp/ccvxPE0v.s:68     .text.LCD_WR_DATA:0000000000000000 LCD_WR_DATA
     /tmp/ccvxPE0v.s:98     .text.LCD_WR_DATA:0000000000000020 $d
     /tmp/ccvxPE0v.s:103    .text.LCD_RD_DATA:0000000000000000 $t
     /tmp/ccvxPE0v.s:110    .text.LCD_RD_DATA:0000000000000000 LCD_RD_DATA
     /tmp/ccvxPE0v.s:137    .text.LCD_RD_DATA:0000000000000018 $d
     /tmp/ccvxPE0v.s:142    .text.LCD_WriteReg:0000000000000000 $t
     /tmp/ccvxPE0v.s:149    .text.LCD_WriteReg:0000000000000000 LCD_WriteReg
     /tmp/ccvxPE0v.s:166    .text.LCD_WriteReg:0000000000000008 $d
     /tmp/ccvxPE0v.s:171    .text.LCD_ReadReg:0000000000000000 $t
     /tmp/ccvxPE0v.s:178    .text.LCD_ReadReg:0000000000000000 LCD_ReadReg
     /tmp/ccvxPE0v.s:206    .text.LCD_WriteRAM_Prepare:0000000000000000 $t
     /tmp/ccvxPE0v.s:213    .text.LCD_WriteRAM_Prepare:0000000000000000 LCD_WriteRAM_Prepare
     /tmp/ccvxPE0v.s:229    .text.LCD_WriteRAM_Prepare:000000000000000c $d
                            *COM*:000000000000000e lcddev
     /tmp/ccvxPE0v.s:235    .text.LCD_WriteRAM:0000000000000000 $t
     /tmp/ccvxPE0v.s:242    .text.LCD_WriteRAM:0000000000000000 LCD_WriteRAM
     /tmp/ccvxPE0v.s:257    .text.LCD_WriteRAM:0000000000000008 $d
     /tmp/ccvxPE0v.s:262    .text.LCD_BGR2RGB:0000000000000000 $t
     /tmp/ccvxPE0v.s:269    .text.LCD_BGR2RGB:0000000000000000 LCD_BGR2RGB
     /tmp/ccvxPE0v.s:290    .text.opt_delay:0000000000000000 $t
     /tmp/ccvxPE0v.s:297    .text.opt_delay:0000000000000000 opt_delay
     /tmp/ccvxPE0v.s:324    .text.LCD_DisplayOn:0000000000000000 $t
     /tmp/ccvxPE0v.s:331    .text.LCD_DisplayOn:0000000000000000 LCD_DisplayOn
     /tmp/ccvxPE0v.s:351    .text.LCD_DisplayOff:0000000000000000 $t
     /tmp/ccvxPE0v.s:358    .text.LCD_DisplayOff:0000000000000000 LCD_DisplayOff
     /tmp/ccvxPE0v.s:378    .text.LCD_SetCursor:0000000000000000 $t
     /tmp/ccvxPE0v.s:385    .text.LCD_SetCursor:0000000000000000 LCD_SetCursor
     /tmp/ccvxPE0v.s:431    .text.LCD_SetCursor:0000000000000030 $d
     /tmp/ccvxPE0v.s:436    .text.LCD_ReadPoint:0000000000000000 $t
     /tmp/ccvxPE0v.s:443    .text.LCD_ReadPoint:0000000000000000 LCD_ReadPoint
     /tmp/ccvxPE0v.s:513    .text.LCD_ReadPoint:0000000000000048 $d
     /tmp/ccvxPE0v.s:518    .text.LCD_Scan_Dir:0000000000000000 $t
     /tmp/ccvxPE0v.s:525    .text.LCD_Scan_Dir:0000000000000000 LCD_Scan_Dir
     /tmp/ccvxPE0v.s:545    .text.LCD_Scan_Dir:000000000000000c $d
     /tmp/ccvxPE0v.s:609    .text.LCD_DrawPoint:0000000000000000 $t
     /tmp/ccvxPE0v.s:616    .text.LCD_DrawPoint:0000000000000000 LCD_DrawPoint
     /tmp/ccvxPE0v.s:643    .text.LCD_DrawPoint:0000000000000014 $d
     /tmp/ccvxPE0v.s:649    .text.LCD_Fast_DrawPoint:0000000000000000 $t
     /tmp/ccvxPE0v.s:656    .text.LCD_Fast_DrawPoint:0000000000000000 LCD_Fast_DrawPoint
     /tmp/ccvxPE0v.s:713    .text.LCD_Fast_DrawPoint:000000000000003c $d
     /tmp/ccvxPE0v.s:719    .text.LCD_Display_Dir:0000000000000000 $t
     /tmp/ccvxPE0v.s:726    .text.LCD_Display_Dir:0000000000000000 LCD_Display_Dir
     /tmp/ccvxPE0v.s:791    .text.LCD_Display_Dir:0000000000000048 $d
     /tmp/ccvxPE0v.s:796    .text.LCD_Set_Window:0000000000000000 $t
     /tmp/ccvxPE0v.s:803    .text.LCD_Set_Window:0000000000000000 LCD_Set_Window
     /tmp/ccvxPE0v.s:880    .text.LCD_Set_Window:0000000000000060 $d
     /tmp/ccvxPE0v.s:885    .text.HAL_SRAM_MspInit:0000000000000000 $t
     /tmp/ccvxPE0v.s:892    .text.HAL_SRAM_MspInit:0000000000000000 HAL_SRAM_MspInit
     /tmp/ccvxPE0v.s:979    .text.HAL_SRAM_MspInit:0000000000000078 $d
     /tmp/ccvxPE0v.s:986    .text.LCD_Clear:0000000000000000 $t
     /tmp/ccvxPE0v.s:993    .text.LCD_Clear:0000000000000000 LCD_Clear
ARM GAS  /tmp/ccvxPE0v.s 			page 66


     /tmp/ccvxPE0v.s:1048   .text.LCD_Clear:000000000000002c $d
     /tmp/ccvxPE0v.s:1054   .text.LCD_Init:0000000000000000 $t
     /tmp/ccvxPE0v.s:1061   .text.LCD_Init:0000000000000000 LCD_Init
     /tmp/ccvxPE0v.s:1591   .text.LCD_Init:000000000000030c $d
                            *COM*:0000000000000050 SRAM_Handler
     /tmp/ccvxPE0v.s:1601   .text.LCD_Fill:0000000000000000 $t
     /tmp/ccvxPE0v.s:1608   .text.LCD_Fill:0000000000000000 LCD_Fill
     /tmp/ccvxPE0v.s:1679   .text.LCD_Fill:0000000000000040 $d
     /tmp/ccvxPE0v.s:1684   .text.LCD_Color_Fill:0000000000000000 $t
     /tmp/ccvxPE0v.s:1691   .text.LCD_Color_Fill:0000000000000000 LCD_Color_Fill
     /tmp/ccvxPE0v.s:1771   .text.LCD_Color_Fill:0000000000000054 $d
     /tmp/ccvxPE0v.s:1776   .text.LCD_DrawLine:0000000000000000 $t
     /tmp/ccvxPE0v.s:1783   .text.LCD_DrawLine:0000000000000000 LCD_DrawLine
     /tmp/ccvxPE0v.s:1941   .text.LCD_DrawRectangle:0000000000000000 $t
     /tmp/ccvxPE0v.s:1948   .text.LCD_DrawRectangle:0000000000000000 LCD_DrawRectangle
     /tmp/ccvxPE0v.s:1999   .text.LCD_Draw_Circle:0000000000000000 $t
     /tmp/ccvxPE0v.s:2006   .text.LCD_Draw_Circle:0000000000000000 LCD_Draw_Circle
     /tmp/ccvxPE0v.s:2141   .text.LCD_ShowChar:0000000000000000 $t
     /tmp/ccvxPE0v.s:2148   .text.LCD_ShowChar:0000000000000000 LCD_ShowChar
     /tmp/ccvxPE0v.s:2337   .text.LCD_ShowChar:00000000000000ec $d
     /tmp/ccvxPE0v.s:2348   .text.LCD_Pow:0000000000000000 $t
     /tmp/ccvxPE0v.s:2355   .text.LCD_Pow:0000000000000000 LCD_Pow
     /tmp/ccvxPE0v.s:2389   .text.LCD_ShowNum:0000000000000000 $t
     /tmp/ccvxPE0v.s:2396   .text.LCD_ShowNum:0000000000000000 LCD_ShowNum
     /tmp/ccvxPE0v.s:2513   .text.LCD_ShowNum:000000000000008c $d
     /tmp/ccvxPE0v.s:2518   .text.LCD_ShowxNum:0000000000000000 $t
     /tmp/ccvxPE0v.s:2525   .text.LCD_ShowxNum:0000000000000000 LCD_ShowxNum
     /tmp/ccvxPE0v.s:2659   .text.LCD_ShowxNum:00000000000000b4 $d
     /tmp/ccvxPE0v.s:2664   .text.LCD_ShowString:0000000000000000 $t
     /tmp/ccvxPE0v.s:2671   .text.LCD_ShowString:0000000000000000 LCD_ShowString
     /tmp/ccvxPE0v.s:2768   .data.BACK_COLOR:0000000000000000 BACK_COLOR
     /tmp/ccvxPE0v.s:2775   .data.POINT_COLOR:0000000000000000 POINT_COLOR
     /tmp/ccvxPE0v.s:2764   .data.BACK_COLOR:0000000000000000 $d
     /tmp/ccvxPE0v.s:2771   .data.POINT_COLOR:0000000000000000 $d
     /tmp/ccvxPE0v.s:2778   .rodata.LCD_Init.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d
     /tmp/ccvxPE0v.s:552    .text.LCD_Scan_Dir:0000000000000013 $d
     /tmp/ccvxPE0v.s:552    .text.LCD_Scan_Dir:0000000000000014 $t

UNDEFINED SYMBOLS
delay_us
HAL_GPIO_Init
HAL_SRAM_Init
delay_ms
printf
asc2_1206
asc2_1608
asc2_2412
asc2_3216
