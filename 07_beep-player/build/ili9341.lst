ARM GAS  /tmp/ccBPN2mg.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ili9341.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.LCD_WR_REG,"ax",%progbits
  18              		.align	1
  19              		.global	LCD_WR_REG
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	LCD_WR_REG:
  26              	.LFB135:
  27              		.file 1 "hardware/LCD/ili9341.c"
   1:hardware/LCD/ili9341.c **** #include "finsh_api.h"
   2:hardware/LCD/ili9341.c **** #include "lcd.h"
   3:hardware/LCD/ili9341.c **** #include "delay.h"
   4:hardware/LCD/ili9341.c **** #include "rtdef.h"
   5:hardware/LCD/ili9341.c **** #include "rtthread.h"
   6:hardware/LCD/ili9341.c **** #include <stdio.h>
   7:hardware/LCD/ili9341.c **** 
   8:hardware/LCD/ili9341.c **** SRAM_HandleTypeDef SRAM_Handler;    //SRAM句柄(用于控制LCD)
   9:hardware/LCD/ili9341.c **** 
  10:hardware/LCD/ili9341.c **** //LCD的画笔颜色和背景色	   
  11:hardware/LCD/ili9341.c **** u32 POINT_COLOR=0xFF000000;		//画笔颜色
  12:hardware/LCD/ili9341.c **** //u32 BACK_COLOR =0xFFFFFFFF;  	//背景色 
  13:hardware/LCD/ili9341.c **** u32 BACK_COLOR =GBLUE;  	//背景色 
  14:hardware/LCD/ili9341.c **** 
  15:hardware/LCD/ili9341.c **** //管理LCD重要参数
  16:hardware/LCD/ili9341.c **** //默认为竖屏
  17:hardware/LCD/ili9341.c **** _lcd_dev lcddev;
  18:hardware/LCD/ili9341.c **** 	   
  19:hardware/LCD/ili9341.c **** //写寄存器函数
  20:hardware/LCD/ili9341.c **** //regval:寄存器值
  21:hardware/LCD/ili9341.c **** void LCD_WR_REG(vu16 regval)
  22:hardware/LCD/ili9341.c **** {   
  28              		.loc 1 22 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 82B0     		sub	sp, sp, #8
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccBPN2mg.s 			page 2


  37 0002 ADF80600 		strh	r0, [sp, #6]	@ movhi
  23:hardware/LCD/ili9341.c **** 	regval=regval;		//使用-O2优化的时候,必须插入的延时
  38              		.loc 1 23 0
  39 0006 BDF80630 		ldrh	r3, [sp, #6]
  40 000a 9BB2     		uxth	r3, r3
  41 000c ADF80630 		strh	r3, [sp, #6]	@ movhi
  24:hardware/LCD/ili9341.c **** 	LCD->LCD_REG=regval;//写入要写的寄存器序号	 
  42              		.loc 1 24 0
  43 0010 BDF80630 		ldrh	r3, [sp, #6]
  44 0014 9BB2     		uxth	r3, r3
  45 0016 024A     		ldr	r2, .L3
  46 0018 1380     		strh	r3, [r2]	@ movhi
  25:hardware/LCD/ili9341.c **** }
  47              		.loc 1 25 0
  48 001a 02B0     		add	sp, sp, #8
  49              	.LCFI1:
  50              		.cfi_def_cfa_offset 0
  51              		@ sp needed
  52 001c 7047     		bx	lr
  53              	.L4:
  54 001e 00BF     		.align	2
  55              	.L3:
  56 0020 FEFF0760 		.word	1611137022
  57              		.cfi_endproc
  58              	.LFE135:
  60              		.section	.text.LCD_WR_DATA,"ax",%progbits
  61              		.align	1
  62              		.global	LCD_WR_DATA
  63              		.syntax unified
  64              		.thumb
  65              		.thumb_func
  66              		.fpu fpv4-sp-d16
  68              	LCD_WR_DATA:
  69              	.LFB136:
  26:hardware/LCD/ili9341.c **** //写LCD数据
  27:hardware/LCD/ili9341.c **** //data:要写入的值
  28:hardware/LCD/ili9341.c **** void LCD_WR_DATA(vu16 data)
  29:hardware/LCD/ili9341.c **** {	  
  70              		.loc 1 29 0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 8
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74              		@ link register save eliminated.
  75              	.LVL1:
  76 0000 82B0     		sub	sp, sp, #8
  77              	.LCFI2:
  78              		.cfi_def_cfa_offset 8
  79 0002 ADF80600 		strh	r0, [sp, #6]	@ movhi
  30:hardware/LCD/ili9341.c **** 	data=data;			//使用-O2优化的时候,必须插入的延时
  80              		.loc 1 30 0
  81 0006 BDF80630 		ldrh	r3, [sp, #6]
  82 000a 9BB2     		uxth	r3, r3
  83 000c ADF80630 		strh	r3, [sp, #6]	@ movhi
  31:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=data;		 
  84              		.loc 1 31 0
  85 0010 BDF80630 		ldrh	r3, [sp, #6]
  86 0014 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccBPN2mg.s 			page 3


  87 0016 024A     		ldr	r2, .L7
  88 0018 5380     		strh	r3, [r2, #2]	@ movhi
  32:hardware/LCD/ili9341.c **** }
  89              		.loc 1 32 0
  90 001a 02B0     		add	sp, sp, #8
  91              	.LCFI3:
  92              		.cfi_def_cfa_offset 0
  93              		@ sp needed
  94 001c 7047     		bx	lr
  95              	.L8:
  96 001e 00BF     		.align	2
  97              	.L7:
  98 0020 FEFF0760 		.word	1611137022
  99              		.cfi_endproc
 100              	.LFE136:
 102              		.section	.text.LCD_RD_DATA,"ax",%progbits
 103              		.align	1
 104              		.global	LCD_RD_DATA
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 108              		.fpu fpv4-sp-d16
 110              	LCD_RD_DATA:
 111              	.LFB137:
  33:hardware/LCD/ili9341.c **** //读LCD数据
  34:hardware/LCD/ili9341.c **** //返回值:读到的值
  35:hardware/LCD/ili9341.c **** u16 LCD_RD_DATA(void)
  36:hardware/LCD/ili9341.c **** {
 112              		.loc 1 36 0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 8
 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              		@ link register save eliminated.
 117 0000 82B0     		sub	sp, sp, #8
 118              	.LCFI4:
 119              		.cfi_def_cfa_offset 8
  37:hardware/LCD/ili9341.c **** 	vu16 ram;			//防止被优化
  38:hardware/LCD/ili9341.c **** 	ram=LCD->LCD_RAM;	
 120              		.loc 1 38 0
 121 0002 054B     		ldr	r3, .L11
 122 0004 5B88     		ldrh	r3, [r3, #2]
 123 0006 9BB2     		uxth	r3, r3
 124 0008 ADF80630 		strh	r3, [sp, #6]	@ movhi
  39:hardware/LCD/ili9341.c **** 	return ram;	 
 125              		.loc 1 39 0
 126 000c BDF80600 		ldrh	r0, [sp, #6]
  40:hardware/LCD/ili9341.c **** }					   
 127              		.loc 1 40 0
 128 0010 80B2     		uxth	r0, r0
 129 0012 02B0     		add	sp, sp, #8
 130              	.LCFI5:
 131              		.cfi_def_cfa_offset 0
 132              		@ sp needed
 133 0014 7047     		bx	lr
 134              	.L12:
 135 0016 00BF     		.align	2
 136              	.L11:
ARM GAS  /tmp/ccBPN2mg.s 			page 4


 137 0018 FEFF0760 		.word	1611137022
 138              		.cfi_endproc
 139              	.LFE137:
 141              		.section	.text.LCD_WriteReg,"ax",%progbits
 142              		.align	1
 143              		.global	LCD_WriteReg
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	LCD_WriteReg:
 150              	.LFB138:
  41:hardware/LCD/ili9341.c **** //写寄存器
  42:hardware/LCD/ili9341.c **** //LCD_Reg:寄存器地址
  43:hardware/LCD/ili9341.c **** //LCD_RegValue:要写入的数据
  44:hardware/LCD/ili9341.c **** void LCD_WriteReg(u16 LCD_Reg,u16 LCD_RegValue)
  45:hardware/LCD/ili9341.c **** {	
 151              		.loc 1 45 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		@ link register save eliminated.
 156              	.LVL2:
  46:hardware/LCD/ili9341.c **** 	LCD->LCD_REG = LCD_Reg;		//写入要写的寄存器序号	 
 157              		.loc 1 46 0
 158 0000 014B     		ldr	r3, .L14
 159 0002 1880     		strh	r0, [r3]	@ movhi
  47:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM = LCD_RegValue;//写入数据	    		 
 160              		.loc 1 47 0
 161 0004 5980     		strh	r1, [r3, #2]	@ movhi
 162 0006 7047     		bx	lr
 163              	.L15:
 164              		.align	2
 165              	.L14:
 166 0008 FEFF0760 		.word	1611137022
 167              		.cfi_endproc
 168              	.LFE138:
 170              		.section	.text.LCD_ReadReg,"ax",%progbits
 171              		.align	1
 172              		.global	LCD_ReadReg
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 176              		.fpu fpv4-sp-d16
 178              	LCD_ReadReg:
 179              	.LFB139:
  48:hardware/LCD/ili9341.c **** }	   
  49:hardware/LCD/ili9341.c **** //读寄存器
  50:hardware/LCD/ili9341.c **** //LCD_Reg:寄存器地址
  51:hardware/LCD/ili9341.c **** //返回值:读到的数据
  52:hardware/LCD/ili9341.c **** u16 LCD_ReadReg(u16 LCD_Reg)
  53:hardware/LCD/ili9341.c **** {										   
 180              		.loc 1 53 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              	.LVL3:
ARM GAS  /tmp/ccBPN2mg.s 			page 5


 185 0000 08B5     		push	{r3, lr}
 186              	.LCFI6:
 187              		.cfi_def_cfa_offset 8
 188              		.cfi_offset 3, -8
 189              		.cfi_offset 14, -4
  54:hardware/LCD/ili9341.c **** 	LCD_WR_REG(LCD_Reg);		//写入要读的寄存器序号
 190              		.loc 1 54 0
 191 0002 FFF7FEFF 		bl	LCD_WR_REG
 192              	.LVL4:
  55:hardware/LCD/ili9341.c **** 	delay_us(5);		  
 193              		.loc 1 55 0
 194 0006 0520     		movs	r0, #5
 195 0008 FFF7FEFF 		bl	delay_us
 196              	.LVL5:
  56:hardware/LCD/ili9341.c **** 	return LCD_RD_DATA();		//返回读到的值
 197              		.loc 1 56 0
 198 000c FFF7FEFF 		bl	LCD_RD_DATA
 199              	.LVL6:
  57:hardware/LCD/ili9341.c **** }   
 200              		.loc 1 57 0
 201 0010 08BD     		pop	{r3, pc}
 202              		.cfi_endproc
 203              	.LFE139:
 205              		.section	.text.LCD_WriteRAM_Prepare,"ax",%progbits
 206              		.align	1
 207              		.global	LCD_WriteRAM_Prepare
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu fpv4-sp-d16
 213              	LCD_WriteRAM_Prepare:
 214              	.LFB140:
  58:hardware/LCD/ili9341.c **** //开始写GRAM
  59:hardware/LCD/ili9341.c **** void LCD_WriteRAM_Prepare(void)
  60:hardware/LCD/ili9341.c **** {
 215              		.loc 1 60 0
 216              		.cfi_startproc
 217              		@ args = 0, pretend = 0, frame = 0
 218              		@ frame_needed = 0, uses_anonymous_args = 0
 219              		@ link register save eliminated.
  61:hardware/LCD/ili9341.c ****  	LCD->LCD_REG=lcddev.wramcmd;	  
 220              		.loc 1 61 0
 221 0000 024B     		ldr	r3, .L19
 222 0002 1A89     		ldrh	r2, [r3, #8]
 223 0004 024B     		ldr	r3, .L19+4
 224 0006 1A80     		strh	r2, [r3]	@ movhi
 225 0008 7047     		bx	lr
 226              	.L20:
 227 000a 00BF     		.align	2
 228              	.L19:
 229 000c 00000000 		.word	lcddev
 230 0010 FEFF0760 		.word	1611137022
 231              		.cfi_endproc
 232              	.LFE140:
 234              		.section	.text.LCD_WriteRAM,"ax",%progbits
 235              		.align	1
 236              		.global	LCD_WriteRAM
ARM GAS  /tmp/ccBPN2mg.s 			page 6


 237              		.syntax unified
 238              		.thumb
 239              		.thumb_func
 240              		.fpu fpv4-sp-d16
 242              	LCD_WriteRAM:
 243              	.LFB141:
  62:hardware/LCD/ili9341.c **** }	 
  63:hardware/LCD/ili9341.c **** //LCD写GRAM
  64:hardware/LCD/ili9341.c **** //RGB_Code:颜色值
  65:hardware/LCD/ili9341.c **** void LCD_WriteRAM(u16 RGB_Code)
  66:hardware/LCD/ili9341.c **** {							    
 244              		.loc 1 66 0
 245              		.cfi_startproc
 246              		@ args = 0, pretend = 0, frame = 0
 247              		@ frame_needed = 0, uses_anonymous_args = 0
 248              		@ link register save eliminated.
 249              	.LVL7:
  67:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM = RGB_Code;//写十六位GRAM
 250              		.loc 1 67 0
 251 0000 014B     		ldr	r3, .L22
 252 0002 5880     		strh	r0, [r3, #2]	@ movhi
 253 0004 7047     		bx	lr
 254              	.L23:
 255 0006 00BF     		.align	2
 256              	.L22:
 257 0008 FEFF0760 		.word	1611137022
 258              		.cfi_endproc
 259              	.LFE141:
 261              		.section	.text.LCD_BGR2RGB,"ax",%progbits
 262              		.align	1
 263              		.global	LCD_BGR2RGB
 264              		.syntax unified
 265              		.thumb
 266              		.thumb_func
 267              		.fpu fpv4-sp-d16
 269              	LCD_BGR2RGB:
 270              	.LFB142:
  68:hardware/LCD/ili9341.c **** }
  69:hardware/LCD/ili9341.c **** /*******************************************************************************************
  70:hardware/LCD/ili9341.c **** **从ILI93xx读出的数据为GBR格式，而我们写入的时候为RGB格式。         									
  71:hardware/LCD/ili9341.c **** **通过该函数转换																    																		  **		
  72:hardware/LCD/ili9341.c **** **c:BGR格式的颜色值																  																	    **
  73:hardware/LCD/ili9341.c **** **返回值：RGB格式的颜色值													  																	    **					
  74:hardware/LCD/ili9341.c **** ********************************************************************************************/
  75:hardware/LCD/ili9341.c **** u16 LCD_BGR2RGB(u16 c)
  76:hardware/LCD/ili9341.c **** {
 271              		.loc 1 76 0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275              		@ link register save eliminated.
 276              	.LVL8:
  77:hardware/LCD/ili9341.c **** 	u16 r,g,b,rgb;
  78:hardware/LCD/ili9341.c **** 	b=(c>>0)&0x1f;
  79:hardware/LCD/ili9341.c **** 	g=(c>>5)&0x3f;
  80:hardware/LCD/ili9341.c **** 	r=(c>>11)&0x1f;
  81:hardware/LCD/ili9341.c **** 	rgb=(b<<11)+(g<<5)+(r<<0);
ARM GAS  /tmp/ccBPN2mg.s 			page 7


 277              		.loc 1 81 0
 278 0000 00F4FC63 		and	r3, r0, #2016
 279 0004 03EBC023 		add	r3, r3, r0, lsl #11
 280 0008 9BB2     		uxth	r3, r3
 281 000a 03EBD020 		add	r0, r3, r0, lsr #11
 282              	.LVL9:
  82:hardware/LCD/ili9341.c **** 	return rgb;
  83:hardware/LCD/ili9341.c **** }
 283              		.loc 1 83 0
 284 000e 80B2     		uxth	r0, r0
 285 0010 7047     		bx	lr
 286              		.cfi_endproc
 287              	.LFE142:
 289              		.section	.text.opt_delay,"ax",%progbits
 290              		.align	1
 291              		.global	opt_delay
 292              		.syntax unified
 293              		.thumb
 294              		.thumb_func
 295              		.fpu fpv4-sp-d16
 297              	opt_delay:
 298              	.LFB143:
  84:hardware/LCD/ili9341.c **** //当mdk -O1时间优化时需要设置
  85:hardware/LCD/ili9341.c **** //延时i
  86:hardware/LCD/ili9341.c **** void opt_delay(u8 i)
  87:hardware/LCD/ili9341.c **** {
 299              		.loc 1 87 0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 0
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              		@ link register save eliminated.
 304              	.LVL10:
  88:hardware/LCD/ili9341.c **** 	while(i--);
 305              		.loc 1 88 0
 306 0000 00E0     		b	.L26
 307              	.LVL11:
 308              	.L27:
 309 0002 1846     		mov	r0, r3
 310              	.LVL12:
 311              	.L26:
 312              		.loc 1 88 0 is_stmt 0 discriminator 1
 313 0004 431E     		subs	r3, r0, #1
 314 0006 DBB2     		uxtb	r3, r3
 315              	.LVL13:
 316 0008 0028     		cmp	r0, #0
 317 000a FAD1     		bne	.L27
  89:hardware/LCD/ili9341.c **** }
 318              		.loc 1 89 0 is_stmt 1
 319 000c 7047     		bx	lr
 320              		.cfi_endproc
 321              	.LFE143:
 323              		.section	.text.LCD_DisplayOn,"ax",%progbits
 324              		.align	1
 325              		.global	LCD_DisplayOn
 326              		.syntax unified
 327              		.thumb
 328              		.thumb_func
ARM GAS  /tmp/ccBPN2mg.s 			page 8


 329              		.fpu fpv4-sp-d16
 331              	LCD_DisplayOn:
 332              	.LFB145:
  90:hardware/LCD/ili9341.c **** //读取个某点的颜色值	 
  91:hardware/LCD/ili9341.c **** //x,y:坐标
  92:hardware/LCD/ili9341.c **** //返回值:此点的颜色
  93:hardware/LCD/ili9341.c **** u32 LCD_ReadPoint(u16 x,u16 y)
  94:hardware/LCD/ili9341.c **** {
  95:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
  96:hardware/LCD/ili9341.c **** 	if(x>=lcddev.width||y>=lcddev.height)
  97:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
  98:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
  99:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X2E);//9341 发送读GRAM指令
 100:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();								//dummy Read	   
 101:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();  		  						//实际坐标颜色
 102:hardware/LCD/ili9341.c **** 	//9341要分2次读出 
 103:hardware/LCD/ili9341.c **** 	b=LCD_RD_DATA(); 
 104:hardware/LCD/ili9341.c **** 	g=r&0XFF;		//对于9341第一次读取的是RG的值,R在前,G在后,各占8位
 105:hardware/LCD/ili9341.c **** 	g<<=8; 
 106:hardware/LCD/ili9341.c **** 	return (((r>>11)<<11)|((g>>10)<<5)|(b>>11));	//ILI9341/NT35310/NT35510需要公式转换一下
 107:hardware/LCD/ili9341.c **** }			 
 108:hardware/LCD/ili9341.c **** /***************LCD显示开启***************************************/
 109:hardware/LCD/ili9341.c **** void LCD_DisplayOn(void)
 110:hardware/LCD/ili9341.c **** {
 333              		.loc 1 110 0
 334              		.cfi_startproc
 335              		@ args = 0, pretend = 0, frame = 0
 336              		@ frame_needed = 0, uses_anonymous_args = 0
 337 0000 08B5     		push	{r3, lr}
 338              	.LCFI7:
 339              		.cfi_def_cfa_offset 8
 340              		.cfi_offset 3, -8
 341              		.cfi_offset 14, -4
 111:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X29);
 342              		.loc 1 111 0
 343 0002 2920     		movs	r0, #41
 344 0004 FFF7FEFF 		bl	LCD_WR_REG
 345              	.LVL14:
 346 0008 08BD     		pop	{r3, pc}
 347              		.cfi_endproc
 348              	.LFE145:
 350              		.section	.text.LCD_DisplayOff,"ax",%progbits
 351              		.align	1
 352              		.global	LCD_DisplayOff
 353              		.syntax unified
 354              		.thumb
 355              		.thumb_func
 356              		.fpu fpv4-sp-d16
 358              	LCD_DisplayOff:
 359              	.LFB146:
 112:hardware/LCD/ili9341.c **** }
 113:hardware/LCD/ili9341.c **** /**************LCD显示关闭****************************************/
 114:hardware/LCD/ili9341.c **** void LCD_DisplayOff(void)
 115:hardware/LCD/ili9341.c **** {
 360              		.loc 1 115 0
 361              		.cfi_startproc
 362              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccBPN2mg.s 			page 9


 363              		@ frame_needed = 0, uses_anonymous_args = 0
 364 0000 08B5     		push	{r3, lr}
 365              	.LCFI8:
 366              		.cfi_def_cfa_offset 8
 367              		.cfi_offset 3, -8
 368              		.cfi_offset 14, -4
 116:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X28);
 369              		.loc 1 116 0
 370 0002 2820     		movs	r0, #40
 371 0004 FFF7FEFF 		bl	LCD_WR_REG
 372              	.LVL15:
 373 0008 08BD     		pop	{r3, pc}
 374              		.cfi_endproc
 375              	.LFE146:
 377              		.section	.text.LCD_SetCursor,"ax",%progbits
 378              		.align	1
 379              		.global	LCD_SetCursor
 380              		.syntax unified
 381              		.thumb
 382              		.thumb_func
 383              		.fpu fpv4-sp-d16
 385              	LCD_SetCursor:
 386              	.LFB147:
 117:hardware/LCD/ili9341.c **** } 
 118:hardware/LCD/ili9341.c **** /*******************设置光标位置************************************/
 119:hardware/LCD/ili9341.c **** void LCD_SetCursor(u16 Xpos, u16 Ypos)
 120:hardware/LCD/ili9341.c **** {
 387              		.loc 1 120 0
 388              		.cfi_startproc
 389              		@ args = 0, pretend = 0, frame = 0
 390              		@ frame_needed = 0, uses_anonymous_args = 0
 391              	.LVL16:
 392 0000 70B5     		push	{r4, r5, r6, lr}
 393              	.LCFI9:
 394              		.cfi_def_cfa_offset 16
 395              		.cfi_offset 4, -16
 396              		.cfi_offset 5, -12
 397              		.cfi_offset 6, -8
 398              		.cfi_offset 14, -4
 399 0002 0646     		mov	r6, r0
 400 0004 0C46     		mov	r4, r1
 121:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);				//X坐标设置
 401              		.loc 1 121 0
 402 0006 0A4D     		ldr	r5, .L34
 403 0008 6889     		ldrh	r0, [r5, #10]
 404              	.LVL17:
 405 000a FFF7FEFF 		bl	LCD_WR_REG
 406              	.LVL18:
 122:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Xpos>>8);
 407              		.loc 1 122 0
 408 000e 300A     		lsrs	r0, r6, #8
 409 0010 FFF7FEFF 		bl	LCD_WR_DATA
 410              	.LVL19:
 123:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Xpos&0xFF);
 411              		.loc 1 123 0
 412 0014 F0B2     		uxtb	r0, r6
 413 0016 FFF7FEFF 		bl	LCD_WR_DATA
ARM GAS  /tmp/ccBPN2mg.s 			page 10


 414              	.LVL20:
 124:hardware/LCD/ili9341.c **** 	
 125:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);				//Y坐标设置
 415              		.loc 1 125 0
 416 001a A889     		ldrh	r0, [r5, #12]
 417 001c FFF7FEFF 		bl	LCD_WR_REG
 418              	.LVL21:
 126:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Ypos>>8);
 419              		.loc 1 126 0
 420 0020 200A     		lsrs	r0, r4, #8
 421 0022 FFF7FEFF 		bl	LCD_WR_DATA
 422              	.LVL22:
 127:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(Ypos&0XFF);
 423              		.loc 1 127 0
 424 0026 E0B2     		uxtb	r0, r4
 425 0028 FFF7FEFF 		bl	LCD_WR_DATA
 426              	.LVL23:
 427 002c 70BD     		pop	{r4, r5, r6, pc}
 428              	.L35:
 429 002e 00BF     		.align	2
 430              	.L34:
 431 0030 00000000 		.word	lcddev
 432              		.cfi_endproc
 433              	.LFE147:
 435              		.section	.text.LCD_ReadPoint,"ax",%progbits
 436              		.align	1
 437              		.global	LCD_ReadPoint
 438              		.syntax unified
 439              		.thumb
 440              		.thumb_func
 441              		.fpu fpv4-sp-d16
 443              	LCD_ReadPoint:
 444              	.LFB144:
  94:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
 445              		.loc 1 94 0
 446              		.cfi_startproc
 447              		@ args = 0, pretend = 0, frame = 0
 448              		@ frame_needed = 0, uses_anonymous_args = 0
 449              	.LVL24:
  96:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
 450              		.loc 1 96 0
 451 0000 114B     		ldr	r3, .L45
 452 0002 1B88     		ldrh	r3, [r3]
 453 0004 8342     		cmp	r3, r0
 454 0006 1DD9     		bls	.L38
  96:hardware/LCD/ili9341.c **** 		return 0;	//超过了范围,直接返回 
 455              		.loc 1 96 0 is_stmt 0 discriminator 1
 456 0008 0F4B     		ldr	r3, .L45
 457 000a 5B88     		ldrh	r3, [r3, #2]
 458 000c 8B42     		cmp	r3, r1
 459 000e 01D8     		bhi	.L44
  97:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
 460              		.loc 1 97 0 is_stmt 1
 461 0010 0020     		movs	r0, #0
 462              	.LVL25:
 463 0012 7047     		bx	lr
 464              	.LVL26:
ARM GAS  /tmp/ccBPN2mg.s 			page 11


 465              	.L44:
  94:hardware/LCD/ili9341.c ****  	u16 r=0,g=0,b=0;
 466              		.loc 1 94 0
 467 0014 10B5     		push	{r4, lr}
 468              	.LCFI10:
 469              		.cfi_def_cfa_offset 8
 470              		.cfi_offset 4, -8
 471              		.cfi_offset 14, -4
  98:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0X2E);//9341 发送读GRAM指令
 472              		.loc 1 98 0
 473 0016 FFF7FEFF 		bl	LCD_SetCursor
 474              	.LVL27:
  99:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();								//dummy Read	   
 475              		.loc 1 99 0
 476 001a 2E20     		movs	r0, #46
 477 001c FFF7FEFF 		bl	LCD_WR_REG
 478              	.LVL28:
 100:hardware/LCD/ili9341.c ****  	r=LCD_RD_DATA();  		  						//实际坐标颜色
 479              		.loc 1 100 0
 480 0020 FFF7FEFF 		bl	LCD_RD_DATA
 481              	.LVL29:
 101:hardware/LCD/ili9341.c **** 	//9341要分2次读出 
 482              		.loc 1 101 0
 483 0024 FFF7FEFF 		bl	LCD_RD_DATA
 484              	.LVL30:
 485 0028 0446     		mov	r4, r0
 486              	.LVL31:
 103:hardware/LCD/ili9341.c **** 	g=r&0XFF;		//对于9341第一次读取的是RG的值,R在前,G在后,各占8位
 487              		.loc 1 103 0
 488 002a FFF7FEFF 		bl	LCD_RD_DATA
 489              	.LVL32:
 106:hardware/LCD/ili9341.c **** }			 
 490              		.loc 1 106 0
 491 002e C4F3CF23 		ubfx	r3, r4, #11, #16
 492 0032 C4F38504 		ubfx	r4, r4, #2, #6
 493              	.LVL33:
 494 0036 6401     		lsls	r4, r4, #5
 495 0038 44EAC324 		orr	r4, r4, r3, lsl #11
 496 003c C0F3CF20 		ubfx	r0, r0, #11, #16
 497              	.LVL34:
 498 0040 2043     		orrs	r0, r0, r4
 499 0042 10BD     		pop	{r4, pc}
 500              	.LVL35:
 501              	.L38:
 502              	.LCFI11:
 503              		.cfi_def_cfa_offset 0
 504              		.cfi_restore 4
 505              		.cfi_restore 14
  97:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);	    
 506              		.loc 1 97 0
 507 0044 0020     		movs	r0, #0
 508              	.LVL36:
 509 0046 7047     		bx	lr
 510              	.L46:
 511              		.align	2
 512              	.L45:
 513 0048 00000000 		.word	lcddev
ARM GAS  /tmp/ccBPN2mg.s 			page 12


 514              		.cfi_endproc
 515              	.LFE144:
 517              		.section	.text.LCD_Scan_Dir,"ax",%progbits
 518              		.align	1
 519              		.global	LCD_Scan_Dir
 520              		.syntax unified
 521              		.thumb
 522              		.thumb_func
 523              		.fpu fpv4-sp-d16
 525              	LCD_Scan_Dir:
 526              	.LFB148:
 128:hardware/LCD/ili9341.c **** }	 
 129:hardware/LCD/ili9341.c **** /**************************************************************************************************
 130:hardware/LCD/ili9341.c **** //设置LCD的自动扫描方向																		//
 131:hardware/LCD/ili9341.c **** //注意:其他函数可能会受到此函数设置的影响(尤其是9341/6804这两个奇葩),		/
 132:hardware/LCD/ili9341.c **** //所以,一般设置为L2R_U2D即可,如果设置为其他扫描方式,可能导致显示不正常
 133:hardware/LCD/ili9341.c **** //dir:0~7,代表8个方向(具体定义见lcd.h)															//
 134:hardware/LCD/ili9341.c **** ***************************************************************************************************
 135:hardware/LCD/ili9341.c **** void LCD_Scan_Dir(u8 dir)
 136:hardware/LCD/ili9341.c **** {
 527              		.loc 1 136 0
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 0
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531              	.LVL37:
 532 0000 08B5     		push	{r3, lr}
 533              	.LCFI12:
 534              		.cfi_def_cfa_offset 8
 535              		.cfi_offset 3, -8
 536              		.cfi_offset 14, -4
 537              	.LVL38:
 137:hardware/LCD/ili9341.c **** 	u16 regval=0;
 138:hardware/LCD/ili9341.c **** 	switch(dir)
 538              		.loc 1 138 0
 539 0002 0138     		subs	r0, r0, #1
 540              	.LVL39:
 541 0004 0628     		cmp	r0, #6
 542 0006 05D8     		bhi	.L48
 543 0008 DFE800F0 		tbb	[pc, r0]
 544              	.L50:
 545 000c 12       		.byte	(.L57-.L50)/2
 546 000d 06       		.byte	(.L51-.L50)/2
 547 000e 08       		.byte	(.L52-.L50)/2
 548 000f 0A       		.byte	(.L53-.L50)/2
 549 0010 0C       		.byte	(.L54-.L50)/2
 550 0011 0E       		.byte	(.L55-.L50)/2
 551 0012 10       		.byte	(.L56-.L50)/2
 552 0013 00       		.p2align 1
 553              	.L48:
 137:hardware/LCD/ili9341.c **** 	u16 regval=0;
 554              		.loc 1 137 0
 555 0014 0021     		movs	r1, #0
 556 0016 0CE0     		b	.L49
 557              	.L51:
 558              	.LVL40:
 139:hardware/LCD/ili9341.c **** 		{
 140:hardware/LCD/ili9341.c **** 			case L2R_U2D:
ARM GAS  /tmp/ccBPN2mg.s 			page 13


 141:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(0<<6)|(0<<5);
 142:hardware/LCD/ili9341.c **** 				break;
 143:hardware/LCD/ili9341.c **** 			case L2R_D2U:
 144:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(0<<6)|(0<<5);
 145:hardware/LCD/ili9341.c **** 				break;
 146:hardware/LCD/ili9341.c **** 			case R2L_U2D:
 147:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(1<<6)|(0<<5);
 559              		.loc 1 147 0
 560 0018 4021     		movs	r1, #64
 148:hardware/LCD/ili9341.c **** 				break;
 561              		.loc 1 148 0
 562 001a 0AE0     		b	.L49
 563              	.LVL41:
 564              	.L52:
 149:hardware/LCD/ili9341.c **** 			case R2L_D2U:
 150:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(1<<6)|(0<<5);
 565              		.loc 1 150 0
 566 001c C021     		movs	r1, #192
 151:hardware/LCD/ili9341.c **** 				break;
 567              		.loc 1 151 0
 568 001e 08E0     		b	.L49
 569              	.LVL42:
 570              	.L53:
 152:hardware/LCD/ili9341.c **** 			case U2D_L2R:
 153:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(0<<6)|(1<<5);
 571              		.loc 1 153 0
 572 0020 2021     		movs	r1, #32
 154:hardware/LCD/ili9341.c **** 				break;
 573              		.loc 1 154 0
 574 0022 06E0     		b	.L49
 575              	.LVL43:
 576              	.L54:
 155:hardware/LCD/ili9341.c **** 			case U2D_R2L:
 156:hardware/LCD/ili9341.c **** 				regval|=(0<<7)|(1<<6)|(1<<5);
 577              		.loc 1 156 0
 578 0024 6021     		movs	r1, #96
 157:hardware/LCD/ili9341.c **** 				break;
 579              		.loc 1 157 0
 580 0026 04E0     		b	.L49
 581              	.LVL44:
 582              	.L55:
 158:hardware/LCD/ili9341.c **** 			case D2U_L2R:
 159:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(0<<6)|(1<<5);
 583              		.loc 1 159 0
 584 0028 A021     		movs	r1, #160
 160:hardware/LCD/ili9341.c **** 				break;
 585              		.loc 1 160 0
 586 002a 02E0     		b	.L49
 587              	.LVL45:
 588              	.L56:
 161:hardware/LCD/ili9341.c **** 			case D2U_R2L:
 162:hardware/LCD/ili9341.c **** 				regval|=(1<<7)|(1<<6)|(1<<5);	
 589              		.loc 1 162 0
 590 002c E021     		movs	r1, #224
 591 002e 00E0     		b	.L49
 592              	.LVL46:
 593              	.L57:
ARM GAS  /tmp/ccBPN2mg.s 			page 14


 144:hardware/LCD/ili9341.c **** 				break;
 594              		.loc 1 144 0
 595 0030 8021     		movs	r1, #128
 596              	.LVL47:
 597              	.L49:
 163:hardware/LCD/ili9341.c **** 		}
 164:hardware/LCD/ili9341.c **** 	regval|=1<<3;                  //RGB,BGR颜色顺序设置
 165:hardware/LCD/ili9341.c **** 	LCD_WriteReg(0X36,regval);
 598              		.loc 1 165 0
 599 0032 41F00801 		orr	r1, r1, #8
 600              	.LVL48:
 601 0036 3620     		movs	r0, #54
 602 0038 FFF7FEFF 		bl	LCD_WriteReg
 603              	.LVL49:
 604 003c 08BD     		pop	{r3, pc}
 605              		.cfi_endproc
 606              	.LFE148:
 608              		.section	.text.LCD_DrawPoint,"ax",%progbits
 609              		.align	1
 610              		.global	LCD_DrawPoint
 611              		.syntax unified
 612              		.thumb
 613              		.thumb_func
 614              		.fpu fpv4-sp-d16
 616              	LCD_DrawPoint:
 617              	.LFB149:
 166:hardware/LCD/ili9341.c **** }
 167:hardware/LCD/ili9341.c **** /****************画点函数****************************************************************/
 168:hardware/LCD/ili9341.c **** void LCD_DrawPoint(u16 x, u16 y)
 169:hardware/LCD/ili9341.c **** {
 618              		.loc 1 169 0
 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622              	.LVL50:
 623 0000 08B5     		push	{r3, lr}
 624              	.LCFI13:
 625              		.cfi_def_cfa_offset 8
 626              		.cfi_offset 3, -8
 627              		.cfi_offset 14, -4
 170:hardware/LCD/ili9341.c **** 	LCD_SetCursor(x,y);
 628              		.loc 1 170 0
 629 0002 FFF7FEFF 		bl	LCD_SetCursor
 630              	.LVL51:
 171:hardware/LCD/ili9341.c **** 	LCD_WriteRAM_Prepare();
 631              		.loc 1 171 0
 632 0006 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 633              	.LVL52:
 172:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=POINT_COLOR;
 634              		.loc 1 172 0
 635 000a 024B     		ldr	r3, .L61
 636 000c 1A88     		ldrh	r2, [r3]
 637 000e 024B     		ldr	r3, .L61+4
 638 0010 5A80     		strh	r2, [r3, #2]	@ movhi
 639 0012 08BD     		pop	{r3, pc}
 640              	.L62:
 641              		.align	2
ARM GAS  /tmp/ccBPN2mg.s 			page 15


 642              	.L61:
 643 0014 00000000 		.word	.LANCHOR0
 644 0018 FEFF0760 		.word	1611137022
 645              		.cfi_endproc
 646              	.LFE149:
 648              		.section	.text.LCD_Fast_DrawPoint,"ax",%progbits
 649              		.align	1
 650              		.global	LCD_Fast_DrawPoint
 651              		.syntax unified
 652              		.thumb
 653              		.thumb_func
 654              		.fpu fpv4-sp-d16
 656              	LCD_Fast_DrawPoint:
 657              	.LFB150:
 173:hardware/LCD/ili9341.c **** }
 174:hardware/LCD/ili9341.c **** /************快速画点函数***************************************************************/
 175:hardware/LCD/ili9341.c **** void LCD_Fast_DrawPoint(u16 x, u16 y, u32 color)
 176:hardware/LCD/ili9341.c **** {
 658              		.loc 1 176 0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
 661              		@ frame_needed = 0, uses_anonymous_args = 0
 662              	.LVL53:
 663 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 664              	.LCFI14:
 665              		.cfi_def_cfa_offset 24
 666              		.cfi_offset 3, -24
 667              		.cfi_offset 4, -20
 668              		.cfi_offset 5, -16
 669              		.cfi_offset 6, -12
 670              		.cfi_offset 7, -8
 671              		.cfi_offset 14, -4
 672 0002 0746     		mov	r7, r0
 673 0004 0E46     		mov	r6, r1
 674 0006 1446     		mov	r4, r2
 177:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);
 675              		.loc 1 177 0
 676 0008 0C4D     		ldr	r5, .L65
 677 000a 6889     		ldrh	r0, [r5, #10]
 678              	.LVL54:
 679 000c FFF7FEFF 		bl	LCD_WR_REG
 680              	.LVL55:
 178:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(x>>8);
 681              		.loc 1 178 0
 682 0010 380A     		lsrs	r0, r7, #8
 683 0012 FFF7FEFF 		bl	LCD_WR_DATA
 684              	.LVL56:
 179:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(x&0xFF);
 685              		.loc 1 179 0
 686 0016 F8B2     		uxtb	r0, r7
 687 0018 FFF7FEFF 		bl	LCD_WR_DATA
 688              	.LVL57:
 180:hardware/LCD/ili9341.c **** 
 181:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);
 689              		.loc 1 181 0
 690 001c A889     		ldrh	r0, [r5, #12]
 691 001e FFF7FEFF 		bl	LCD_WR_REG
ARM GAS  /tmp/ccBPN2mg.s 			page 16


 692              	.LVL58:
 182:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(y>>8);
 693              		.loc 1 182 0
 694 0022 300A     		lsrs	r0, r6, #8
 695 0024 FFF7FEFF 		bl	LCD_WR_DATA
 696              	.LVL59:
 183:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(y&0XFF);
 697              		.loc 1 183 0
 698 0028 F0B2     		uxtb	r0, r6
 699 002a FFF7FEFF 		bl	LCD_WR_DATA
 700              	.LVL60:
 184:hardware/LCD/ili9341.c **** 
 185:hardware/LCD/ili9341.c **** 	LCD->LCD_REG=lcddev.wramcmd;
 701              		.loc 1 185 0
 702 002e 2A89     		ldrh	r2, [r5, #8]
 703 0030 034B     		ldr	r3, .L65+4
 704 0032 1A80     		strh	r2, [r3]	@ movhi
 186:hardware/LCD/ili9341.c **** 	LCD->LCD_RAM=color;
 705              		.loc 1 186 0
 706 0034 A4B2     		uxth	r4, r4
 707              	.LVL61:
 708 0036 5C80     		strh	r4, [r3, #2]	@ movhi
 709 0038 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 710              	.L66:
 711 003a 00BF     		.align	2
 712              	.L65:
 713 003c 00000000 		.word	lcddev
 714 0040 FEFF0760 		.word	1611137022
 715              		.cfi_endproc
 716              	.LFE150:
 718              		.section	.text.LCD_Display_Dir,"ax",%progbits
 719              		.align	1
 720              		.global	LCD_Display_Dir
 721              		.syntax unified
 722              		.thumb
 723              		.thumb_func
 724              		.fpu fpv4-sp-d16
 726              	LCD_Display_Dir:
 727              	.LFB151:
 187:hardware/LCD/ili9341.c **** }
 188:hardware/LCD/ili9341.c **** /***********设置LCD显示方向(0:竖屏1:横屏)***********************************************/
 189:hardware/LCD/ili9341.c **** void LCD_Display_Dir(u8 dir)
 190:hardware/LCD/ili9341.c **** {
 728              		.loc 1 190 0
 729              		.cfi_startproc
 730              		@ args = 0, pretend = 0, frame = 0
 731              		@ frame_needed = 0, uses_anonymous_args = 0
 732              	.LVL62:
 733 0000 08B5     		push	{r3, lr}
 734              	.LCFI15:
 735              		.cfi_def_cfa_offset 8
 736              		.cfi_offset 3, -8
 737              		.cfi_offset 14, -4
 191:hardware/LCD/ili9341.c **** 	if(dir==0)
 738              		.loc 1 191 0
 739 0002 88B1     		cbz	r0, .L71
 192:hardware/LCD/ili9341.c **** 		{
ARM GAS  /tmp/ccBPN2mg.s 			page 17


 193:hardware/LCD/ili9341.c **** 			lcddev.dir=0;
 194:hardware/LCD/ili9341.c **** 			lcddev.width=240;
 195:hardware/LCD/ili9341.c **** 			lcddev.height=320;
 196:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0X2C;
 197:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2A;
 198:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2B;
 199:hardware/LCD/ili9341.c **** 		}
 200:hardware/LCD/ili9341.c **** 	else
 201:hardware/LCD/ili9341.c **** 		{
 202:hardware/LCD/ili9341.c **** 			lcddev.dir=1;
 740              		.loc 1 202 0
 741 0004 104B     		ldr	r3, .L72
 742 0006 0122     		movs	r2, #1
 743 0008 9A71     		strb	r2, [r3, #6]
 203:hardware/LCD/ili9341.c **** 			lcddev.width=320;
 744              		.loc 1 203 0
 745 000a 4FF4A072 		mov	r2, #320
 746 000e 1A80     		strh	r2, [r3]	@ movhi
 204:hardware/LCD/ili9341.c **** 			lcddev.height=240;
 747              		.loc 1 204 0
 748 0010 F022     		movs	r2, #240
 749 0012 5A80     		strh	r2, [r3, #2]	@ movhi
 205:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0x2C;
 750              		.loc 1 205 0
 751 0014 2C22     		movs	r2, #44
 752 0016 1A81     		strh	r2, [r3, #8]	@ movhi
 206:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2B;
 753              		.loc 1 206 0
 754 0018 2B22     		movs	r2, #43
 755 001a 5A81     		strh	r2, [r3, #10]	@ movhi
 207:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2A;
 756              		.loc 1 207 0
 757 001c 2A22     		movs	r2, #42
 758 001e 9A81     		strh	r2, [r3, #12]	@ movhi
 759              	.L69:
 208:hardware/LCD/ili9341.c **** 		}
 209:hardware/LCD/ili9341.c **** 	LCD_Scan_Dir(L2R_U2D);
 760              		.loc 1 209 0
 761 0020 0020     		movs	r0, #0
 762              	.LVL63:
 763 0022 FFF7FEFF 		bl	LCD_Scan_Dir
 764              	.LVL64:
 765 0026 08BD     		pop	{r3, pc}
 766              	.LVL65:
 767              	.L71:
 193:hardware/LCD/ili9341.c **** 			lcddev.width=240;
 768              		.loc 1 193 0
 769 0028 074B     		ldr	r3, .L72
 770 002a 0022     		movs	r2, #0
 771 002c 9A71     		strb	r2, [r3, #6]
 194:hardware/LCD/ili9341.c **** 			lcddev.height=320;
 772              		.loc 1 194 0
 773 002e F022     		movs	r2, #240
 774 0030 1A80     		strh	r2, [r3]	@ movhi
 195:hardware/LCD/ili9341.c **** 			lcddev.wramcmd=0X2C;
 775              		.loc 1 195 0
 776 0032 4FF4A072 		mov	r2, #320
ARM GAS  /tmp/ccBPN2mg.s 			page 18


 777 0036 5A80     		strh	r2, [r3, #2]	@ movhi
 196:hardware/LCD/ili9341.c **** 			lcddev.setxcmd=0X2A;
 778              		.loc 1 196 0
 779 0038 2C22     		movs	r2, #44
 780 003a 1A81     		strh	r2, [r3, #8]	@ movhi
 197:hardware/LCD/ili9341.c **** 			lcddev.setycmd=0X2B;
 781              		.loc 1 197 0
 782 003c 2A22     		movs	r2, #42
 783 003e 5A81     		strh	r2, [r3, #10]	@ movhi
 198:hardware/LCD/ili9341.c **** 		}
 784              		.loc 1 198 0
 785 0040 2B22     		movs	r2, #43
 786 0042 9A81     		strh	r2, [r3, #12]	@ movhi
 787 0044 ECE7     		b	.L69
 788              	.L73:
 789 0046 00BF     		.align	2
 790              	.L72:
 791 0048 00000000 		.word	lcddev
 792              		.cfi_endproc
 793              	.LFE151:
 795              		.section	.text.LCD_Set_Window,"ax",%progbits
 796              		.align	1
 797              		.global	LCD_Set_Window
 798              		.syntax unified
 799              		.thumb
 800              		.thumb_func
 801              		.fpu fpv4-sp-d16
 803              	LCD_Set_Window:
 804              	.LFB152:
 210:hardware/LCD/ili9341.c **** }
 211:hardware/LCD/ili9341.c **** /**************************************************************************************************
 212:hardware/LCD/ili9341.c **** //设置窗口,并自动设置画点坐标到窗口左上角(sx,sy).
 213:hardware/LCD/ili9341.c **** //sx,sy:窗口起始坐标(左上角)
 214:hardware/LCD/ili9341.c **** //width,height:窗口宽度和高度,必须大于0!!
 215:hardware/LCD/ili9341.c **** //窗体大小:width*height. 																				
 216:hardware/LCD/ili9341.c **** ***************************************************************************************************
 217:hardware/LCD/ili9341.c **** void LCD_Set_Window(u16 sx, u16 sy, u16 width, u16 height)
 218:hardware/LCD/ili9341.c **** {
 805              		.loc 1 218 0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 0
 808              		@ frame_needed = 0, uses_anonymous_args = 0
 809              	.LVL66:
 810 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 811              	.LCFI16:
 812              		.cfi_def_cfa_offset 24
 813              		.cfi_offset 4, -24
 814              		.cfi_offset 5, -20
 815              		.cfi_offset 6, -16
 816              		.cfi_offset 7, -12
 817              		.cfi_offset 8, -8
 818              		.cfi_offset 14, -4
 819 0004 0746     		mov	r7, r0
 820 0006 0E46     		mov	r6, r1
 219:hardware/LCD/ili9341.c **** 	u16 twidth,theight;
 220:hardware/LCD/ili9341.c **** 	twidth=sx+width-1;
 821              		.loc 1 220 0
ARM GAS  /tmp/ccBPN2mg.s 			page 19


 822 0008 8518     		adds	r5, r0, r2
 823 000a ADB2     		uxth	r5, r5
 824 000c 013D     		subs	r5, r5, #1
 825 000e ADB2     		uxth	r5, r5
 826              	.LVL67:
 221:hardware/LCD/ili9341.c **** 	theight=sy+height-1;
 827              		.loc 1 221 0
 828 0010 CC18     		adds	r4, r1, r3
 829 0012 A4B2     		uxth	r4, r4
 830 0014 013C     		subs	r4, r4, #1
 831 0016 A4B2     		uxth	r4, r4
 832              	.LVL68:
 222:hardware/LCD/ili9341.c **** 
 223:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setxcmd);
 833              		.loc 1 223 0
 834 0018 DFF84480 		ldr	r8, .L76
 835 001c B8F80A00 		ldrh	r0, [r8, #10]
 836              	.LVL69:
 837 0020 FFF7FEFF 		bl	LCD_WR_REG
 838              	.LVL70:
 224:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sx>>8);
 839              		.loc 1 224 0
 840 0024 380A     		lsrs	r0, r7, #8
 841 0026 FFF7FEFF 		bl	LCD_WR_DATA
 842              	.LVL71:
 225:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sx&0xFF);
 843              		.loc 1 225 0
 844 002a F8B2     		uxtb	r0, r7
 845 002c FFF7FEFF 		bl	LCD_WR_DATA
 846              	.LVL72:
 226:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(twidth>>8);
 847              		.loc 1 226 0
 848 0030 280A     		lsrs	r0, r5, #8
 849 0032 FFF7FEFF 		bl	LCD_WR_DATA
 850              	.LVL73:
 227:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(twidth&0xFF);
 851              		.loc 1 227 0
 852 0036 E8B2     		uxtb	r0, r5
 853 0038 FFF7FEFF 		bl	LCD_WR_DATA
 854              	.LVL74:
 228:hardware/LCD/ili9341.c **** 
 229:hardware/LCD/ili9341.c **** 	LCD_WR_REG(lcddev.setycmd);
 855              		.loc 1 229 0
 856 003c B8F80C00 		ldrh	r0, [r8, #12]
 857 0040 FFF7FEFF 		bl	LCD_WR_REG
 858              	.LVL75:
 230:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sy>>8);
 859              		.loc 1 230 0
 860 0044 300A     		lsrs	r0, r6, #8
 861 0046 FFF7FEFF 		bl	LCD_WR_DATA
 862              	.LVL76:
 231:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(sy&0xFF);
 863              		.loc 1 231 0
 864 004a F0B2     		uxtb	r0, r6
 865 004c FFF7FEFF 		bl	LCD_WR_DATA
 866              	.LVL77:
 232:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(theight>>8);
ARM GAS  /tmp/ccBPN2mg.s 			page 20


 867              		.loc 1 232 0
 868 0050 200A     		lsrs	r0, r4, #8
 869 0052 FFF7FEFF 		bl	LCD_WR_DATA
 870              	.LVL78:
 233:hardware/LCD/ili9341.c **** 	LCD_WR_DATA(theight&0xFF);
 871              		.loc 1 233 0
 872 0056 E0B2     		uxtb	r0, r4
 873 0058 FFF7FEFF 		bl	LCD_WR_DATA
 874              	.LVL79:
 875 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 876              	.LVL80:
 877              	.L77:
 878              		.align	2
 879              	.L76:
 880 0060 00000000 		.word	lcddev
 881              		.cfi_endproc
 882              	.LFE152:
 884              		.section	.text.HAL_SRAM_MspInit,"ax",%progbits
 885              		.align	1
 886              		.global	HAL_SRAM_MspInit
 887              		.syntax unified
 888              		.thumb
 889              		.thumb_func
 890              		.fpu fpv4-sp-d16
 892              	HAL_SRAM_MspInit:
 893              	.LFB153:
 234:hardware/LCD/ili9341.c **** 	
 235:hardware/LCD/ili9341.c **** }
 236:hardware/LCD/ili9341.c **** //SRAM底层驱动，时钟使能，引脚分配
 237:hardware/LCD/ili9341.c **** //此函数会被HAL_SRAM_Init()调用
 238:hardware/LCD/ili9341.c **** //hsram:SRAM句柄
 239:hardware/LCD/ili9341.c **** void HAL_SRAM_MspInit(SRAM_HandleTypeDef *hsram)
 240:hardware/LCD/ili9341.c **** {	
 894              		.loc 1 240 0
 895              		.cfi_startproc
 896              		@ args = 0, pretend = 0, frame = 32
 897              		@ frame_needed = 0, uses_anonymous_args = 0
 898              	.LVL81:
 899 0000 00B5     		push	{lr}
 900              	.LCFI17:
 901              		.cfi_def_cfa_offset 4
 902              		.cfi_offset 14, -4
 903 0002 89B0     		sub	sp, sp, #36
 904              	.LCFI18:
 905              		.cfi_def_cfa_offset 40
 906              	.LBB2:
 241:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 242:hardware/LCD/ili9341.c **** 	
 243:hardware/LCD/ili9341.c **** 	__HAL_RCC_FMC_CLK_ENABLE();				//使能FMC时钟
 907              		.loc 1 243 0
 908 0004 0022     		movs	r2, #0
 909 0006 0092     		str	r2, [sp]
 910 0008 1B4B     		ldr	r3, .L80
 911 000a 996B     		ldr	r1, [r3, #56]
 912 000c 41F00101 		orr	r1, r1, #1
 913 0010 9963     		str	r1, [r3, #56]
 914 0012 996B     		ldr	r1, [r3, #56]
ARM GAS  /tmp/ccBPN2mg.s 			page 21


 915 0014 01F00101 		and	r1, r1, #1
 916 0018 0091     		str	r1, [sp]
 917 001a 0099     		ldr	r1, [sp]
 918              	.LBE2:
 919              	.LBB3:
 244:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOD_CLK_ENABLE();			//使能GPIOD时钟
 920              		.loc 1 244 0
 921 001c 0192     		str	r2, [sp, #4]
 922 001e 196B     		ldr	r1, [r3, #48]
 923 0020 41F00801 		orr	r1, r1, #8
 924 0024 1963     		str	r1, [r3, #48]
 925 0026 196B     		ldr	r1, [r3, #48]
 926 0028 01F00801 		and	r1, r1, #8
 927 002c 0191     		str	r1, [sp, #4]
 928 002e 0199     		ldr	r1, [sp, #4]
 929              	.LBE3:
 930              	.LBB4:
 245:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOE_CLK_ENABLE();			//使能GPIOE时钟
 931              		.loc 1 245 0
 932 0030 0292     		str	r2, [sp, #8]
 933 0032 1A6B     		ldr	r2, [r3, #48]
 934 0034 42F01002 		orr	r2, r2, #16
 935 0038 1A63     		str	r2, [r3, #48]
 936 003a 1B6B     		ldr	r3, [r3, #48]
 937 003c 03F01003 		and	r3, r3, #16
 938 0040 0293     		str	r3, [sp, #8]
 939 0042 029B     		ldr	r3, [sp, #8]
 940              	.LBE4:
 246:hardware/LCD/ili9341.c **** 	
 247:hardware/LCD/ili9341.c **** 	//初始化PD0,1,4,5,7,8,9,10,13,14,15
 248:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_7|GPIO_PIN_8|\
 941              		.loc 1 248 0
 942 0044 4EF2B373 		movw	r3, #59315
 943 0048 0393     		str	r3, [sp, #12]
 249:hardware/LCD/ili9341.c ****                      GPIO_PIN_9|GPIO_PIN_10|GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15;
 250:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_AF_PP; 		//推挽复用
 944              		.loc 1 250 0
 945 004a 0223     		movs	r3, #2
 946 004c 0493     		str	r3, [sp, #16]
 251:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;			//上拉
 947              		.loc 1 251 0
 948 004e 0123     		movs	r3, #1
 949 0050 0593     		str	r3, [sp, #20]
 252:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;		//高速
 950              		.loc 1 252 0
 951 0052 0323     		movs	r3, #3
 952 0054 0693     		str	r3, [sp, #24]
 253:hardware/LCD/ili9341.c **** 	GPIO_Initure.Alternate=GPIO_AF12_FMC;	//复用为FMC
 953              		.loc 1 253 0
 954 0056 0C23     		movs	r3, #12
 955 0058 0793     		str	r3, [sp, #28]
 254:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOD,&GPIO_Initure);     //初始化
 956              		.loc 1 254 0
 957 005a 0DEB0301 		add	r1, sp, r3
 958 005e 0748     		ldr	r0, .L80+4
 959              	.LVL82:
 960 0060 FFF7FEFF 		bl	HAL_GPIO_Init
ARM GAS  /tmp/ccBPN2mg.s 			page 22


 961              	.LVL83:
 255:hardware/LCD/ili9341.c **** 	
 256:hardware/LCD/ili9341.c **** 	//初始化PE7,8,9,10,11,12,13,14,15
 257:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_7|GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10|GPIO_PIN_11|\
 962              		.loc 1 257 0
 963 0064 4FF68073 		movw	r3, #65408
 964 0068 0393     		str	r3, [sp, #12]
 258:hardware/LCD/ili9341.c ****                      GPIO_PIN_12|GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15;
 259:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOE,&GPIO_Initure);
 965              		.loc 1 259 0
 966 006a 03A9     		add	r1, sp, #12
 967 006c 0448     		ldr	r0, .L80+8
 968 006e FFF7FEFF 		bl	HAL_GPIO_Init
 969              	.LVL84:
 260:hardware/LCD/ili9341.c **** }
 970              		.loc 1 260 0
 971 0072 09B0     		add	sp, sp, #36
 972              	.LCFI19:
 973              		.cfi_def_cfa_offset 4
 974              		@ sp needed
 975 0074 5DF804FB 		ldr	pc, [sp], #4
 976              	.L81:
 977              		.align	2
 978              	.L80:
 979 0078 00380240 		.word	1073887232
 980 007c 000C0240 		.word	1073875968
 981 0080 00100240 		.word	1073876992
 982              		.cfi_endproc
 983              	.LFE153:
 985              		.section	.text.LCD_Clear,"ax",%progbits
 986              		.align	1
 987              		.global	LCD_Clear
 988              		.syntax unified
 989              		.thumb
 990              		.thumb_func
 991              		.fpu fpv4-sp-d16
 993              	LCD_Clear:
 994              	.LFB155:
 261:hardware/LCD/ili9341.c ****         
 262:hardware/LCD/ili9341.c **** //初始化lcd
 263:hardware/LCD/ili9341.c **** //该初始化函数可以初始化各种型号的LCD(详见本.c文件最前面的描述)
 264:hardware/LCD/ili9341.c **** void LCD_Init(void)
 265:hardware/LCD/ili9341.c **** { 	  
 266:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 267:hardware/LCD/ili9341.c **** 	FMC_NORSRAM_TimingTypeDef FMC_ReadWriteTim;
 268:hardware/LCD/ili9341.c **** 	FMC_NORSRAM_TimingTypeDef FMC_WriteTim;
 269:hardware/LCD/ili9341.c ****     
 270:hardware/LCD/ili9341.c **** 	__HAL_RCC_GPIOB_CLK_ENABLE();			//开启GPIOB时钟
 271:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_5|GPIO_PIN_6;  //PB5,背光控制。PB6,供电控制
 272:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 273:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 274:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;     //高速
 275:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOB,&GPIO_Initure); 
 276:hardware/LCD/ili9341.c ****     
 277:hardware/LCD/ili9341.c **** 	SRAM_Handler.Instance=FMC_NORSRAM_DEVICE;                
 278:hardware/LCD/ili9341.c **** 	SRAM_Handler.Extended=FMC_NORSRAM_EXTENDED_DEVICE;    
 279:hardware/LCD/ili9341.c ****     
ARM GAS  /tmp/ccBPN2mg.s 			page 23


 280:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.NSBank=FMC_NORSRAM_BANK1;     //使用NE1
 281:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.DataAddressMux=FMC_DATA_ADDRESS_MUX_DISABLE; //地址/数据线不复用
 282:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryType=FMC_MEMORY_TYPE_SRAM;   //SRAM
 283:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryDataWidth=FMC_NORSRAM_MEM_BUS_WIDTH_16; //16位数据宽度
 284:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.BurstAccessMode=FMC_BURST_ACCESS_MODE_DISABLE; //是否使能突发访问,仅对
 285:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalPolarity=FMC_WAIT_SIGNAL_POLARITY_LOW;//等待信号的极性,仅在
 286:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalActive=FMC_WAIT_TIMING_BEFORE_WS;   //存储器是在等待周期之
 287:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteOperation=FMC_WRITE_OPERATION_ENABLE;    //存储器写使能
 288:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignal=FMC_WAIT_SIGNAL_DISABLE;           //等待使能位,此处未用到
 289:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ExtendedMode=FMC_EXTENDED_MODE_ENABLE;        //读写使用不同的时序
 290:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.AsynchronousWait=FMC_ASYNCHRONOUS_WAIT_DISABLE;//是否使能同步传输模式
 291:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteBurst=FMC_WRITE_BURST_DISABLE;           //禁止突发写
 292:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ContinuousClock=FMC_CONTINUOUS_CLOCK_SYNC_ASYNC;
 293:hardware/LCD/ili9341.c ****     
 294:hardware/LCD/ili9341.c **** 	//FMC读时序控制寄存器
 295:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressSetupTime=0x0F;        //地址建立时间(ADDSET)为15个HCLK 1/180M*15=
 296:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressHoldTime=0x00;
 297:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.DataSetupTime=0x46;           //数据保存时间(DATAST)为70个HCLK	=5.5*70=38
 298:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AccessMode=FMC_ACCESS_MODE_A; //模式A
 299:hardware/LCD/ili9341.c **** 	//FMC写时序控制寄存器
 300:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressSetupTime=0x0F;            //地址建立时间(ADDSET)为15个HCLK=82.5ns
 301:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressHoldTime=0x00;
 302:hardware/LCD/ili9341.c **** 	FMC_WriteTim.DataSetupTime=0x0F;               //数据保存时间(DATAST)为5.5ns*15个HCLK=82.5
 303:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AccessMode=FMC_ACCESS_MODE_A;     //模式A
 304:hardware/LCD/ili9341.c **** 	HAL_SRAM_Init(&SRAM_Handler,&FMC_ReadWriteTim,&FMC_WriteTim);		
 305:hardware/LCD/ili9341.c **** 	delay_ms(50); // delay 50 ms 
 306:hardware/LCD/ili9341.c **** 	
 307:hardware/LCD/ili9341.c **** 	//尝试9341 ID的读取		
 308:hardware/LCD/ili9341.c **** 	LCD_WR_REG(0XD3);				   
 309:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//dummy read 	
 310:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//读到0X00
 311:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();   	//读取93								   
 312:hardware/LCD/ili9341.c **** 	lcddev.id<<=8;
 313:hardware/LCD/ili9341.c **** 	lcddev.id|=LCD_RD_DATA();  	//读取41 	 
 314:hardware/LCD/ili9341.c **** 	/*rt_kprintf(" LCD ID:%x\r\n",lcddev.id); //打印LCD ID */
 315:hardware/LCD/ili9341.c **** 
 316:hardware/LCD/ili9341.c **** 	/***************ILI9341初始化*************************/
 317:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCF);  
 318:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 319:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xC1); 
 320:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X30); 
 321:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xED);  
 322:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x64); 
 323:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x03); 
 324:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X12); 
 325:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X81); 
 326:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE8);  
 327:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x85); 
 328:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 329:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x7A); 
 330:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCB);  
 331:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x39); 
 332:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2C); 
 333:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 334:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x34); 
 335:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x02); 
 336:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF7);  
ARM GAS  /tmp/ccBPN2mg.s 			page 24


 337:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x20); 
 338:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xEA);  
 339:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 340:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 341:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC0);    //Power control 
 342:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1B);   //VRH[5:0] 
 343:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC1);    //Power control 
 344:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);   //SAP[2:0];BT[3:0] 
 345:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC5);    //VCM control 
 346:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3F
 347:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3C
 348:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC7);    //VCM control2 
 349:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XB7); 
 350:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x36);    // Memory Access Control 
 351:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x48); 
 352:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x3A);   
 353:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x55); 
 354:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB1);   
 355:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);   
 356:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1A); 
 357:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB6);    // Display Function Control 
 358:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 359:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xA2); 
 360:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF2);    // 3Gamma Function Disable 
 361:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 362:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x26);    //Gamma curve selected 
 363:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01); 
 364:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE0);    //Set Gamma 
 365:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 366:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2A); 
 367:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x28); 
 368:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 369:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0E); 
 370:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 371:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x54); 
 372:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XA9); 
 373:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x43); 
 374:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 375:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 376:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 377:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 378:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 379:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 		 
 380:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0XE1);    //Set Gamma 
 381:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 382:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x15); 
 383:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x17); 
 384:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x07); 
 385:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x11); 
 386:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x06); 
 387:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2B); 
 388:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x56); 
 389:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3C); 
 390:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x05); 
 391:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 392:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 393:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
ARM GAS  /tmp/ccBPN2mg.s 			page 25


 394:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 395:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 396:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2B); 
 397:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 398:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 399:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);
 400:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3f);
 401:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2A); 
 402:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 403:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 404:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 405:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xef);	 
 406:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x11); //Exit Sleep
 407:hardware/LCD/ili9341.c **** 		delay_ms(120);
 408:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x29); //display on
 409:hardware/LCD/ili9341.c **** 		
 410:hardware/LCD/ili9341.c **** 	LCD_Display_Dir(0);		//默认为竖屏
 411:hardware/LCD/ili9341.c **** 	LCD_LED=0;				//点亮背光
 412:hardware/LCD/ili9341.c **** 	LCD_Clear(GBLUE);
 413:hardware/LCD/ili9341.c **** }  
 414:hardware/LCD/ili9341.c **** #ifdef BSP_USING_ILI9341
 415:hardware/LCD/ili9341.c **** 	INIT_BOARD_EXPORT(LCD_Init);
 416:hardware/LCD/ili9341.c **** #endif
 417:hardware/LCD/ili9341.c **** 
 418:hardware/LCD/ili9341.c **** //清屏函数
 419:hardware/LCD/ili9341.c **** //color:要清屏的填充色
 420:hardware/LCD/ili9341.c **** void LCD_Clear(u32 color)
 421:hardware/LCD/ili9341.c **** {
 995              		.loc 1 421 0
 996              		.cfi_startproc
 997              		@ args = 0, pretend = 0, frame = 0
 998              		@ frame_needed = 0, uses_anonymous_args = 0
 999              	.LVL85:
 1000 0000 38B5     		push	{r3, r4, r5, lr}
 1001              	.LCFI20:
 1002              		.cfi_def_cfa_offset 16
 1003              		.cfi_offset 3, -16
 1004              		.cfi_offset 4, -12
 1005              		.cfi_offset 5, -8
 1006              		.cfi_offset 14, -4
 1007 0002 0546     		mov	r5, r0
 1008              	.LVL86:
 422:hardware/LCD/ili9341.c **** 	u32 index=0;      
 423:hardware/LCD/ili9341.c **** 	u32 totalpoint=lcddev.width; 
 1009              		.loc 1 423 0
 1010 0004 094B     		ldr	r3, .L86
 1011 0006 1A88     		ldrh	r2, [r3]
 1012              	.LVL87:
 424:hardware/LCD/ili9341.c **** 	totalpoint*=lcddev.height; 			//得到总点数
 1013              		.loc 1 424 0
 1014 0008 5C88     		ldrh	r4, [r3, #2]
 1015 000a 04FB02F4 		mul	r4, r4, r2
 1016              	.LVL88:
 425:hardware/LCD/ili9341.c **** 	LCD_SetCursor(0x00,0x0000);			//设置光标位置 
 1017              		.loc 1 425 0
 1018 000e 0021     		movs	r1, #0
 1019 0010 0846     		mov	r0, r1
ARM GAS  /tmp/ccBPN2mg.s 			page 26


 1020              	.LVL89:
 1021 0012 FFF7FEFF 		bl	LCD_SetCursor
 1022              	.LVL90:
 426:hardware/LCD/ili9341.c **** 	LCD_WriteRAM_Prepare();     		//开始写入GRAM	 	  
 1023              		.loc 1 426 0
 1024 0016 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1025              	.LVL91:
 427:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1026              		.loc 1 427 0
 1027 001a 0022     		movs	r2, #0
 1028 001c 03E0     		b	.L83
 1029              	.LVL92:
 1030              	.L84:
 428:hardware/LCD/ili9341.c **** 	{
 429:hardware/LCD/ili9341.c **** 		LCD->LCD_RAM=color;	
 1031              		.loc 1 429 0 discriminator 3
 1032 001e ABB2     		uxth	r3, r5
 1033 0020 0349     		ldr	r1, .L86+4
 1034 0022 4B80     		strh	r3, [r1, #2]	@ movhi
 427:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1035              		.loc 1 427 0 discriminator 3
 1036 0024 0132     		adds	r2, r2, #1
 1037              	.LVL93:
 1038              	.L83:
 427:hardware/LCD/ili9341.c **** 	for(index=0;index<totalpoint;index++)
 1039              		.loc 1 427 0 is_stmt 0 discriminator 1
 1040 0026 A242     		cmp	r2, r4
 1041 0028 F9D3     		bcc	.L84
 430:hardware/LCD/ili9341.c **** 	} 
 431:hardware/LCD/ili9341.c **** }  
 1042              		.loc 1 431 0 is_stmt 1
 1043 002a 38BD     		pop	{r3, r4, r5, pc}
 1044              	.LVL94:
 1045              	.L87:
 1046              		.align	2
 1047              	.L86:
 1048 002c 00000000 		.word	lcddev
 1049 0030 FEFF0760 		.word	1611137022
 1050              		.cfi_endproc
 1051              	.LFE155:
 1053              		.section	.text.LCD_Init,"ax",%progbits
 1054              		.align	1
 1055              		.global	LCD_Init
 1056              		.syntax unified
 1057              		.thumb
 1058              		.thumb_func
 1059              		.fpu fpv4-sp-d16
 1061              	LCD_Init:
 1062              	.LFB154:
 265:hardware/LCD/ili9341.c **** 	GPIO_InitTypeDef GPIO_Initure;
 1063              		.loc 1 265 0
 1064              		.cfi_startproc
 1065              		@ args = 0, pretend = 0, frame = 80
 1066              		@ frame_needed = 0, uses_anonymous_args = 0
 1067 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1068              	.LCFI21:
 1069              		.cfi_def_cfa_offset 28
ARM GAS  /tmp/ccBPN2mg.s 			page 27


 1070              		.cfi_offset 4, -28
 1071              		.cfi_offset 5, -24
 1072              		.cfi_offset 6, -20
 1073              		.cfi_offset 7, -16
 1074              		.cfi_offset 8, -12
 1075              		.cfi_offset 9, -8
 1076              		.cfi_offset 14, -4
 1077 0004 95B0     		sub	sp, sp, #84
 1078              	.LCFI22:
 1079              		.cfi_def_cfa_offset 112
 1080              	.LBB5:
 270:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pin=GPIO_PIN_5|GPIO_PIN_6;  //PB5,背光控制。PB6,供电控制
 1081              		.loc 1 270 0
 1082 0006 0024     		movs	r4, #0
 1083 0008 0094     		str	r4, [sp]
 1084 000a BC4B     		ldr	r3, .L90
 1085 000c 1A6B     		ldr	r2, [r3, #48]
 1086 000e 42F00202 		orr	r2, r2, #2
 1087 0012 1A63     		str	r2, [r3, #48]
 1088 0014 1B6B     		ldr	r3, [r3, #48]
 1089 0016 03F00203 		and	r3, r3, #2
 1090 001a 0093     		str	r3, [sp]
 1091 001c 009B     		ldr	r3, [sp]
 1092              	.LBE5:
 271:hardware/LCD/ili9341.c **** 	GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 1093              		.loc 1 271 0
 1094 001e 6023     		movs	r3, #96
 1095 0020 0F93     		str	r3, [sp, #60]
 272:hardware/LCD/ili9341.c **** 	GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 1096              		.loc 1 272 0
 1097 0022 0126     		movs	r6, #1
 1098 0024 1096     		str	r6, [sp, #64]
 273:hardware/LCD/ili9341.c **** 	GPIO_Initure.Speed=GPIO_SPEED_HIGH;     //高速
 1099              		.loc 1 273 0
 1100 0026 1196     		str	r6, [sp, #68]
 274:hardware/LCD/ili9341.c **** 	HAL_GPIO_Init(GPIOB,&GPIO_Initure); 
 1101              		.loc 1 274 0
 1102 0028 4FF00309 		mov	r9, #3
 1103 002c CDF84890 		str	r9, [sp, #72]
 275:hardware/LCD/ili9341.c ****     
 1104              		.loc 1 275 0
 1105 0030 0FA9     		add	r1, sp, #60
 1106 0032 B348     		ldr	r0, .L90+4
 1107 0034 FFF7FEFF 		bl	HAL_GPIO_Init
 1108              	.LVL95:
 277:hardware/LCD/ili9341.c **** 	SRAM_Handler.Extended=FMC_NORSRAM_EXTENDED_DEVICE;    
 1109              		.loc 1 277 0
 1110 0038 B248     		ldr	r0, .L90+8
 1111 003a 4FF02043 		mov	r3, #-1610612736
 1112 003e 0360     		str	r3, [r0]
 278:hardware/LCD/ili9341.c ****     
 1113              		.loc 1 278 0
 1114 0040 03F58273 		add	r3, r3, #260
 1115 0044 4360     		str	r3, [r0, #4]
 280:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.DataAddressMux=FMC_DATA_ADDRESS_MUX_DISABLE; //地址/数据线不复用
 1116              		.loc 1 280 0
 1117 0046 8460     		str	r4, [r0, #8]
ARM GAS  /tmp/ccBPN2mg.s 			page 28


 281:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryType=FMC_MEMORY_TYPE_SRAM;   //SRAM
 1118              		.loc 1 281 0
 1119 0048 C460     		str	r4, [r0, #12]
 282:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.MemoryDataWidth=FMC_NORSRAM_MEM_BUS_WIDTH_16; //16位数据宽度
 1120              		.loc 1 282 0
 1121 004a 0461     		str	r4, [r0, #16]
 283:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.BurstAccessMode=FMC_BURST_ACCESS_MODE_DISABLE; //是否使能突发访问,仅对
 1122              		.loc 1 283 0
 1123 004c 4FF01008 		mov	r8, #16
 1124 0050 C0F81480 		str	r8, [r0, #20]
 284:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalPolarity=FMC_WAIT_SIGNAL_POLARITY_LOW;//等待信号的极性,仅在
 1125              		.loc 1 284 0
 1126 0054 8461     		str	r4, [r0, #24]
 285:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignalActive=FMC_WAIT_TIMING_BEFORE_WS;   //存储器是在等待周期之
 1127              		.loc 1 285 0
 1128 0056 C461     		str	r4, [r0, #28]
 286:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteOperation=FMC_WRITE_OPERATION_ENABLE;    //存储器写使能
 1129              		.loc 1 286 0
 1130 0058 4462     		str	r4, [r0, #36]
 287:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WaitSignal=FMC_WAIT_SIGNAL_DISABLE;           //等待使能位,此处未用到
 1131              		.loc 1 287 0
 1132 005a 4FF48053 		mov	r3, #4096
 1133 005e 8362     		str	r3, [r0, #40]
 288:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ExtendedMode=FMC_EXTENDED_MODE_ENABLE;        //读写使用不同的时序
 1134              		.loc 1 288 0
 1135 0060 C462     		str	r4, [r0, #44]
 289:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.AsynchronousWait=FMC_ASYNCHRONOUS_WAIT_DISABLE;//是否使能同步传输模式
 1136              		.loc 1 289 0
 1137 0062 4FF48043 		mov	r3, #16384
 1138 0066 0363     		str	r3, [r0, #48]
 290:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.WriteBurst=FMC_WRITE_BURST_DISABLE;           //禁止突发写
 1139              		.loc 1 290 0
 1140 0068 4463     		str	r4, [r0, #52]
 291:hardware/LCD/ili9341.c **** 	SRAM_Handler.Init.ContinuousClock=FMC_CONTINUOUS_CLOCK_SYNC_ASYNC;
 1141              		.loc 1 291 0
 1142 006a 8463     		str	r4, [r0, #56]
 292:hardware/LCD/ili9341.c ****     
 1143              		.loc 1 292 0
 1144 006c 4FF48013 		mov	r3, #1048576
 1145 0070 C363     		str	r3, [r0, #60]
 295:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AddressHoldTime=0x00;
 1146              		.loc 1 295 0
 1147 0072 0F25     		movs	r5, #15
 1148 0074 0895     		str	r5, [sp, #32]
 296:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.DataSetupTime=0x46;           //数据保存时间(DATAST)为70个HCLK	=5.5*70=38
 1149              		.loc 1 296 0
 1150 0076 0994     		str	r4, [sp, #36]
 297:hardware/LCD/ili9341.c **** 	FMC_ReadWriteTim.AccessMode=FMC_ACCESS_MODE_A; //模式A
 1151              		.loc 1 297 0
 1152 0078 4623     		movs	r3, #70
 1153 007a 0A93     		str	r3, [sp, #40]
 298:hardware/LCD/ili9341.c **** 	//FMC写时序控制寄存器
 1154              		.loc 1 298 0
 1155 007c 0E94     		str	r4, [sp, #56]
 300:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AddressHoldTime=0x00;
 1156              		.loc 1 300 0
 1157 007e 0195     		str	r5, [sp, #4]
ARM GAS  /tmp/ccBPN2mg.s 			page 29


 301:hardware/LCD/ili9341.c **** 	FMC_WriteTim.DataSetupTime=0x0F;               //数据保存时间(DATAST)为5.5ns*15个HCLK=82.5
 1158              		.loc 1 301 0
 1159 0080 0294     		str	r4, [sp, #8]
 302:hardware/LCD/ili9341.c **** 	FMC_WriteTim.AccessMode=FMC_ACCESS_MODE_A;     //模式A
 1160              		.loc 1 302 0
 1161 0082 0395     		str	r5, [sp, #12]
 303:hardware/LCD/ili9341.c **** 	HAL_SRAM_Init(&SRAM_Handler,&FMC_ReadWriteTim,&FMC_WriteTim);		
 1162              		.loc 1 303 0
 1163 0084 0794     		str	r4, [sp, #28]
 304:hardware/LCD/ili9341.c **** 	delay_ms(50); // delay 50 ms 
 1164              		.loc 1 304 0
 1165 0086 01AA     		add	r2, sp, #4
 1166 0088 08A9     		add	r1, sp, #32
 1167 008a FFF7FEFF 		bl	HAL_SRAM_Init
 1168              	.LVL96:
 305:hardware/LCD/ili9341.c **** 	
 1169              		.loc 1 305 0
 1170 008e 3220     		movs	r0, #50
 1171 0090 FFF7FEFF 		bl	delay_ms
 1172              	.LVL97:
 308:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//dummy read 	
 1173              		.loc 1 308 0
 1174 0094 D320     		movs	r0, #211
 1175 0096 FFF7FEFF 		bl	LCD_WR_REG
 1176              	.LVL98:
 309:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();	//读到0X00
 1177              		.loc 1 309 0
 1178 009a FFF7FEFF 		bl	LCD_RD_DATA
 1179              	.LVL99:
 1180 009e 9A4F     		ldr	r7, .L90+12
 1181 00a0 B880     		strh	r0, [r7, #4]	@ movhi
 310:hardware/LCD/ili9341.c **** 	lcddev.id=LCD_RD_DATA();   	//读取93								   
 1182              		.loc 1 310 0
 1183 00a2 FFF7FEFF 		bl	LCD_RD_DATA
 1184              	.LVL100:
 1185 00a6 B880     		strh	r0, [r7, #4]	@ movhi
 311:hardware/LCD/ili9341.c **** 	lcddev.id<<=8;
 1186              		.loc 1 311 0
 1187 00a8 FFF7FEFF 		bl	LCD_RD_DATA
 1188              	.LVL101:
 312:hardware/LCD/ili9341.c **** 	lcddev.id|=LCD_RD_DATA();  	//读取41 	 
 1189              		.loc 1 312 0
 1190 00ac 0002     		lsls	r0, r0, #8
 1191 00ae B880     		strh	r0, [r7, #4]	@ movhi
 313:hardware/LCD/ili9341.c **** 	/*rt_kprintf(" LCD ID:%x\r\n",lcddev.id); //打印LCD ID */
 1192              		.loc 1 313 0
 1193 00b0 FFF7FEFF 		bl	LCD_RD_DATA
 1194              	.LVL102:
 1195 00b4 BB88     		ldrh	r3, [r7, #4]
 1196 00b6 1843     		orrs	r0, r0, r3
 1197 00b8 B880     		strh	r0, [r7, #4]	@ movhi
 317:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1198              		.loc 1 317 0
 1199 00ba CF20     		movs	r0, #207
 1200 00bc FFF7FEFF 		bl	LCD_WR_REG
 1201              	.LVL103:
 318:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xC1); 
ARM GAS  /tmp/ccBPN2mg.s 			page 30


 1202              		.loc 1 318 0
 1203 00c0 2046     		mov	r0, r4
 1204 00c2 FFF7FEFF 		bl	LCD_WR_DATA
 1205              	.LVL104:
 319:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X30); 
 1206              		.loc 1 319 0
 1207 00c6 C120     		movs	r0, #193
 1208 00c8 FFF7FEFF 		bl	LCD_WR_DATA
 1209              	.LVL105:
 320:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xED);  
 1210              		.loc 1 320 0
 1211 00cc 3020     		movs	r0, #48
 1212 00ce FFF7FEFF 		bl	LCD_WR_DATA
 1213              	.LVL106:
 321:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x64); 
 1214              		.loc 1 321 0
 1215 00d2 ED20     		movs	r0, #237
 1216 00d4 FFF7FEFF 		bl	LCD_WR_REG
 1217              	.LVL107:
 322:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x03); 
 1218              		.loc 1 322 0
 1219 00d8 6420     		movs	r0, #100
 1220 00da FFF7FEFF 		bl	LCD_WR_DATA
 1221              	.LVL108:
 323:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X12); 
 1222              		.loc 1 323 0
 1223 00de 4846     		mov	r0, r9
 1224 00e0 FFF7FEFF 		bl	LCD_WR_DATA
 1225              	.LVL109:
 324:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0X81); 
 1226              		.loc 1 324 0
 1227 00e4 1220     		movs	r0, #18
 1228 00e6 FFF7FEFF 		bl	LCD_WR_DATA
 1229              	.LVL110:
 325:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE8);  
 1230              		.loc 1 325 0
 1231 00ea 8120     		movs	r0, #129
 1232 00ec FFF7FEFF 		bl	LCD_WR_DATA
 1233              	.LVL111:
 326:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x85); 
 1234              		.loc 1 326 0
 1235 00f0 E820     		movs	r0, #232
 1236 00f2 FFF7FEFF 		bl	LCD_WR_REG
 1237              	.LVL112:
 327:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 1238              		.loc 1 327 0
 1239 00f6 8520     		movs	r0, #133
 1240 00f8 FFF7FEFF 		bl	LCD_WR_DATA
 1241              	.LVL113:
 328:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x7A); 
 1242              		.loc 1 328 0
 1243 00fc 4046     		mov	r0, r8
 1244 00fe FFF7FEFF 		bl	LCD_WR_DATA
 1245              	.LVL114:
 329:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xCB);  
 1246              		.loc 1 329 0
 1247 0102 7A20     		movs	r0, #122
ARM GAS  /tmp/ccBPN2mg.s 			page 31


 1248 0104 FFF7FEFF 		bl	LCD_WR_DATA
 1249              	.LVL115:
 330:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x39); 
 1250              		.loc 1 330 0
 1251 0108 CB20     		movs	r0, #203
 1252 010a FFF7FEFF 		bl	LCD_WR_REG
 1253              	.LVL116:
 331:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2C); 
 1254              		.loc 1 331 0
 1255 010e 3920     		movs	r0, #57
 1256 0110 FFF7FEFF 		bl	LCD_WR_DATA
 1257              	.LVL117:
 332:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1258              		.loc 1 332 0
 1259 0114 2C20     		movs	r0, #44
 1260 0116 FFF7FEFF 		bl	LCD_WR_DATA
 1261              	.LVL118:
 333:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x34); 
 1262              		.loc 1 333 0
 1263 011a 2046     		mov	r0, r4
 1264 011c FFF7FEFF 		bl	LCD_WR_DATA
 1265              	.LVL119:
 334:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x02); 
 1266              		.loc 1 334 0
 1267 0120 3420     		movs	r0, #52
 1268 0122 FFF7FEFF 		bl	LCD_WR_DATA
 1269              	.LVL120:
 335:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF7);  
 1270              		.loc 1 335 0
 1271 0126 0220     		movs	r0, #2
 1272 0128 FFF7FEFF 		bl	LCD_WR_DATA
 1273              	.LVL121:
 336:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x20); 
 1274              		.loc 1 336 0
 1275 012c F720     		movs	r0, #247
 1276 012e FFF7FEFF 		bl	LCD_WR_REG
 1277              	.LVL122:
 337:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xEA);  
 1278              		.loc 1 337 0
 1279 0132 2020     		movs	r0, #32
 1280 0134 FFF7FEFF 		bl	LCD_WR_DATA
 1281              	.LVL123:
 338:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1282              		.loc 1 338 0
 1283 0138 EA20     		movs	r0, #234
 1284 013a FFF7FEFF 		bl	LCD_WR_REG
 1285              	.LVL124:
 339:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1286              		.loc 1 339 0
 1287 013e 2046     		mov	r0, r4
 1288 0140 FFF7FEFF 		bl	LCD_WR_DATA
 1289              	.LVL125:
 340:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC0);    //Power control 
 1290              		.loc 1 340 0
 1291 0144 2046     		mov	r0, r4
 1292 0146 FFF7FEFF 		bl	LCD_WR_DATA
 1293              	.LVL126:
ARM GAS  /tmp/ccBPN2mg.s 			page 32


 341:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1B);   //VRH[5:0] 
 1294              		.loc 1 341 0
 1295 014a C020     		movs	r0, #192
 1296 014c FFF7FEFF 		bl	LCD_WR_REG
 1297              	.LVL127:
 342:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC1);    //Power control 
 1298              		.loc 1 342 0
 1299 0150 1B20     		movs	r0, #27
 1300 0152 FFF7FEFF 		bl	LCD_WR_DATA
 1301              	.LVL128:
 343:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);   //SAP[2:0];BT[3:0] 
 1302              		.loc 1 343 0
 1303 0156 C120     		movs	r0, #193
 1304 0158 FFF7FEFF 		bl	LCD_WR_REG
 1305              	.LVL129:
 344:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC5);    //VCM control 
 1306              		.loc 1 344 0
 1307 015c 3046     		mov	r0, r6
 1308 015e FFF7FEFF 		bl	LCD_WR_DATA
 1309              	.LVL130:
 345:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3F
 1310              		.loc 1 345 0
 1311 0162 C520     		movs	r0, #197
 1312 0164 FFF7FEFF 		bl	LCD_WR_REG
 1313              	.LVL131:
 346:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x30); 	 //3C
 1314              		.loc 1 346 0
 1315 0168 3020     		movs	r0, #48
 1316 016a FFF7FEFF 		bl	LCD_WR_DATA
 1317              	.LVL132:
 347:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xC7);    //VCM control2 
 1318              		.loc 1 347 0
 1319 016e 3020     		movs	r0, #48
 1320 0170 FFF7FEFF 		bl	LCD_WR_DATA
 1321              	.LVL133:
 348:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XB7); 
 1322              		.loc 1 348 0
 1323 0174 C720     		movs	r0, #199
 1324 0176 FFF7FEFF 		bl	LCD_WR_REG
 1325              	.LVL134:
 349:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x36);    // Memory Access Control 
 1326              		.loc 1 349 0
 1327 017a B720     		movs	r0, #183
 1328 017c FFF7FEFF 		bl	LCD_WR_DATA
 1329              	.LVL135:
 350:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x48); 
 1330              		.loc 1 350 0
 1331 0180 3620     		movs	r0, #54
 1332 0182 FFF7FEFF 		bl	LCD_WR_REG
 1333              	.LVL136:
 351:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x3A);   
 1334              		.loc 1 351 0
 1335 0186 4820     		movs	r0, #72
 1336 0188 FFF7FEFF 		bl	LCD_WR_DATA
 1337              	.LVL137:
 352:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x55); 
 1338              		.loc 1 352 0
ARM GAS  /tmp/ccBPN2mg.s 			page 33


 1339 018c 3A20     		movs	r0, #58
 1340 018e FFF7FEFF 		bl	LCD_WR_REG
 1341              	.LVL138:
 353:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB1);   
 1342              		.loc 1 353 0
 1343 0192 5520     		movs	r0, #85
 1344 0194 FFF7FEFF 		bl	LCD_WR_DATA
 1345              	.LVL139:
 354:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);   
 1346              		.loc 1 354 0
 1347 0198 B120     		movs	r0, #177
 1348 019a FFF7FEFF 		bl	LCD_WR_REG
 1349              	.LVL140:
 355:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x1A); 
 1350              		.loc 1 355 0
 1351 019e 2046     		mov	r0, r4
 1352 01a0 FFF7FEFF 		bl	LCD_WR_DATA
 1353              	.LVL141:
 356:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xB6);    // Display Function Control 
 1354              		.loc 1 356 0
 1355 01a4 1A20     		movs	r0, #26
 1356 01a6 FFF7FEFF 		bl	LCD_WR_DATA
 1357              	.LVL142:
 357:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 1358              		.loc 1 357 0
 1359 01aa B620     		movs	r0, #182
 1360 01ac FFF7FEFF 		bl	LCD_WR_REG
 1361              	.LVL143:
 358:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xA2); 
 1362              		.loc 1 358 0
 1363 01b0 0A20     		movs	r0, #10
 1364 01b2 FFF7FEFF 		bl	LCD_WR_DATA
 1365              	.LVL144:
 359:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xF2);    // 3Gamma Function Disable 
 1366              		.loc 1 359 0
 1367 01b6 A220     		movs	r0, #162
 1368 01b8 FFF7FEFF 		bl	LCD_WR_DATA
 1369              	.LVL145:
 360:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1370              		.loc 1 360 0
 1371 01bc F220     		movs	r0, #242
 1372 01be FFF7FEFF 		bl	LCD_WR_REG
 1373              	.LVL146:
 361:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x26);    //Gamma curve selected 
 1374              		.loc 1 361 0
 1375 01c2 2046     		mov	r0, r4
 1376 01c4 FFF7FEFF 		bl	LCD_WR_DATA
 1377              	.LVL147:
 362:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01); 
 1378              		.loc 1 362 0
 1379 01c8 2620     		movs	r0, #38
 1380 01ca FFF7FEFF 		bl	LCD_WR_REG
 1381              	.LVL148:
 363:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0xE0);    //Set Gamma 
 1382              		.loc 1 363 0
 1383 01ce 3046     		mov	r0, r6
 1384 01d0 FFF7FEFF 		bl	LCD_WR_DATA
ARM GAS  /tmp/ccBPN2mg.s 			page 34


 1385              	.LVL149:
 364:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1386              		.loc 1 364 0
 1387 01d4 E020     		movs	r0, #224
 1388 01d6 FFF7FEFF 		bl	LCD_WR_REG
 1389              	.LVL150:
 365:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2A); 
 1390              		.loc 1 365 0
 1391 01da 2846     		mov	r0, r5
 1392 01dc FFF7FEFF 		bl	LCD_WR_DATA
 1393              	.LVL151:
 366:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x28); 
 1394              		.loc 1 366 0
 1395 01e0 2A20     		movs	r0, #42
 1396 01e2 FFF7FEFF 		bl	LCD_WR_DATA
 1397              	.LVL152:
 367:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 1398              		.loc 1 367 0
 1399 01e6 2820     		movs	r0, #40
 1400 01e8 FFF7FEFF 		bl	LCD_WR_DATA
 1401              	.LVL153:
 368:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0E); 
 1402              		.loc 1 368 0
 1403 01ec 0820     		movs	r0, #8
 1404 01ee FFF7FEFF 		bl	LCD_WR_DATA
 1405              	.LVL154:
 369:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x08); 
 1406              		.loc 1 369 0
 1407 01f2 0E20     		movs	r0, #14
 1408 01f4 FFF7FEFF 		bl	LCD_WR_DATA
 1409              	.LVL155:
 370:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x54); 
 1410              		.loc 1 370 0
 1411 01f8 0820     		movs	r0, #8
 1412 01fa FFF7FEFF 		bl	LCD_WR_DATA
 1413              	.LVL156:
 371:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0XA9); 
 1414              		.loc 1 371 0
 1415 01fe 5420     		movs	r0, #84
 1416 0200 FFF7FEFF 		bl	LCD_WR_DATA
 1417              	.LVL157:
 372:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x43); 
 1418              		.loc 1 372 0
 1419 0204 A920     		movs	r0, #169
 1420 0206 FFF7FEFF 		bl	LCD_WR_DATA
 1421              	.LVL158:
 373:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0A); 
 1422              		.loc 1 373 0
 1423 020a 4320     		movs	r0, #67
 1424 020c FFF7FEFF 		bl	LCD_WR_DATA
 1425              	.LVL159:
 374:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1426              		.loc 1 374 0
 1427 0210 0A20     		movs	r0, #10
 1428 0212 FFF7FEFF 		bl	LCD_WR_DATA
 1429              	.LVL160:
 375:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
ARM GAS  /tmp/ccBPN2mg.s 			page 35


 1430              		.loc 1 375 0
 1431 0216 2846     		mov	r0, r5
 1432 0218 FFF7FEFF 		bl	LCD_WR_DATA
 1433              	.LVL161:
 376:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1434              		.loc 1 376 0
 1435 021c 2046     		mov	r0, r4
 1436 021e FFF7FEFF 		bl	LCD_WR_DATA
 1437              	.LVL162:
 377:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1438              		.loc 1 377 0
 1439 0222 2046     		mov	r0, r4
 1440 0224 FFF7FEFF 		bl	LCD_WR_DATA
 1441              	.LVL163:
 378:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 		 
 1442              		.loc 1 378 0
 1443 0228 2046     		mov	r0, r4
 1444 022a FFF7FEFF 		bl	LCD_WR_DATA
 1445              	.LVL164:
 379:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0XE1);    //Set Gamma 
 1446              		.loc 1 379 0
 1447 022e 2046     		mov	r0, r4
 1448 0230 FFF7FEFF 		bl	LCD_WR_DATA
 1449              	.LVL165:
 380:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00); 
 1450              		.loc 1 380 0
 1451 0234 E120     		movs	r0, #225
 1452 0236 FFF7FEFF 		bl	LCD_WR_REG
 1453              	.LVL166:
 381:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x15); 
 1454              		.loc 1 381 0
 1455 023a 2046     		mov	r0, r4
 1456 023c FFF7FEFF 		bl	LCD_WR_DATA
 1457              	.LVL167:
 382:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x17); 
 1458              		.loc 1 382 0
 1459 0240 1520     		movs	r0, #21
 1460 0242 FFF7FEFF 		bl	LCD_WR_DATA
 1461              	.LVL168:
 383:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x07); 
 1462              		.loc 1 383 0
 1463 0246 1720     		movs	r0, #23
 1464 0248 FFF7FEFF 		bl	LCD_WR_DATA
 1465              	.LVL169:
 384:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x11); 
 1466              		.loc 1 384 0
 1467 024c 0720     		movs	r0, #7
 1468 024e FFF7FEFF 		bl	LCD_WR_DATA
 1469              	.LVL170:
 385:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x06); 
 1470              		.loc 1 385 0
 1471 0252 1120     		movs	r0, #17
 1472 0254 FFF7FEFF 		bl	LCD_WR_DATA
 1473              	.LVL171:
 386:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x2B); 
 1474              		.loc 1 386 0
 1475 0258 0620     		movs	r0, #6
ARM GAS  /tmp/ccBPN2mg.s 			page 36


 1476 025a FFF7FEFF 		bl	LCD_WR_DATA
 1477              	.LVL172:
 387:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x56); 
 1478              		.loc 1 387 0
 1479 025e 2B20     		movs	r0, #43
 1480 0260 FFF7FEFF 		bl	LCD_WR_DATA
 1481              	.LVL173:
 388:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3C); 
 1482              		.loc 1 388 0
 1483 0264 5620     		movs	r0, #86
 1484 0266 FFF7FEFF 		bl	LCD_WR_DATA
 1485              	.LVL174:
 389:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x05); 
 1486              		.loc 1 389 0
 1487 026a 3C20     		movs	r0, #60
 1488 026c FFF7FEFF 		bl	LCD_WR_DATA
 1489              	.LVL175:
 390:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x10); 
 1490              		.loc 1 390 0
 1491 0270 0520     		movs	r0, #5
 1492 0272 FFF7FEFF 		bl	LCD_WR_DATA
 1493              	.LVL176:
 391:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1494              		.loc 1 391 0
 1495 0276 4046     		mov	r0, r8
 1496 0278 FFF7FEFF 		bl	LCD_WR_DATA
 1497              	.LVL177:
 392:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 1498              		.loc 1 392 0
 1499 027c 2846     		mov	r0, r5
 1500 027e FFF7FEFF 		bl	LCD_WR_DATA
 1501              	.LVL178:
 393:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3F); 
 1502              		.loc 1 393 0
 1503 0282 3F20     		movs	r0, #63
 1504 0284 FFF7FEFF 		bl	LCD_WR_DATA
 1505              	.LVL179:
 394:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x0F); 
 1506              		.loc 1 394 0
 1507 0288 3F20     		movs	r0, #63
 1508 028a FFF7FEFF 		bl	LCD_WR_DATA
 1509              	.LVL180:
 395:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2B); 
 1510              		.loc 1 395 0
 1511 028e 2846     		mov	r0, r5
 1512 0290 FFF7FEFF 		bl	LCD_WR_DATA
 1513              	.LVL181:
 396:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1514              		.loc 1 396 0
 1515 0294 2B20     		movs	r0, #43
 1516 0296 FFF7FEFF 		bl	LCD_WR_REG
 1517              	.LVL182:
 397:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1518              		.loc 1 397 0
 1519 029a 2046     		mov	r0, r4
 1520 029c FFF7FEFF 		bl	LCD_WR_DATA
 1521              	.LVL183:
ARM GAS  /tmp/ccBPN2mg.s 			page 37


 398:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x01);
 1522              		.loc 1 398 0
 1523 02a0 2046     		mov	r0, r4
 1524 02a2 FFF7FEFF 		bl	LCD_WR_DATA
 1525              	.LVL184:
 399:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x3f);
 1526              		.loc 1 399 0
 1527 02a6 3046     		mov	r0, r6
 1528 02a8 FFF7FEFF 		bl	LCD_WR_DATA
 1529              	.LVL185:
 400:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x2A); 
 1530              		.loc 1 400 0
 1531 02ac 3F20     		movs	r0, #63
 1532 02ae FFF7FEFF 		bl	LCD_WR_DATA
 1533              	.LVL186:
 401:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1534              		.loc 1 401 0
 1535 02b2 2A20     		movs	r0, #42
 1536 02b4 FFF7FEFF 		bl	LCD_WR_REG
 1537              	.LVL187:
 402:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1538              		.loc 1 402 0
 1539 02b8 2046     		mov	r0, r4
 1540 02ba FFF7FEFF 		bl	LCD_WR_DATA
 1541              	.LVL188:
 403:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0x00);
 1542              		.loc 1 403 0
 1543 02be 2046     		mov	r0, r4
 1544 02c0 FFF7FEFF 		bl	LCD_WR_DATA
 1545              	.LVL189:
 404:hardware/LCD/ili9341.c **** 		LCD_WR_DATA(0xef);	 
 1546              		.loc 1 404 0
 1547 02c4 2046     		mov	r0, r4
 1548 02c6 FFF7FEFF 		bl	LCD_WR_DATA
 1549              	.LVL190:
 405:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x11); //Exit Sleep
 1550              		.loc 1 405 0
 1551 02ca EF20     		movs	r0, #239
 1552 02cc FFF7FEFF 		bl	LCD_WR_DATA
 1553              	.LVL191:
 406:hardware/LCD/ili9341.c **** 		delay_ms(120);
 1554              		.loc 1 406 0
 1555 02d0 1120     		movs	r0, #17
 1556 02d2 FFF7FEFF 		bl	LCD_WR_REG
 1557              	.LVL192:
 407:hardware/LCD/ili9341.c **** 		LCD_WR_REG(0x29); //display on
 1558              		.loc 1 407 0
 1559 02d6 7820     		movs	r0, #120
 1560 02d8 FFF7FEFF 		bl	delay_ms
 1561              	.LVL193:
 408:hardware/LCD/ili9341.c **** 		
 1562              		.loc 1 408 0
 1563 02dc 2920     		movs	r0, #41
 1564 02de FFF7FEFF 		bl	LCD_WR_REG
 1565              	.LVL194:
 410:hardware/LCD/ili9341.c **** 	LCD_LED=0;				//点亮背光
 1566              		.loc 1 410 0
ARM GAS  /tmp/ccBPN2mg.s 			page 38


 1567 02e2 2046     		mov	r0, r4
 1568 02e4 FFF7FEFF 		bl	LCD_Display_Dir
 1569              	.LVL195:
 411:hardware/LCD/ili9341.c **** 	LCD_Clear(GBLUE);
 1570              		.loc 1 411 0
 1571 02e8 084B     		ldr	r3, .L90+16
 1572 02ea 1C60     		str	r4, [r3]
 412:hardware/LCD/ili9341.c **** }  
 1573              		.loc 1 412 0
 1574 02ec 40F2FF70 		movw	r0, #2047
 1575 02f0 FFF7FEFF 		bl	LCD_Clear
 1576              	.LVL196:
 413:hardware/LCD/ili9341.c **** #ifdef BSP_USING_ILI9341
 1577              		.loc 1 413 0
 1578 02f4 15B0     		add	sp, sp, #84
 1579              	.LCFI23:
 1580              		.cfi_def_cfa_offset 28
 1581              		@ sp needed
 1582 02f6 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1583              	.L91:
 1584 02fa 00BF     		.align	2
 1585              	.L90:
 1586 02fc 00380240 		.word	1073887232
 1587 0300 00040240 		.word	1073873920
 1588 0304 00000000 		.word	SRAM_Handler
 1589 0308 00000000 		.word	lcddev
 1590 030c 94824042 		.word	1111523988
 1591              		.cfi_endproc
 1592              	.LFE154:
 1594              		.section	.text.LCD_Fill,"ax",%progbits
 1595              		.align	1
 1596              		.global	LCD_Fill
 1597              		.syntax unified
 1598              		.thumb
 1599              		.thumb_func
 1600              		.fpu fpv4-sp-d16
 1602              	LCD_Fill:
 1603              	.LFB156:
 432:hardware/LCD/ili9341.c **** //在指定区域内填充单个颜色
 433:hardware/LCD/ili9341.c **** //(sx,sy),(ex,ey):填充矩形对角坐标,区域大小为:(ex-sx+1)*(ey-sy+1)   
 434:hardware/LCD/ili9341.c **** //color:要填充的颜色
 435:hardware/LCD/ili9341.c **** void LCD_Fill(u16 sx,u16 sy,u16 ex,u16 ey,u32 color)
 436:hardware/LCD/ili9341.c **** {          
 1604              		.loc 1 436 0
 1605              		.cfi_startproc
 1606              		@ args = 4, pretend = 0, frame = 0
 1607              		@ frame_needed = 0, uses_anonymous_args = 0
 1608              	.LVL197:
 1609 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1610              	.LCFI24:
 1611              		.cfi_def_cfa_offset 24
 1612              		.cfi_offset 4, -24
 1613              		.cfi_offset 5, -20
 1614              		.cfi_offset 6, -16
 1615              		.cfi_offset 7, -12
 1616              		.cfi_offset 8, -8
 1617              		.cfi_offset 14, -4
ARM GAS  /tmp/ccBPN2mg.s 			page 39


 1618 0004 0746     		mov	r7, r0
 1619 0006 0E46     		mov	r6, r1
 1620 0008 9846     		mov	r8, r3
 1621 000a 069D     		ldr	r5, [sp, #24]
 1622              	.LVL198:
 437:hardware/LCD/ili9341.c **** 	u16 i,j;
 438:hardware/LCD/ili9341.c **** 	u16 xlen=0; 
 439:hardware/LCD/ili9341.c **** 	xlen=ex-sx+1;	 
 1623              		.loc 1 439 0
 1624 000c 141A     		subs	r4, r2, r0
 1625 000e A4B2     		uxth	r4, r4
 1626 0010 0134     		adds	r4, r4, #1
 1627 0012 A4B2     		uxth	r4, r4
 1628              	.LVL199:
 440:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1629              		.loc 1 440 0
 1630 0014 08E0     		b	.L93
 1631              	.LVL200:
 1632              	.L95:
 441:hardware/LCD/ili9341.c **** 	{
 442:hardware/LCD/ili9341.c **** 		LCD_SetCursor(sx,i);      				//设置光标位置 
 443:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     			//开始写入GRAM	  
 444:hardware/LCD/ili9341.c **** 		for(j=0;j<xlen;j++)LCD->LCD_RAM=color;	//显示颜色 	    
 1633              		.loc 1 444 0 discriminator 3
 1634 0016 A9B2     		uxth	r1, r5
 1635 0018 094A     		ldr	r2, .L99
 1636 001a 5180     		strh	r1, [r2, #2]	@ movhi
 1637 001c 0133     		adds	r3, r3, #1
 1638              	.LVL201:
 1639 001e 9BB2     		uxth	r3, r3
 1640              	.LVL202:
 1641              	.L94:
 1642              		.loc 1 444 0 is_stmt 0 discriminator 1
 1643 0020 A342     		cmp	r3, r4
 1644 0022 F8D3     		bcc	.L95
 440:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1645              		.loc 1 440 0 is_stmt 1 discriminator 2
 1646 0024 0136     		adds	r6, r6, #1
 1647              	.LVL203:
 1648 0026 B6B2     		uxth	r6, r6
 1649              	.LVL204:
 1650              	.L93:
 440:hardware/LCD/ili9341.c **** 	for(i=sy;i<=ey;i++)
 1651              		.loc 1 440 0 is_stmt 0 discriminator 1
 1652 0028 4645     		cmp	r6, r8
 1653 002a 07D8     		bhi	.L98
 442:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     			//开始写入GRAM	  
 1654              		.loc 1 442 0 is_stmt 1
 1655 002c 3146     		mov	r1, r6
 1656 002e 3846     		mov	r0, r7
 1657 0030 FFF7FEFF 		bl	LCD_SetCursor
 1658              	.LVL205:
 443:hardware/LCD/ili9341.c **** 		for(j=0;j<xlen;j++)LCD->LCD_RAM=color;	//显示颜色 	    
 1659              		.loc 1 443 0
 1660 0034 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1661              	.LVL206:
 1662              		.loc 1 444 0
ARM GAS  /tmp/ccBPN2mg.s 			page 40


 1663 0038 0023     		movs	r3, #0
 1664 003a F1E7     		b	.L94
 1665              	.LVL207:
 1666              	.L98:
 445:hardware/LCD/ili9341.c **** 	}  
 446:hardware/LCD/ili9341.c **** }  
 1667              		.loc 1 446 0
 1668 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1669              	.LVL208:
 1670              	.L100:
 1671              		.align	2
 1672              	.L99:
 1673 0040 FEFF0760 		.word	1611137022
 1674              		.cfi_endproc
 1675              	.LFE156:
 1677              		.section	.text.LCD_Color_Fill,"ax",%progbits
 1678              		.align	1
 1679              		.global	LCD_Color_Fill
 1680              		.syntax unified
 1681              		.thumb
 1682              		.thumb_func
 1683              		.fpu fpv4-sp-d16
 1685              	LCD_Color_Fill:
 1686              	.LFB157:
 447:hardware/LCD/ili9341.c **** //在指定区域内填充指定颜色块			 
 448:hardware/LCD/ili9341.c **** //(sx,sy),(ex,ey):填充矩形对角坐标,区域大小为:(ex-sx+1)*(ey-sy+1)   
 449:hardware/LCD/ili9341.c **** //color:要填充的颜色
 450:hardware/LCD/ili9341.c **** void LCD_Color_Fill(u16 sx,u16 sy,u16 ex,u16 ey,u16 *color)
 451:hardware/LCD/ili9341.c **** {  
 1687              		.loc 1 451 0
 1688              		.cfi_startproc
 1689              		@ args = 4, pretend = 0, frame = 0
 1690              		@ frame_needed = 0, uses_anonymous_args = 0
 1691              	.LVL209:
 1692 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1693              	.LCFI25:
 1694              		.cfi_def_cfa_offset 32
 1695              		.cfi_offset 3, -32
 1696              		.cfi_offset 4, -28
 1697              		.cfi_offset 5, -24
 1698              		.cfi_offset 6, -20
 1699              		.cfi_offset 7, -16
 1700              		.cfi_offset 8, -12
 1701              		.cfi_offset 9, -8
 1702              		.cfi_offset 14, -4
 1703 0004 8146     		mov	r9, r0
 1704 0006 8846     		mov	r8, r1
 1705 0008 089E     		ldr	r6, [sp, #32]
 452:hardware/LCD/ili9341.c **** 	u16 height,width;
 453:hardware/LCD/ili9341.c **** 	u16 i,j; 
 454:hardware/LCD/ili9341.c **** 	width=ex-sx+1; 			//得到填充的宽度
 1706              		.loc 1 454 0
 1707 000a 141A     		subs	r4, r2, r0
 1708 000c A4B2     		uxth	r4, r4
 1709 000e 0134     		adds	r4, r4, #1
 1710 0010 A4B2     		uxth	r4, r4
 1711              	.LVL210:
ARM GAS  /tmp/ccBPN2mg.s 			page 41


 455:hardware/LCD/ili9341.c **** 	height=ey-sy+1;			//高度
 1712              		.loc 1 455 0
 1713 0012 5F1A     		subs	r7, r3, r1
 1714 0014 BFB2     		uxth	r7, r7
 1715 0016 0137     		adds	r7, r7, #1
 1716 0018 BFB2     		uxth	r7, r7
 1717              	.LVL211:
 456:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1718              		.loc 1 456 0
 1719 001a 0025     		movs	r5, #0
 1720 001c 0BE0     		b	.L102
 1721              	.LVL212:
 1722              	.L104:
 457:hardware/LCD/ili9341.c **** 	{
 458:hardware/LCD/ili9341.c **** 		LCD_SetCursor(sx,sy+i);   	//设置光标位置 
 459:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     //开始写入GRAM
 460:hardware/LCD/ili9341.c **** 		for(j=0;j<width;j++)LCD->LCD_RAM=color[i*width+j];//写入数据 
 1723              		.loc 1 460 0 discriminator 3
 1724 001e 04FB0532 		mla	r2, r4, r5, r3
 1725 0022 36F81210 		ldrh	r1, [r6, r2, lsl #1]
 1726 0026 0B4A     		ldr	r2, .L108
 1727 0028 5180     		strh	r1, [r2, #2]	@ movhi
 1728 002a 0133     		adds	r3, r3, #1
 1729              	.LVL213:
 1730 002c 9BB2     		uxth	r3, r3
 1731              	.LVL214:
 1732              	.L103:
 1733              		.loc 1 460 0 is_stmt 0 discriminator 1
 1734 002e A342     		cmp	r3, r4
 1735 0030 F5D3     		bcc	.L104
 456:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1736              		.loc 1 456 0 is_stmt 1 discriminator 2
 1737 0032 0135     		adds	r5, r5, #1
 1738              	.LVL215:
 1739 0034 ADB2     		uxth	r5, r5
 1740              	.LVL216:
 1741              	.L102:
 456:hardware/LCD/ili9341.c **** 	for(i=0;i<height;i++)
 1742              		.loc 1 456 0 is_stmt 0 discriminator 1
 1743 0036 BD42     		cmp	r5, r7
 1744 0038 09D2     		bcs	.L107
 458:hardware/LCD/ili9341.c **** 		LCD_WriteRAM_Prepare();     //开始写入GRAM
 1745              		.loc 1 458 0 is_stmt 1
 1746 003a 05EB0801 		add	r1, r5, r8
 1747 003e 89B2     		uxth	r1, r1
 1748 0040 4846     		mov	r0, r9
 1749 0042 FFF7FEFF 		bl	LCD_SetCursor
 1750              	.LVL217:
 459:hardware/LCD/ili9341.c **** 		for(j=0;j<width;j++)LCD->LCD_RAM=color[i*width+j];//写入数据 
 1751              		.loc 1 459 0
 1752 0046 FFF7FEFF 		bl	LCD_WriteRAM_Prepare
 1753              	.LVL218:
 1754              		.loc 1 460 0
 1755 004a 0023     		movs	r3, #0
 1756 004c EFE7     		b	.L103
 1757              	.LVL219:
 1758              	.L107:
ARM GAS  /tmp/ccBPN2mg.s 			page 42


 461:hardware/LCD/ili9341.c **** 	} 
 462:hardware/LCD/ili9341.c **** }  
 1759              		.loc 1 462 0
 1760 004e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1761              	.LVL220:
 1762              	.L109:
 1763 0052 00BF     		.align	2
 1764              	.L108:
 1765 0054 FEFF0760 		.word	1611137022
 1766              		.cfi_endproc
 1767              	.LFE157:
 1769              		.section	.text.LCD_DrawLine,"ax",%progbits
 1770              		.align	1
 1771              		.global	LCD_DrawLine
 1772              		.syntax unified
 1773              		.thumb
 1774              		.thumb_func
 1775              		.fpu fpv4-sp-d16
 1777              	LCD_DrawLine:
 1778              	.LFB158:
 463:hardware/LCD/ili9341.c **** //画线
 464:hardware/LCD/ili9341.c **** //x1,y1:起点坐标
 465:hardware/LCD/ili9341.c **** //x2,y2:终点坐标  
 466:hardware/LCD/ili9341.c **** void LCD_DrawLine(u16 x1, u16 y1, u16 x2, u16 y2)
 467:hardware/LCD/ili9341.c **** {
 1779              		.loc 1 467 0
 1780              		.cfi_startproc
 1781              		@ args = 0, pretend = 0, frame = 8
 1782              		@ frame_needed = 0, uses_anonymous_args = 0
 1783              	.LVL221:
 1784 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1785              	.LCFI26:
 1786              		.cfi_def_cfa_offset 36
 1787              		.cfi_offset 4, -36
 1788              		.cfi_offset 5, -32
 1789              		.cfi_offset 6, -28
 1790              		.cfi_offset 7, -24
 1791              		.cfi_offset 8, -20
 1792              		.cfi_offset 9, -16
 1793              		.cfi_offset 10, -12
 1794              		.cfi_offset 11, -8
 1795              		.cfi_offset 14, -4
 1796 0004 83B0     		sub	sp, sp, #12
 1797              	.LCFI27:
 1798              		.cfi_def_cfa_offset 48
 1799              	.LVL222:
 468:hardware/LCD/ili9341.c **** 	u16 t; 
 469:hardware/LCD/ili9341.c **** 	int xerr=0,yerr=0,delta_x,delta_y,distance; 
 470:hardware/LCD/ili9341.c **** 	int incx,incy,uRow,uCol; 
 471:hardware/LCD/ili9341.c **** 	delta_x=x2-x1; //计算坐标增量 
 1800              		.loc 1 471 0
 1801 0006 8046     		mov	r8, r0
 1802 0008 A2EB000A 		sub	r10, r2, r0
 1803              	.LVL223:
 472:hardware/LCD/ili9341.c **** 	delta_y=y2-y1; 
 1804              		.loc 1 472 0
 1805 000c 8946     		mov	r9, r1
ARM GAS  /tmp/ccBPN2mg.s 			page 43


 1806 000e A3EB010B 		sub	fp, r3, r1
 1807              	.LVL224:
 473:hardware/LCD/ili9341.c **** 	uRow=x1; 
 474:hardware/LCD/ili9341.c **** 	uCol=y1; 
 475:hardware/LCD/ili9341.c **** 	
 476:hardware/LCD/ili9341.c **** 	if(delta_x>0)
 1808              		.loc 1 476 0
 1809 0012 BAF1000F 		cmp	r10, #0
 1810 0016 0DDD     		ble	.L124
 477:hardware/LCD/ili9341.c **** 		incx=1; //设置单步方向 
 1811              		.loc 1 477 0
 1812 0018 0123     		movs	r3, #1
 1813              	.LVL225:
 1814 001a 0093     		str	r3, [sp]
 1815              	.L111:
 1816              	.LVL226:
 478:hardware/LCD/ili9341.c **** 	else if
 479:hardware/LCD/ili9341.c **** 		(delta_x==0)incx=0;//垂直线 
 480:hardware/LCD/ili9341.c **** 	else 
 481:hardware/LCD/ili9341.c **** 		{incx=-1;delta_x=-delta_x;} 
 482:hardware/LCD/ili9341.c **** 
 483:hardware/LCD/ili9341.c **** 	
 484:hardware/LCD/ili9341.c **** 	if(delta_y>0)
 1817              		.loc 1 484 0
 1818 001c BBF1000F 		cmp	fp, #0
 1819 0020 14DD     		ble	.L125
 485:hardware/LCD/ili9341.c **** 		incy=1; 
 1820              		.loc 1 485 0
 1821 0022 0123     		movs	r3, #1
 1822 0024 0193     		str	r3, [sp, #4]
 1823              	.L112:
 1824              	.LVL227:
 486:hardware/LCD/ili9341.c **** 	else if
 487:hardware/LCD/ili9341.c **** 		(delta_y==0)incy=0;//水平线 
 488:hardware/LCD/ili9341.c **** 	else
 489:hardware/LCD/ili9341.c **** 		{incy=-1;delta_y=-delta_y;} 
 490:hardware/LCD/ili9341.c **** 	
 491:hardware/LCD/ili9341.c **** 	if( delta_x>delta_y)
 1825              		.loc 1 491 0
 1826 0026 DA45     		cmp	r10, fp
 1827 0028 1CDD     		ble	.L122
 492:hardware/LCD/ili9341.c **** 		distance=delta_x; //选取基本增量坐标轴 
 1828              		.loc 1 492 0
 1829 002a 5646     		mov	r6, r10
 1830              	.L113:
 1831              	.LVL228:
 469:hardware/LCD/ili9341.c **** 	int incx,incy,uRow,uCol; 
 1832              		.loc 1 469 0
 1833 002c 0025     		movs	r5, #0
 1834 002e 2F46     		mov	r7, r5
 493:hardware/LCD/ili9341.c **** 	else 
 494:hardware/LCD/ili9341.c **** 		distance=delta_y; 
 495:hardware/LCD/ili9341.c **** 	
 496:hardware/LCD/ili9341.c **** 	for(t=0;t<=distance+1;t++ )//画线输出 
 1835              		.loc 1 496 0
 1836 0030 2C46     		mov	r4, r5
 1837 0032 1BE0     		b	.L114
ARM GAS  /tmp/ccBPN2mg.s 			page 44


 1838              	.LVL229:
 1839              	.L124:
 479:hardware/LCD/ili9341.c **** 	else 
 1840              		.loc 1 479 0
 1841 0034 BAF1000F 		cmp	r10, #0
 1842 0038 05D0     		beq	.L119
 1843              	.LVL230:
 481:hardware/LCD/ili9341.c **** 
 1844              		.loc 1 481 0
 1845 003a CAF1000A 		rsb	r10, r10, #0
 1846              	.LVL231:
 1847 003e 4FF0FF33 		mov	r3, #-1
 1848              	.LVL232:
 1849 0042 0093     		str	r3, [sp]
 1850 0044 EAE7     		b	.L111
 1851              	.LVL233:
 1852              	.L119:
 479:hardware/LCD/ili9341.c **** 	else 
 1853              		.loc 1 479 0
 1854 0046 CDF800A0 		str	r10, [sp]
 1855 004a E7E7     		b	.L111
 1856              	.LVL234:
 1857              	.L125:
 487:hardware/LCD/ili9341.c **** 	else
 1858              		.loc 1 487 0
 1859 004c BBF1000F 		cmp	fp, #0
 1860 0050 05D0     		beq	.L121
 1861              	.LVL235:
 489:hardware/LCD/ili9341.c **** 	
 1862              		.loc 1 489 0
 1863 0052 CBF1000B 		rsb	fp, fp, #0
 1864              	.LVL236:
 1865 0056 4FF0FF33 		mov	r3, #-1
 1866 005a 0193     		str	r3, [sp, #4]
 1867 005c E3E7     		b	.L112
 1868              	.LVL237:
 1869              	.L121:
 487:hardware/LCD/ili9341.c **** 	else
 1870              		.loc 1 487 0
 1871 005e CDF804B0 		str	fp, [sp, #4]
 1872 0062 E0E7     		b	.L112
 1873              	.LVL238:
 1874              	.L122:
 494:hardware/LCD/ili9341.c **** 	
 1875              		.loc 1 494 0
 1876 0064 5E46     		mov	r6, fp
 1877 0066 E1E7     		b	.L113
 1878              	.LVL239:
 1879              	.L116:
 1880              		.loc 1 496 0 discriminator 2
 1881 0068 0134     		adds	r4, r4, #1
 1882              	.LVL240:
 1883 006a A4B2     		uxth	r4, r4
 1884              	.LVL241:
 1885              	.L114:
 1886              		.loc 1 496 0 is_stmt 0 discriminator 1
 1887 006c 731C     		adds	r3, r6, #1
ARM GAS  /tmp/ccBPN2mg.s 			page 45


 1888 006e 9C42     		cmp	r4, r3
 1889 0070 12DC     		bgt	.L126
 497:hardware/LCD/ili9341.c **** 	{  
 498:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(uRow,uCol);//画点 
 1890              		.loc 1 498 0 is_stmt 1
 1891 0072 1FFA89F1 		uxth	r1, r9
 1892 0076 1FFA88F0 		uxth	r0, r8
 1893 007a FFF7FEFF 		bl	LCD_DrawPoint
 1894              	.LVL242:
 499:hardware/LCD/ili9341.c **** 		xerr+=delta_x ; 
 1895              		.loc 1 499 0
 1896 007e 5744     		add	r7, r7, r10
 1897              	.LVL243:
 500:hardware/LCD/ili9341.c **** 		yerr+=delta_y ; 
 1898              		.loc 1 500 0
 1899 0080 5D44     		add	r5, r5, fp
 1900              	.LVL244:
 501:hardware/LCD/ili9341.c **** 		if(xerr>distance) 
 1901              		.loc 1 501 0
 1902 0082 BE42     		cmp	r6, r7
 1903 0084 02DA     		bge	.L115
 502:hardware/LCD/ili9341.c **** 		{ 
 503:hardware/LCD/ili9341.c **** 			xerr-=distance; 
 1904              		.loc 1 503 0
 1905 0086 BF1B     		subs	r7, r7, r6
 1906              	.LVL245:
 504:hardware/LCD/ili9341.c **** 			uRow+=incx; 
 1907              		.loc 1 504 0
 1908 0088 009B     		ldr	r3, [sp]
 1909 008a 9844     		add	r8, r8, r3
 1910              	.LVL246:
 1911              	.L115:
 505:hardware/LCD/ili9341.c **** 		} 
 506:hardware/LCD/ili9341.c **** 		if(yerr>distance) 
 1912              		.loc 1 506 0
 1913 008c AE42     		cmp	r6, r5
 1914 008e EBDA     		bge	.L116
 507:hardware/LCD/ili9341.c **** 		{ 
 508:hardware/LCD/ili9341.c **** 			yerr-=distance; 
 1915              		.loc 1 508 0
 1916 0090 AD1B     		subs	r5, r5, r6
 1917              	.LVL247:
 509:hardware/LCD/ili9341.c **** 			uCol+=incy; 
 1918              		.loc 1 509 0
 1919 0092 019B     		ldr	r3, [sp, #4]
 1920 0094 9944     		add	r9, r9, r3
 1921              	.LVL248:
 1922 0096 E7E7     		b	.L116
 1923              	.L126:
 510:hardware/LCD/ili9341.c **** 		} 
 511:hardware/LCD/ili9341.c **** 	}  
 512:hardware/LCD/ili9341.c **** }    
 1924              		.loc 1 512 0
 1925 0098 03B0     		add	sp, sp, #12
 1926              	.LCFI28:
 1927              		.cfi_def_cfa_offset 36
 1928              	.LVL249:
ARM GAS  /tmp/ccBPN2mg.s 			page 46


 1929              		@ sp needed
 1930 009a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1931              		.cfi_endproc
 1932              	.LFE158:
 1934              		.section	.text.LCD_DrawRectangle,"ax",%progbits
 1935              		.align	1
 1936              		.global	LCD_DrawRectangle
 1937              		.syntax unified
 1938              		.thumb
 1939              		.thumb_func
 1940              		.fpu fpv4-sp-d16
 1942              	LCD_DrawRectangle:
 1943              	.LFB159:
 513:hardware/LCD/ili9341.c **** //画矩形	  
 514:hardware/LCD/ili9341.c **** //(x1,y1),(x2,y2):矩形的对角坐标
 515:hardware/LCD/ili9341.c **** void LCD_DrawRectangle(u16 x1, u16 y1, u16 x2, u16 y2)
 516:hardware/LCD/ili9341.c **** {
 1944              		.loc 1 516 0
 1945              		.cfi_startproc
 1946              		@ args = 0, pretend = 0, frame = 0
 1947              		@ frame_needed = 0, uses_anonymous_args = 0
 1948              	.LVL250:
 1949 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1950              	.LCFI29:
 1951              		.cfi_def_cfa_offset 24
 1952              		.cfi_offset 3, -24
 1953              		.cfi_offset 4, -20
 1954              		.cfi_offset 5, -16
 1955              		.cfi_offset 6, -12
 1956              		.cfi_offset 7, -8
 1957              		.cfi_offset 14, -4
 1958 0002 0746     		mov	r7, r0
 1959 0004 0E46     		mov	r6, r1
 1960 0006 1546     		mov	r5, r2
 1961 0008 1C46     		mov	r4, r3
 517:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y1,x2,y1);
 1962              		.loc 1 517 0
 1963 000a 0B46     		mov	r3, r1
 1964              	.LVL251:
 1965 000c FFF7FEFF 		bl	LCD_DrawLine
 1966              	.LVL252:
 518:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y1,x1,y2);
 1967              		.loc 1 518 0
 1968 0010 2346     		mov	r3, r4
 1969 0012 3A46     		mov	r2, r7
 1970 0014 3146     		mov	r1, r6
 1971 0016 3846     		mov	r0, r7
 1972 0018 FFF7FEFF 		bl	LCD_DrawLine
 1973              	.LVL253:
 519:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x1,y2,x2,y2);
 1974              		.loc 1 519 0
 1975 001c 2346     		mov	r3, r4
 1976 001e 2A46     		mov	r2, r5
 1977 0020 2146     		mov	r1, r4
 1978 0022 3846     		mov	r0, r7
 1979 0024 FFF7FEFF 		bl	LCD_DrawLine
 1980              	.LVL254:
ARM GAS  /tmp/ccBPN2mg.s 			page 47


 520:hardware/LCD/ili9341.c **** 	LCD_DrawLine(x2,y1,x2,y2);
 1981              		.loc 1 520 0
 1982 0028 2346     		mov	r3, r4
 1983 002a 2A46     		mov	r2, r5
 1984 002c 3146     		mov	r1, r6
 1985 002e 2846     		mov	r0, r5
 1986 0030 FFF7FEFF 		bl	LCD_DrawLine
 1987              	.LVL255:
 1988 0034 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1989              		.cfi_endproc
 1990              	.LFE159:
 1992              		.section	.text.LCD_Draw_Circle,"ax",%progbits
 1993              		.align	1
 1994              		.global	LCD_Draw_Circle
 1995              		.syntax unified
 1996              		.thumb
 1997              		.thumb_func
 1998              		.fpu fpv4-sp-d16
 2000              	LCD_Draw_Circle:
 2001              	.LFB160:
 521:hardware/LCD/ili9341.c **** }
 522:hardware/LCD/ili9341.c **** //在指定位置画一个指定大小的圆
 523:hardware/LCD/ili9341.c **** //(x,y):中心点
 524:hardware/LCD/ili9341.c **** //r    :半径
 525:hardware/LCD/ili9341.c **** void LCD_Draw_Circle(u16 x0,u16 y0,u8 r)
 526:hardware/LCD/ili9341.c **** {
 2002              		.loc 1 526 0
 2003              		.cfi_startproc
 2004              		@ args = 0, pretend = 0, frame = 16
 2005              		@ frame_needed = 0, uses_anonymous_args = 0
 2006              	.LVL256:
 2007 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2008              	.LCFI30:
 2009              		.cfi_def_cfa_offset 36
 2010              		.cfi_offset 4, -36
 2011              		.cfi_offset 5, -32
 2012              		.cfi_offset 6, -28
 2013              		.cfi_offset 7, -24
 2014              		.cfi_offset 8, -20
 2015              		.cfi_offset 9, -16
 2016              		.cfi_offset 10, -12
 2017              		.cfi_offset 11, -8
 2018              		.cfi_offset 14, -4
 2019 0004 85B0     		sub	sp, sp, #20
 2020              	.LCFI31:
 2021              		.cfi_def_cfa_offset 56
 2022 0006 8346     		mov	fp, r0
 2023 0008 8946     		mov	r9, r1
 2024 000a 9046     		mov	r8, r2
 2025              	.LVL257:
 527:hardware/LCD/ili9341.c **** 	int a,b;
 528:hardware/LCD/ili9341.c **** 	int di;
 529:hardware/LCD/ili9341.c **** 	a=0;b=r;	  
 530:hardware/LCD/ili9341.c **** 	di=3-(r<<1);             //判断下个点位置的标志
 2026              		.loc 1 530 0
 2027 000c 5300     		lsls	r3, r2, #1
 2028 000e C3F10307 		rsb	r7, r3, #3
ARM GAS  /tmp/ccBPN2mg.s 			page 48


 2029              	.LVL258:
 529:hardware/LCD/ili9341.c **** 	di=3-(r<<1);             //判断下个点位置的标志
 2030              		.loc 1 529 0
 2031 0012 0026     		movs	r6, #0
 531:hardware/LCD/ili9341.c **** 	while(a<=b)
 2032              		.loc 1 531 0
 2033 0014 02E0     		b	.L130
 2034              	.LVL259:
 2035              	.L136:
 532:hardware/LCD/ili9341.c **** 	{
 533:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0-b);             //5
 534:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0+b,y0-a);             //0           
 535:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+b,y0+a);             //4               
 536:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0+b);             //6 
 537:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0+b);             //1       
 538:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0-b,y0+a);             
 539:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0-b);             //2             
 540:hardware/LCD/ili9341.c ****   		LCD_DrawPoint(x0-b,y0-a);             //7     	         
 541:hardware/LCD/ili9341.c **** 		a++;
 542:hardware/LCD/ili9341.c **** 		//使用Bresenham算法画圆     
 543:hardware/LCD/ili9341.c **** 		if(di<0)di +=4*a+6;	  
 2036              		.loc 1 543 0 discriminator 1
 2037 0016 B300     		lsls	r3, r6, #2
 2038 0018 0633     		adds	r3, r3, #6
 2039 001a 1F44     		add	r7, r7, r3
 2040              	.LVL260:
 2041              	.L130:
 531:hardware/LCD/ili9341.c **** 	while(a<=b)
 2042              		.loc 1 531 0
 2043 001c 4645     		cmp	r6, r8
 2044 001e 4CDC     		bgt	.L135
 533:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0+b,y0-a);             //0           
 2045              		.loc 1 533 0
 2046 0020 B5B2     		uxth	r5, r6
 2047 0022 05EB0B03 		add	r3, r5, fp
 2048 0026 9BB2     		uxth	r3, r3
 2049 0028 1A46     		mov	r2, r3
 2050 002a 1FFA88F4 		uxth	r4, r8
 2051 002e A9EB0403 		sub	r3, r9, r4
 2052 0032 9BB2     		uxth	r3, r3
 2053 0034 0193     		str	r3, [sp, #4]
 2054 0036 1946     		mov	r1, r3
 2055 0038 0092     		str	r2, [sp]
 2056 003a 1046     		mov	r0, r2
 2057 003c FFF7FEFF 		bl	LCD_DrawPoint
 2058              	.LVL261:
 534:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+b,y0+a);             //4               
 2059              		.loc 1 534 0
 2060 0040 0BEB040A 		add	r10, fp, r4
 2061 0044 1FFA8AFA 		uxth	r10, r10
 2062 0048 A9EB0503 		sub	r3, r9, r5
 2063 004c 9AB2     		uxth	r2, r3
 2064 004e 0292     		str	r2, [sp, #8]
 2065 0050 1146     		mov	r1, r2
 2066 0052 5046     		mov	r0, r10
 2067 0054 FFF7FEFF 		bl	LCD_DrawPoint
 2068              	.LVL262:
ARM GAS  /tmp/ccBPN2mg.s 			page 49


 535:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0+a,y0+b);             //6 
 2069              		.loc 1 535 0
 2070 0058 05EB0903 		add	r3, r5, r9
 2071 005c 98B2     		uxth	r0, r3
 2072 005e 0390     		str	r0, [sp, #12]
 2073 0060 0146     		mov	r1, r0
 2074 0062 5046     		mov	r0, r10
 2075 0064 FFF7FEFF 		bl	LCD_DrawPoint
 2076              	.LVL263:
 536:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0+b);             //1       
 2077              		.loc 1 536 0
 2078 0068 04EB090A 		add	r10, r4, r9
 2079 006c 1FFA8AFA 		uxth	r10, r10
 2080 0070 5146     		mov	r1, r10
 2081 0072 0098     		ldr	r0, [sp]
 2082 0074 FFF7FEFF 		bl	LCD_DrawPoint
 2083              	.LVL264:
 537:hardware/LCD/ili9341.c ****  		LCD_DrawPoint(x0-b,y0+a);             
 2084              		.loc 1 537 0
 2085 0078 ABEB0505 		sub	r5, fp, r5
 2086 007c ADB2     		uxth	r5, r5
 2087 007e 5146     		mov	r1, r10
 2088 0080 2846     		mov	r0, r5
 2089 0082 FFF7FEFF 		bl	LCD_DrawPoint
 2090              	.LVL265:
 538:hardware/LCD/ili9341.c **** 		LCD_DrawPoint(x0-a,y0-b);             //2             
 2091              		.loc 1 538 0
 2092 0086 ABEB0404 		sub	r4, fp, r4
 2093 008a A4B2     		uxth	r4, r4
 2094 008c 0399     		ldr	r1, [sp, #12]
 2095 008e 2046     		mov	r0, r4
 2096 0090 FFF7FEFF 		bl	LCD_DrawPoint
 2097              	.LVL266:
 539:hardware/LCD/ili9341.c ****   		LCD_DrawPoint(x0-b,y0-a);             //7     	         
 2098              		.loc 1 539 0
 2099 0094 0199     		ldr	r1, [sp, #4]
 2100 0096 2846     		mov	r0, r5
 2101 0098 FFF7FEFF 		bl	LCD_DrawPoint
 2102              	.LVL267:
 540:hardware/LCD/ili9341.c **** 		a++;
 2103              		.loc 1 540 0
 2104 009c 0299     		ldr	r1, [sp, #8]
 2105 009e 2046     		mov	r0, r4
 2106 00a0 FFF7FEFF 		bl	LCD_DrawPoint
 2107              	.LVL268:
 541:hardware/LCD/ili9341.c **** 		//使用Bresenham算法画圆     
 2108              		.loc 1 541 0
 2109 00a4 0136     		adds	r6, r6, #1
 2110              	.LVL269:
 2111              		.loc 1 543 0
 2112 00a6 002F     		cmp	r7, #0
 2113 00a8 B5DB     		blt	.L136
 544:hardware/LCD/ili9341.c **** 		else
 545:hardware/LCD/ili9341.c **** 		{
 546:hardware/LCD/ili9341.c **** 			di+=10+4*(a-b);   
 2114              		.loc 1 546 0
 2115 00aa A6EB0803 		sub	r3, r6, r8
ARM GAS  /tmp/ccBPN2mg.s 			page 50


 2116 00ae 9B00     		lsls	r3, r3, #2
 2117 00b0 0A33     		adds	r3, r3, #10
 2118 00b2 1F44     		add	r7, r7, r3
 2119              	.LVL270:
 547:hardware/LCD/ili9341.c **** 			b--;
 2120              		.loc 1 547 0
 2121 00b4 08F1FF38 		add	r8, r8, #-1
 2122              	.LVL271:
 2123 00b8 B0E7     		b	.L130
 2124              	.L135:
 548:hardware/LCD/ili9341.c **** 		} 						    
 549:hardware/LCD/ili9341.c **** 	}
 550:hardware/LCD/ili9341.c **** } 									  
 2125              		.loc 1 550 0
 2126 00ba 05B0     		add	sp, sp, #20
 2127              	.LCFI32:
 2128              		.cfi_def_cfa_offset 36
 2129              		@ sp needed
 2130 00bc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2131              		.cfi_endproc
 2132              	.LFE160:
 2134              		.section	.text.LCD_ShowChar,"ax",%progbits
 2135              		.align	1
 2136              		.global	LCD_ShowChar
 2137              		.syntax unified
 2138              		.thumb
 2139              		.thumb_func
 2140              		.fpu fpv4-sp-d16
 2142              	LCD_ShowChar:
 2143              	.LFB161:
 551:hardware/LCD/ili9341.c **** //在指定位置显示一个字符
 552:hardware/LCD/ili9341.c **** //x,y:起始坐标
 553:hardware/LCD/ili9341.c **** //num:要显示的字符:" "--->"~"
 554:hardware/LCD/ili9341.c **** //size:字体大小 12/16/24/32
 555:hardware/LCD/ili9341.c **** //mode:叠加方式(1)还是非叠加方式(0)
 556:hardware/LCD/ili9341.c **** void LCD_ShowChar(u16 x,u16 y,u8 num,u8 size,u8 mode)
 557:hardware/LCD/ili9341.c **** {  							  
 2144              		.loc 1 557 0
 2145              		.cfi_startproc
 2146              		@ args = 4, pretend = 0, frame = 8
 2147              		@ frame_needed = 0, uses_anonymous_args = 0
 2148              	.LVL272:
 2149 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2150              	.LCFI33:
 2151              		.cfi_def_cfa_offset 36
 2152              		.cfi_offset 4, -36
 2153              		.cfi_offset 5, -32
 2154              		.cfi_offset 6, -28
 2155              		.cfi_offset 7, -24
 2156              		.cfi_offset 8, -20
 2157              		.cfi_offset 9, -16
 2158              		.cfi_offset 10, -12
 2159              		.cfi_offset 11, -8
 2160              		.cfi_offset 14, -4
 2161 0004 83B0     		sub	sp, sp, #12
 2162              	.LCFI34:
 2163              		.cfi_def_cfa_offset 48
ARM GAS  /tmp/ccBPN2mg.s 			page 51


 2164 0006 0090     		str	r0, [sp]
 2165 0008 8846     		mov	r8, r1
 2166 000a 1F46     		mov	r7, r3
 2167 000c 9DF830A0 		ldrb	r10, [sp, #48]	@ zero_extendqisi2
 2168              	.LVL273:
 558:hardware/LCD/ili9341.c ****     u8 temp,t1,t;
 559:hardware/LCD/ili9341.c **** 	u16 y0=y;
 560:hardware/LCD/ili9341.c **** 	u8 csize=(size/8+((size%8)?1:0))*(size/2);		//得到字体一个字符对应点阵集所占的字
 2169              		.loc 1 560 0
 2170 0010 13F00703 		ands	r3, r3, #7
 2171              	.LVL274:
 2172 0014 18BF     		it	ne
 2173 0016 0123     		movne	r3, #1
 2174 0018 03EBD703 		add	r3, r3, r7, lsr #3
 2175 001c 7908     		lsrs	r1, r7, #1
 2176              	.LVL275:
 2177 001e 11FB03F3 		smulbb	r3, r1, r3
 2178 0022 DBB2     		uxtb	r3, r3
 2179 0024 0193     		str	r3, [sp, #4]
 2180              	.LVL276:
 561:hardware/LCD/ili9341.c ****  	num=num-' ';//得到偏移后的值（ASCII字库是从空格开始取模，所以-' '就是对
 2181              		.loc 1 561 0
 2182 0026 203A     		subs	r2, r2, #32
 2183              	.LVL277:
 2184 0028 5FFA82FB 		uxtb	fp, r2
 2185              	.LVL278:
 562:hardware/LCD/ili9341.c **** 	for(t=0;t<csize;t++)
 2186              		.loc 1 562 0
 2187 002c 4446     		mov	r4, r8
 2188 002e 4FF00009 		mov	r9, #0
 2189 0032 46E0     		b	.L138
 2190              	.LVL279:
 2191              	.L154:
 563:hardware/LCD/ili9341.c **** 	{   
 564:hardware/LCD/ili9341.c **** 		if(size==12)temp=asc2_1206[num][t]; 	 	//调用1206字体
 2192              		.loc 1 564 0 discriminator 1
 2193 0034 0BEB4B03 		add	r3, fp, fp, lsl #1
 2194 0038 9A00     		lsls	r2, r3, #2
 2195 003a 2C4B     		ldr	r3, .L157
 2196 003c 1344     		add	r3, r3, r2
 2197 003e 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2198              	.LVL280:
 2199 0042 4EE0     		b	.L140
 2200              	.LVL281:
 2201              	.L155:
 565:hardware/LCD/ili9341.c **** 		else if(size==16)temp=asc2_1608[num][t];	//调用1608字体
 2202              		.loc 1 565 0 discriminator 1
 2203 0044 2A4B     		ldr	r3, .L157+4
 2204 0046 03EB0B13 		add	r3, r3, fp, lsl #4
 2205 004a 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2206              	.LVL282:
 2207 004e 48E0     		b	.L140
 2208              	.LVL283:
 2209              	.L156:
 566:hardware/LCD/ili9341.c **** 		else if(size==24)temp=asc2_2412[num][t];	//调用2412字体
 2210              		.loc 1 566 0 discriminator 1
 2211 0050 0BEBCB03 		add	r3, fp, fp, lsl #3
ARM GAS  /tmp/ccBPN2mg.s 			page 52


 2212 0054 9A00     		lsls	r2, r3, #2
 2213 0056 274B     		ldr	r3, .L157+8
 2214 0058 1344     		add	r3, r3, r2
 2215 005a 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2216              	.LVL284:
 2217 005e 40E0     		b	.L140
 2218              	.LVL285:
 2219              	.L153:
 567:hardware/LCD/ili9341.c **** 		else if(size==32)temp=asc2_3216[num][t];	//调用3216字体
 568:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 569:hardware/LCD/ili9341.c **** 		for(t1=0;t1<8;t1++)
 570:hardware/LCD/ili9341.c **** 		{			    
 571:hardware/LCD/ili9341.c **** 			if(temp&0x80)LCD_Fast_DrawPoint(x,y,POINT_COLOR);
 2220              		.loc 1 571 0 discriminator 1
 2221 0060 254B     		ldr	r3, .L157+12
 2222 0062 1A68     		ldr	r2, [r3]
 2223 0064 2146     		mov	r1, r4
 2224 0066 0098     		ldr	r0, [sp]
 2225 0068 FFF7FEFF 		bl	LCD_Fast_DrawPoint
 2226              	.LVL286:
 2227              	.L146:
 572:hardware/LCD/ili9341.c **** 			else if(mode==0)LCD_Fast_DrawPoint(x,y,BACK_COLOR);
 573:hardware/LCD/ili9341.c **** 			temp<<=1;
 2228              		.loc 1 573 0
 2229 006c 6D00     		lsls	r5, r5, #1
 2230              	.LVL287:
 2231 006e EDB2     		uxtb	r5, r5
 2232              	.LVL288:
 574:hardware/LCD/ili9341.c **** 			y++;
 2233              		.loc 1 574 0
 2234 0070 0134     		adds	r4, r4, #1
 2235              	.LVL289:
 2236 0072 A4B2     		uxth	r4, r4
 2237              	.LVL290:
 575:hardware/LCD/ili9341.c **** 			if(y>=lcddev.height)return;		//超区域了
 2238              		.loc 1 575 0
 2239 0074 214B     		ldr	r3, .L157+16
 2240 0076 5B88     		ldrh	r3, [r3, #2]
 2241 0078 9C42     		cmp	r4, r3
 2242 007a 34D2     		bcs	.L137
 576:hardware/LCD/ili9341.c **** 			if((y-y0)==size)
 2243              		.loc 1 576 0
 2244 007c A4EB0803 		sub	r3, r4, r8
 2245 0080 BB42     		cmp	r3, r7
 2246 0082 10D0     		beq	.L152
 569:hardware/LCD/ili9341.c **** 		{			    
 2247              		.loc 1 569 0 discriminator 2
 2248 0084 0136     		adds	r6, r6, #1
 2249              	.LVL291:
 2250 0086 F6B2     		uxtb	r6, r6
 2251              	.LVL292:
 2252              	.L143:
 569:hardware/LCD/ili9341.c **** 		{			    
 2253              		.loc 1 569 0 is_stmt 0 discriminator 1
 2254 0088 072E     		cmp	r6, #7
 2255 008a 16D8     		bhi	.L148
 571:hardware/LCD/ili9341.c **** 			else if(mode==0)LCD_Fast_DrawPoint(x,y,BACK_COLOR);
ARM GAS  /tmp/ccBPN2mg.s 			page 53


 2256              		.loc 1 571 0 is_stmt 1
 2257 008c 15F0800F 		tst	r5, #128
 2258 0090 E6D1     		bne	.L153
 572:hardware/LCD/ili9341.c **** 			temp<<=1;
 2259              		.loc 1 572 0
 2260 0092 BAF1000F 		cmp	r10, #0
 2261 0096 E9D1     		bne	.L146
 572:hardware/LCD/ili9341.c **** 			temp<<=1;
 2262              		.loc 1 572 0 is_stmt 0 discriminator 1
 2263 0098 194B     		ldr	r3, .L157+20
 2264 009a 1A68     		ldr	r2, [r3]
 2265 009c 2146     		mov	r1, r4
 2266 009e 0098     		ldr	r0, [sp]
 2267 00a0 FFF7FEFF 		bl	LCD_Fast_DrawPoint
 2268              	.LVL293:
 2269 00a4 E2E7     		b	.L146
 2270              	.L152:
 2271              	.LVL294:
 577:hardware/LCD/ili9341.c **** 			{
 578:hardware/LCD/ili9341.c **** 				y=y0;
 579:hardware/LCD/ili9341.c **** 				x++;
 2272              		.loc 1 579 0 is_stmt 1
 2273 00a6 009B     		ldr	r3, [sp]
 2274 00a8 0133     		adds	r3, r3, #1
 2275 00aa 9BB2     		uxth	r3, r3
 2276 00ac 1A46     		mov	r2, r3
 2277 00ae 0093     		str	r3, [sp]
 2278              	.LVL295:
 580:hardware/LCD/ili9341.c **** 				if(x>=lcddev.width)return;	//超区域了
 2279              		.loc 1 580 0
 2280 00b0 124B     		ldr	r3, .L157+16
 2281 00b2 1B88     		ldrh	r3, [r3]
 2282 00b4 9A42     		cmp	r2, r3
 2283 00b6 16D2     		bcs	.L137
 578:hardware/LCD/ili9341.c **** 				x++;
 2284              		.loc 1 578 0
 2285 00b8 4446     		mov	r4, r8
 2286              	.LVL296:
 2287              	.L148:
 562:hardware/LCD/ili9341.c **** 	{   
 2288              		.loc 1 562 0 discriminator 2
 2289 00ba 09F10109 		add	r9, r9, #1
 2290              	.LVL297:
 2291 00be 5FFA89F9 		uxtb	r9, r9
 2292              	.LVL298:
 2293              	.L138:
 562:hardware/LCD/ili9341.c **** 	{   
 2294              		.loc 1 562 0 is_stmt 0 discriminator 1
 2295 00c2 019B     		ldr	r3, [sp, #4]
 2296 00c4 9945     		cmp	r9, r3
 2297 00c6 0ED2     		bcs	.L137
 564:hardware/LCD/ili9341.c **** 		else if(size==16)temp=asc2_1608[num][t];	//调用1608字体
 2298              		.loc 1 564 0 is_stmt 1
 2299 00c8 0C2F     		cmp	r7, #12
 2300 00ca B3D0     		beq	.L154
 565:hardware/LCD/ili9341.c **** 		else if(size==24)temp=asc2_2412[num][t];	//调用2412字体
 2301              		.loc 1 565 0
ARM GAS  /tmp/ccBPN2mg.s 			page 54


 2302 00cc 102F     		cmp	r7, #16
 2303 00ce B9D0     		beq	.L155
 566:hardware/LCD/ili9341.c **** 		else if(size==32)temp=asc2_3216[num][t];	//调用3216字体
 2304              		.loc 1 566 0
 2305 00d0 182F     		cmp	r7, #24
 2306 00d2 BDD0     		beq	.L156
 567:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 2307              		.loc 1 567 0
 2308 00d4 202F     		cmp	r7, #32
 2309 00d6 06D1     		bne	.L137
 567:hardware/LCD/ili9341.c **** 		else return;								//没有的字库
 2310              		.loc 1 567 0 is_stmt 0 discriminator 1
 2311 00d8 0A4B     		ldr	r3, .L157+24
 2312 00da 03EBCB13 		add	r3, r3, fp, lsl #7
 2313 00de 13F80950 		ldrb	r5, [r3, r9]	@ zero_extendqisi2
 2314              	.LVL299:
 2315              	.L140:
 557:hardware/LCD/ili9341.c ****     u8 temp,t1,t;
 2316              		.loc 1 557 0 is_stmt 1 discriminator 1
 2317 00e2 0026     		movs	r6, #0
 2318 00e4 D0E7     		b	.L143
 2319              	.LVL300:
 2320              	.L137:
 581:hardware/LCD/ili9341.c **** 				break;
 582:hardware/LCD/ili9341.c **** 			}
 583:hardware/LCD/ili9341.c **** 		}  	 
 584:hardware/LCD/ili9341.c **** 	}  	    	   	 	  
 585:hardware/LCD/ili9341.c **** }   
 2321              		.loc 1 585 0
 2322 00e6 03B0     		add	sp, sp, #12
 2323              	.LCFI35:
 2324              		.cfi_def_cfa_offset 36
 2325              		@ sp needed
 2326 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2327              	.LVL301:
 2328              	.L158:
 2329              		.align	2
 2330              	.L157:
 2331 00ec 00000000 		.word	asc2_1206
 2332 00f0 00000000 		.word	asc2_1608
 2333 00f4 00000000 		.word	asc2_2412
 2334 00f8 00000000 		.word	.LANCHOR0
 2335 00fc 00000000 		.word	lcddev
 2336 0100 00000000 		.word	.LANCHOR1
 2337 0104 00000000 		.word	asc2_3216
 2338              		.cfi_endproc
 2339              	.LFE161:
 2341              		.section	.text.LCD_Pow,"ax",%progbits
 2342              		.align	1
 2343              		.global	LCD_Pow
 2344              		.syntax unified
 2345              		.thumb
 2346              		.thumb_func
 2347              		.fpu fpv4-sp-d16
 2349              	LCD_Pow:
 2350              	.LFB162:
 586:hardware/LCD/ili9341.c **** //m^n函数
ARM GAS  /tmp/ccBPN2mg.s 			page 55


 587:hardware/LCD/ili9341.c **** //返回值:m^n次方.
 588:hardware/LCD/ili9341.c **** u32 LCD_Pow(u8 m,u8 n)
 589:hardware/LCD/ili9341.c **** {
 2351              		.loc 1 589 0
 2352              		.cfi_startproc
 2353              		@ args = 0, pretend = 0, frame = 0
 2354              		@ frame_needed = 0, uses_anonymous_args = 0
 2355              		@ link register save eliminated.
 2356              	.LVL302:
 590:hardware/LCD/ili9341.c **** 	u32 result=1;	 
 2357              		.loc 1 590 0
 2358 0000 0122     		movs	r2, #1
 591:hardware/LCD/ili9341.c **** 	while(n--)result*=m;    
 2359              		.loc 1 591 0
 2360 0002 02E0     		b	.L160
 2361              	.LVL303:
 2362              	.L161:
 2363              		.loc 1 591 0 is_stmt 0 discriminator 2
 2364 0004 00FB02F2 		mul	r2, r0, r2
 2365              	.LVL304:
 2366 0008 1946     		mov	r1, r3
 2367              	.LVL305:
 2368              	.L160:
 2369              		.loc 1 591 0 discriminator 1
 2370 000a 4B1E     		subs	r3, r1, #1
 2371 000c DBB2     		uxtb	r3, r3
 2372              	.LVL306:
 2373 000e 0029     		cmp	r1, #0
 2374 0010 F8D1     		bne	.L161
 592:hardware/LCD/ili9341.c **** 	return result;
 593:hardware/LCD/ili9341.c **** }			 
 2375              		.loc 1 593 0 is_stmt 1
 2376 0012 1046     		mov	r0, r2
 2377              	.LVL307:
 2378 0014 7047     		bx	lr
 2379              		.cfi_endproc
 2380              	.LFE162:
 2382              		.section	.text.LCD_ShowNum,"ax",%progbits
 2383              		.align	1
 2384              		.global	LCD_ShowNum
 2385              		.syntax unified
 2386              		.thumb
 2387              		.thumb_func
 2388              		.fpu fpv4-sp-d16
 2390              	LCD_ShowNum:
 2391              	.LFB163:
 594:hardware/LCD/ili9341.c **** //显示数字,高位为0,则不显示
 595:hardware/LCD/ili9341.c **** //x,y :起点坐标	 
 596:hardware/LCD/ili9341.c **** //len :数字的位数
 597:hardware/LCD/ili9341.c **** //size:字体大小
 598:hardware/LCD/ili9341.c **** //color:颜色 
 599:hardware/LCD/ili9341.c **** //num:数值(0~4294967295);	 
 600:hardware/LCD/ili9341.c **** void LCD_ShowNum(u16 x,u16 y,u32 num,u8 len,u8 size)
 601:hardware/LCD/ili9341.c **** {         	
 2392              		.loc 1 601 0
 2393              		.cfi_startproc
 2394              		@ args = 4, pretend = 0, frame = 0
ARM GAS  /tmp/ccBPN2mg.s 			page 56


 2395              		@ frame_needed = 0, uses_anonymous_args = 0
 2396              	.LVL308:
 2397 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2398              	.LCFI36:
 2399              		.cfi_def_cfa_offset 32
 2400              		.cfi_offset 4, -32
 2401              		.cfi_offset 5, -28
 2402              		.cfi_offset 6, -24
 2403              		.cfi_offset 7, -20
 2404              		.cfi_offset 8, -16
 2405              		.cfi_offset 9, -12
 2406              		.cfi_offset 10, -8
 2407              		.cfi_offset 14, -4
 2408 0004 82B0     		sub	sp, sp, #8
 2409              	.LCFI37:
 2410              		.cfi_def_cfa_offset 40
 2411 0006 8246     		mov	r10, r0
 2412 0008 8946     		mov	r9, r1
 2413 000a 9046     		mov	r8, r2
 2414 000c 1D46     		mov	r5, r3
 2415 000e 9DF82860 		ldrb	r6, [sp, #40]	@ zero_extendqisi2
 2416              	.LVL309:
 602:hardware/LCD/ili9341.c **** 	u8 t,temp;
 603:hardware/LCD/ili9341.c **** 	u8 enshow=0;						   
 2417              		.loc 1 603 0
 2418 0012 0027     		movs	r7, #0
 604:hardware/LCD/ili9341.c **** 	for(t=0;t<len;t++)
 2419              		.loc 1 604 0
 2420 0014 3C46     		mov	r4, r7
 2421 0016 19E0     		b	.L163
 2422              	.LVL310:
 2423              	.L170:
 605:hardware/LCD/ili9341.c **** 	{
 606:hardware/LCD/ili9341.c **** 		temp=(num/LCD_Pow(10,len-t-1))%10;
 607:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 608:hardware/LCD/ili9341.c **** 		{
 609:hardware/LCD/ili9341.c **** 			if(temp==0)
 610:hardware/LCD/ili9341.c **** 			{
 611:hardware/LCD/ili9341.c **** 				LCD_ShowChar(x+(size/2)*t,y,' ',size,0);
 2424              		.loc 1 611 0
 2425 0018 7008     		lsrs	r0, r6, #1
 2426 001a 00FB04A0 		mla	r0, r0, r4, r10
 2427 001e 0023     		movs	r3, #0
 2428 0020 0093     		str	r3, [sp]
 2429 0022 3346     		mov	r3, r6
 2430 0024 2022     		movs	r2, #32
 2431              	.LVL311:
 2432 0026 4946     		mov	r1, r9
 2433 0028 80B2     		uxth	r0, r0
 2434 002a FFF7FEFF 		bl	LCD_ShowChar
 2435              	.LVL312:
 612:hardware/LCD/ili9341.c **** 				continue;
 2436              		.loc 1 612 0
 2437 002e 0BE0     		b	.L165
 2438              	.LVL313:
 2439              	.L164:
 613:hardware/LCD/ili9341.c **** 			}else enshow=1; 
ARM GAS  /tmp/ccBPN2mg.s 			page 57


 614:hardware/LCD/ili9341.c **** 		 	 
 615:hardware/LCD/ili9341.c **** 		}
 616:hardware/LCD/ili9341.c **** 	 	LCD_ShowChar(x+(size/2)*t,y,temp+'0',size,0); 
 2440              		.loc 1 616 0
 2441 0030 7008     		lsrs	r0, r6, #1
 2442 0032 3032     		adds	r2, r2, #48
 2443              	.LVL314:
 2444 0034 00FB04A0 		mla	r0, r0, r4, r10
 2445 0038 0023     		movs	r3, #0
 2446 003a 0093     		str	r3, [sp]
 2447 003c 3346     		mov	r3, r6
 2448 003e D2B2     		uxtb	r2, r2
 2449              	.LVL315:
 2450 0040 4946     		mov	r1, r9
 2451 0042 80B2     		uxth	r0, r0
 2452 0044 FFF7FEFF 		bl	LCD_ShowChar
 2453              	.LVL316:
 2454              	.L165:
 604:hardware/LCD/ili9341.c **** 	{
 2455              		.loc 1 604 0 discriminator 2
 2456 0048 0134     		adds	r4, r4, #1
 2457              	.LVL317:
 2458 004a E4B2     		uxtb	r4, r4
 2459              	.LVL318:
 2460              	.L163:
 604:hardware/LCD/ili9341.c **** 	{
 2461              		.loc 1 604 0 is_stmt 0 discriminator 1
 2462 004c AC42     		cmp	r4, r5
 2463 004e 1AD2     		bcs	.L169
 606:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 2464              		.loc 1 606 0 is_stmt 1
 2465 0050 291B     		subs	r1, r5, r4
 2466 0052 C9B2     		uxtb	r1, r1
 2467 0054 0139     		subs	r1, r1, #1
 2468 0056 C9B2     		uxtb	r1, r1
 2469 0058 0A20     		movs	r0, #10
 2470 005a FFF7FEFF 		bl	LCD_Pow
 2471              	.LVL319:
 2472 005e B8FBF0F0 		udiv	r0, r8, r0
 2473 0062 0A4A     		ldr	r2, .L171
 2474 0064 A2FB0032 		umull	r3, r2, r2, r0
 2475 0068 D208     		lsrs	r2, r2, #3
 2476 006a 02EB8202 		add	r2, r2, r2, lsl #2
 2477 006e 5300     		lsls	r3, r2, #1
 2478 0070 C21A     		subs	r2, r0, r3
 2479 0072 D2B2     		uxtb	r2, r2
 2480              	.LVL320:
 607:hardware/LCD/ili9341.c **** 		{
 2481              		.loc 1 607 0
 2482 0074 002F     		cmp	r7, #0
 2483 0076 DBD1     		bne	.L164
 607:hardware/LCD/ili9341.c **** 		{
 2484              		.loc 1 607 0 is_stmt 0 discriminator 1
 2485 0078 6B1E     		subs	r3, r5, #1
 2486 007a 9C42     		cmp	r4, r3
 2487 007c D8DA     		bge	.L164
 609:hardware/LCD/ili9341.c **** 			{
ARM GAS  /tmp/ccBPN2mg.s 			page 58


 2488              		.loc 1 609 0 is_stmt 1
 2489 007e 002A     		cmp	r2, #0
 2490 0080 CAD0     		beq	.L170
 613:hardware/LCD/ili9341.c **** 		 	 
 2491              		.loc 1 613 0
 2492 0082 0127     		movs	r7, #1
 2493              	.LVL321:
 2494 0084 D4E7     		b	.L164
 2495              	.LVL322:
 2496              	.L169:
 617:hardware/LCD/ili9341.c **** 	}
 618:hardware/LCD/ili9341.c **** } 
 2497              		.loc 1 618 0
 2498 0086 02B0     		add	sp, sp, #8
 2499              	.LCFI38:
 2500              		.cfi_def_cfa_offset 32
 2501              		@ sp needed
 2502 0088 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2503              	.LVL323:
 2504              	.L172:
 2505              		.align	2
 2506              	.L171:
 2507 008c CDCCCCCC 		.word	-858993459
 2508              		.cfi_endproc
 2509              	.LFE163:
 2511              		.section	.text.LCD_ShowxNum,"ax",%progbits
 2512              		.align	1
 2513              		.global	LCD_ShowxNum
 2514              		.syntax unified
 2515              		.thumb
 2516              		.thumb_func
 2517              		.fpu fpv4-sp-d16
 2519              	LCD_ShowxNum:
 2520              	.LFB164:
 619:hardware/LCD/ili9341.c **** //显示数字,高位为0,还是显示
 620:hardware/LCD/ili9341.c **** //x,y:起点坐标
 621:hardware/LCD/ili9341.c **** //num:数值(0~999999999);	 
 622:hardware/LCD/ili9341.c **** //len:长度(即要显示的位数)
 623:hardware/LCD/ili9341.c **** //size:字体大小
 624:hardware/LCD/ili9341.c **** //mode:
 625:hardware/LCD/ili9341.c **** //[7]:0,不填充;1,填充0.
 626:hardware/LCD/ili9341.c **** //[6:1]:保留
 627:hardware/LCD/ili9341.c **** //[0]:0,非叠加显示;1,叠加显示.
 628:hardware/LCD/ili9341.c **** void LCD_ShowxNum(u16 x,u16 y,u32 num,u8 len,u8 size,u8 mode)
 629:hardware/LCD/ili9341.c **** {  
 2521              		.loc 1 629 0
 2522              		.cfi_startproc
 2523              		@ args = 8, pretend = 0, frame = 0
 2524              		@ frame_needed = 0, uses_anonymous_args = 0
 2525              	.LVL324:
 2526 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2527              	.LCFI39:
 2528              		.cfi_def_cfa_offset 36
 2529              		.cfi_offset 4, -36
 2530              		.cfi_offset 5, -32
 2531              		.cfi_offset 6, -28
 2532              		.cfi_offset 7, -24
ARM GAS  /tmp/ccBPN2mg.s 			page 59


 2533              		.cfi_offset 8, -20
 2534              		.cfi_offset 9, -16
 2535              		.cfi_offset 10, -12
 2536              		.cfi_offset 11, -8
 2537              		.cfi_offset 14, -4
 2538 0004 83B0     		sub	sp, sp, #12
 2539              	.LCFI40:
 2540              		.cfi_def_cfa_offset 48
 2541 0006 8346     		mov	fp, r0
 2542 0008 8A46     		mov	r10, r1
 2543 000a 9146     		mov	r9, r2
 2544 000c 1D46     		mov	r5, r3
 2545 000e 9DF83060 		ldrb	r6, [sp, #48]	@ zero_extendqisi2
 2546 0012 9DF83480 		ldrb	r8, [sp, #52]	@ zero_extendqisi2
 2547              	.LVL325:
 630:hardware/LCD/ili9341.c **** 	u8 t,temp;
 631:hardware/LCD/ili9341.c **** 	u8 enshow=0;						   
 2548              		.loc 1 631 0
 2549 0016 0027     		movs	r7, #0
 632:hardware/LCD/ili9341.c **** 	for(t=0;t<len;t++)
 2550              		.loc 1 632 0
 2551 0018 3C46     		mov	r4, r7
 2552 001a 1CE0     		b	.L174
 2553              	.LVL326:
 2554              	.L183:
 633:hardware/LCD/ili9341.c **** 	{
 634:hardware/LCD/ili9341.c **** 		temp=(num/LCD_Pow(10,len-t-1))%10;
 635:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 636:hardware/LCD/ili9341.c **** 		{
 637:hardware/LCD/ili9341.c **** 			if(temp==0)
 638:hardware/LCD/ili9341.c **** 			{
 639:hardware/LCD/ili9341.c **** 				if(mode&0X80)LCD_ShowChar(x+(size/2)*t,y,'0',size,mode&0X01);  
 2555              		.loc 1 639 0 discriminator 1
 2556 001c 7008     		lsrs	r0, r6, #1
 2557 001e 00FB04B0 		mla	r0, r0, r4, fp
 2558 0022 08F00103 		and	r3, r8, #1
 2559 0026 0093     		str	r3, [sp]
 2560 0028 3346     		mov	r3, r6
 2561 002a 3022     		movs	r2, #48
 2562              	.LVL327:
 2563 002c 5146     		mov	r1, r10
 2564 002e 80B2     		uxth	r0, r0
 2565 0030 FFF7FEFF 		bl	LCD_ShowChar
 2566              	.LVL328:
 2567 0034 0DE0     		b	.L178
 2568              	.LVL329:
 2569              	.L180:
 640:hardware/LCD/ili9341.c **** 				else LCD_ShowChar(x+(size/2)*t,y,' ',size,mode&0X01);  
 641:hardware/LCD/ili9341.c ****  				continue;
 642:hardware/LCD/ili9341.c **** 			}else enshow=1; 
 2570              		.loc 1 642 0
 2571 0036 0127     		movs	r7, #1
 2572              	.LVL330:
 2573              	.L175:
 643:hardware/LCD/ili9341.c **** 		 	 
 644:hardware/LCD/ili9341.c **** 		}
 645:hardware/LCD/ili9341.c **** 	 	LCD_ShowChar(x+(size/2)*t,y,temp+'0',size,mode&0X01); 
ARM GAS  /tmp/ccBPN2mg.s 			page 60


 2574              		.loc 1 645 0
 2575 0038 7008     		lsrs	r0, r6, #1
 2576 003a 3032     		adds	r2, r2, #48
 2577              	.LVL331:
 2578 003c 00FB04B0 		mla	r0, r0, r4, fp
 2579 0040 08F00103 		and	r3, r8, #1
 2580 0044 0093     		str	r3, [sp]
 2581 0046 3346     		mov	r3, r6
 2582 0048 D2B2     		uxtb	r2, r2
 2583              	.LVL332:
 2584 004a 5146     		mov	r1, r10
 2585 004c 80B2     		uxth	r0, r0
 2586 004e FFF7FEFF 		bl	LCD_ShowChar
 2587              	.LVL333:
 2588              	.L178:
 632:hardware/LCD/ili9341.c **** 	{
 2589              		.loc 1 632 0 discriminator 2
 2590 0052 0134     		adds	r4, r4, #1
 2591              	.LVL334:
 2592 0054 E4B2     		uxtb	r4, r4
 2593              	.LVL335:
 2594              	.L174:
 632:hardware/LCD/ili9341.c **** 	{
 2595              		.loc 1 632 0 is_stmt 0 discriminator 1
 2596 0056 AC42     		cmp	r4, r5
 2597 0058 28D2     		bcs	.L182
 634:hardware/LCD/ili9341.c **** 		if(enshow==0&&t<(len-1))
 2598              		.loc 1 634 0 is_stmt 1
 2599 005a 291B     		subs	r1, r5, r4
 2600 005c C9B2     		uxtb	r1, r1
 2601 005e 0139     		subs	r1, r1, #1
 2602 0060 C9B2     		uxtb	r1, r1
 2603 0062 0A20     		movs	r0, #10
 2604 0064 FFF7FEFF 		bl	LCD_Pow
 2605              	.LVL336:
 2606 0068 B9FBF0F0 		udiv	r0, r9, r0
 2607 006c 114A     		ldr	r2, .L184
 2608 006e A2FB0032 		umull	r3, r2, r2, r0
 2609 0072 D208     		lsrs	r2, r2, #3
 2610 0074 02EB8202 		add	r2, r2, r2, lsl #2
 2611 0078 5300     		lsls	r3, r2, #1
 2612 007a C21A     		subs	r2, r0, r3
 2613 007c D2B2     		uxtb	r2, r2
 2614              	.LVL337:
 635:hardware/LCD/ili9341.c **** 		{
 2615              		.loc 1 635 0
 2616 007e 002F     		cmp	r7, #0
 2617 0080 DAD1     		bne	.L175
 635:hardware/LCD/ili9341.c **** 		{
 2618              		.loc 1 635 0 is_stmt 0 discriminator 1
 2619 0082 6B1E     		subs	r3, r5, #1
 2620 0084 9C42     		cmp	r4, r3
 2621 0086 D7DA     		bge	.L175
 637:hardware/LCD/ili9341.c **** 			{
 2622              		.loc 1 637 0 is_stmt 1
 2623 0088 002A     		cmp	r2, #0
 2624 008a D4D1     		bne	.L180
ARM GAS  /tmp/ccBPN2mg.s 			page 61


 639:hardware/LCD/ili9341.c **** 				else LCD_ShowChar(x+(size/2)*t,y,' ',size,mode&0X01);  
 2625              		.loc 1 639 0
 2626 008c 18F0800F 		tst	r8, #128
 2627 0090 C4D1     		bne	.L183
 640:hardware/LCD/ili9341.c ****  				continue;
 2628              		.loc 1 640 0
 2629 0092 7008     		lsrs	r0, r6, #1
 2630 0094 00FB04B0 		mla	r0, r0, r4, fp
 2631 0098 08F00103 		and	r3, r8, #1
 2632 009c 0093     		str	r3, [sp]
 2633 009e 3346     		mov	r3, r6
 2634 00a0 2022     		movs	r2, #32
 2635              	.LVL338:
 2636 00a2 5146     		mov	r1, r10
 2637 00a4 80B2     		uxth	r0, r0
 2638 00a6 FFF7FEFF 		bl	LCD_ShowChar
 2639              	.LVL339:
 641:hardware/LCD/ili9341.c **** 			}else enshow=1; 
 2640              		.loc 1 641 0
 2641 00aa D2E7     		b	.L178
 2642              	.L182:
 646:hardware/LCD/ili9341.c **** 	}
 647:hardware/LCD/ili9341.c **** } 
 2643              		.loc 1 647 0
 2644 00ac 03B0     		add	sp, sp, #12
 2645              	.LCFI41:
 2646              		.cfi_def_cfa_offset 36
 2647              		@ sp needed
 2648 00ae BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2649              	.LVL340:
 2650              	.L185:
 2651 00b2 00BF     		.align	2
 2652              	.L184:
 2653 00b4 CDCCCCCC 		.word	-858993459
 2654              		.cfi_endproc
 2655              	.LFE164:
 2657              		.section	.text.LCD_ShowString,"ax",%progbits
 2658              		.align	1
 2659              		.global	LCD_ShowString
 2660              		.syntax unified
 2661              		.thumb
 2662              		.thumb_func
 2663              		.fpu fpv4-sp-d16
 2665              	LCD_ShowString:
 2666              	.LFB165:
 648:hardware/LCD/ili9341.c **** //显示字符串
 649:hardware/LCD/ili9341.c **** //x,y:起点坐标
 650:hardware/LCD/ili9341.c **** //width,height:区域大小  
 651:hardware/LCD/ili9341.c **** //size:字体大小
 652:hardware/LCD/ili9341.c **** //*p:字符串起始地址		  
 653:hardware/LCD/ili9341.c **** void LCD_ShowString(u16 x,u16 y,u16 width,u16 height,u8 size,u8 *p)
 654:hardware/LCD/ili9341.c **** {         
 2667              		.loc 1 654 0
 2668              		.cfi_startproc
 2669              		@ args = 8, pretend = 0, frame = 0
 2670              		@ frame_needed = 0, uses_anonymous_args = 0
 2671              	.LVL341:
ARM GAS  /tmp/ccBPN2mg.s 			page 62


 2672 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2673              	.LCFI42:
 2674              		.cfi_def_cfa_offset 32
 2675              		.cfi_offset 4, -32
 2676              		.cfi_offset 5, -28
 2677              		.cfi_offset 6, -24
 2678              		.cfi_offset 7, -20
 2679              		.cfi_offset 8, -16
 2680              		.cfi_offset 9, -12
 2681              		.cfi_offset 10, -8
 2682              		.cfi_offset 14, -4
 2683 0004 82B0     		sub	sp, sp, #8
 2684              	.LCFI43:
 2685              		.cfi_def_cfa_offset 40
 2686 0006 8246     		mov	r10, r0
 2687 0008 0D46     		mov	r5, r1
 2688 000a 9DF82870 		ldrb	r7, [sp, #40]	@ zero_extendqisi2
 2689 000e 0B9E     		ldr	r6, [sp, #44]
 2690              	.LVL342:
 655:hardware/LCD/ili9341.c **** 	u8 x0=x;
 656:hardware/LCD/ili9341.c **** 	width+=x;
 2691              		.loc 1 656 0
 2692 0010 0244     		add	r2, r2, r0
 2693              	.LVL343:
 2694 0012 1FFA82F9 		uxth	r9, r2
 2695              	.LVL344:
 657:hardware/LCD/ili9341.c **** 	height+=y;
 2696              		.loc 1 657 0
 2697 0016 0B44     		add	r3, r3, r1
 2698              	.LVL345:
 2699 0018 1FFA83F8 		uxth	r8, r3
 2700              	.LVL346:
 658:hardware/LCD/ili9341.c ****     while((*p<='~')&&(*p>=' '))//判断是不是非法字符!
 2701              		.loc 1 658 0
 2702 001c 0446     		mov	r4, r0
 2703 001e 0CE0     		b	.L187
 2704              	.LVL347:
 2705              	.L188:
 659:hardware/LCD/ili9341.c ****     {       
 660:hardware/LCD/ili9341.c ****         if(x>=width){x=x0;y+=size;}
 661:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2706              		.loc 1 661 0
 2707 0020 4545     		cmp	r5, r8
 2708 0022 17D2     		bcs	.L186
 662:hardware/LCD/ili9341.c ****         LCD_ShowChar(x,y,*p,size,0);
 2709              		.loc 1 662 0
 2710 0024 0023     		movs	r3, #0
 2711 0026 0093     		str	r3, [sp]
 2712 0028 3B46     		mov	r3, r7
 2713 002a 2946     		mov	r1, r5
 2714 002c 2046     		mov	r0, r4
 2715 002e FFF7FEFF 		bl	LCD_ShowChar
 2716              	.LVL348:
 663:hardware/LCD/ili9341.c ****         x+=size/2;
 2717              		.loc 1 663 0
 2718 0032 04EB5704 		add	r4, r4, r7, lsr #1
 2719              	.LVL349:
ARM GAS  /tmp/ccBPN2mg.s 			page 63


 2720 0036 A4B2     		uxth	r4, r4
 2721              	.LVL350:
 664:hardware/LCD/ili9341.c ****         p++;
 2722              		.loc 1 664 0
 2723 0038 0136     		adds	r6, r6, #1
 2724              	.LVL351:
 2725              	.L187:
 658:hardware/LCD/ili9341.c ****     {       
 2726              		.loc 1 658 0
 2727 003a 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 2728 003c A2F12003 		sub	r3, r2, #32
 2729 0040 DBB2     		uxtb	r3, r3
 2730 0042 5E2B     		cmp	r3, #94
 2731 0044 06D8     		bhi	.L186
 660:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2732              		.loc 1 660 0
 2733 0046 4C45     		cmp	r4, r9
 2734 0048 EAD3     		bcc	.L188
 2735 004a 5FFA8AF4 		uxtb	r4, r10
 2736              	.LVL352:
 660:hardware/LCD/ili9341.c ****         if(y>=height)break;//退出
 2737              		.loc 1 660 0 is_stmt 0 discriminator 1
 2738 004e 3D44     		add	r5, r5, r7
 2739              	.LVL353:
 2740 0050 ADB2     		uxth	r5, r5
 2741              	.LVL354:
 2742 0052 E5E7     		b	.L188
 2743              	.L186:
 665:hardware/LCD/ili9341.c ****     }  
 666:hardware/LCD/ili9341.c **** }
 2744              		.loc 1 666 0 is_stmt 1
 2745 0054 02B0     		add	sp, sp, #8
 2746              	.LCFI44:
 2747              		.cfi_def_cfa_offset 32
 2748              		@ sp needed
 2749 0056 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2750              		.cfi_endproc
 2751              	.LFE165:
 2753              		.global	__rt_init_LCD_Init
 2754              		.comm	lcddev,14,4
 2755              		.global	BACK_COLOR
 2756              		.global	POINT_COLOR
 2757              		.comm	SRAM_Handler,80,4
 2758              		.section	.data.BACK_COLOR,"aw",%progbits
 2759              		.align	2
 2760              		.set	.LANCHOR1,. + 0
 2763              	BACK_COLOR:
 2764 0000 FF070000 		.word	2047
 2765              		.section	.data.POINT_COLOR,"aw",%progbits
 2766              		.align	2
 2767              		.set	.LANCHOR0,. + 0
 2770              	POINT_COLOR:
 2771 0000 000000FF 		.word	-16777216
 2772              		.section	.rti_fn.1,"a",%progbits
 2773              		.align	2
 2776              	__rt_init_LCD_Init:
 2777 0000 00000000 		.word	LCD_Init
ARM GAS  /tmp/ccBPN2mg.s 			page 64


 2778              		.text
 2779              	.Letext0:
 2780              		.file 2 "rt-thread/components/finsh/finsh_api.h"
 2781              		.file 3 "hardware/LCD/font.h"
 2782              		.file 4 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/machine/_default_types.h"
 2783              		.file 5 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_stdint.h"
 2784              		.file 6 "CORE/core_cm4.h"
 2785              		.file 7 "USER/system_stm32f4xx.h"
 2786              		.file 8 "USER/stm32f429xx.h"
 2787              		.file 9 "HALLIB/Inc/stm32f4xx_hal_def.h"
 2788              		.file 10 "HALLIB/Inc/stm32f4xx_hal_gpio.h"
 2789              		.file 11 "HALLIB/Inc/stm32f4xx_hal_dma.h"
 2790              		.file 12 "HALLIB/Inc/stm32f4xx_ll_fmc.h"
 2791              		.file 13 "HALLIB/Inc/stm32f4xx_hal_sram.h"
 2792              		.file 14 "HALLIB/Inc/stm32f4xx_hal.h"
 2793              		.file 15 "SYSTEM/sys/sys.h"
 2794              		.file 16 "hardware/LCD/lcd.h"
 2795              		.file 17 "rt-thread/include/rtdef.h"
 2796              		.file 18 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/lock.h"
 2797              		.file 19 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_types.h"
 2798              		.file 20 "/opt/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 2799              		.file 21 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/reent.h"
 2800              		.file 22 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/time.h"
 2801              		.file 23 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/errno.h"
 2802              		.file 24 "SYSTEM/delay/delay.h"
ARM GAS  /tmp/ccBPN2mg.s 			page 65


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ili9341.c
     /tmp/ccBPN2mg.s:18     .text.LCD_WR_REG:0000000000000000 $t
     /tmp/ccBPN2mg.s:25     .text.LCD_WR_REG:0000000000000000 LCD_WR_REG
     /tmp/ccBPN2mg.s:56     .text.LCD_WR_REG:0000000000000020 $d
     /tmp/ccBPN2mg.s:61     .text.LCD_WR_DATA:0000000000000000 $t
     /tmp/ccBPN2mg.s:68     .text.LCD_WR_DATA:0000000000000000 LCD_WR_DATA
     /tmp/ccBPN2mg.s:98     .text.LCD_WR_DATA:0000000000000020 $d
     /tmp/ccBPN2mg.s:103    .text.LCD_RD_DATA:0000000000000000 $t
     /tmp/ccBPN2mg.s:110    .text.LCD_RD_DATA:0000000000000000 LCD_RD_DATA
     /tmp/ccBPN2mg.s:137    .text.LCD_RD_DATA:0000000000000018 $d
     /tmp/ccBPN2mg.s:142    .text.LCD_WriteReg:0000000000000000 $t
     /tmp/ccBPN2mg.s:149    .text.LCD_WriteReg:0000000000000000 LCD_WriteReg
     /tmp/ccBPN2mg.s:166    .text.LCD_WriteReg:0000000000000008 $d
     /tmp/ccBPN2mg.s:171    .text.LCD_ReadReg:0000000000000000 $t
     /tmp/ccBPN2mg.s:178    .text.LCD_ReadReg:0000000000000000 LCD_ReadReg
     /tmp/ccBPN2mg.s:206    .text.LCD_WriteRAM_Prepare:0000000000000000 $t
     /tmp/ccBPN2mg.s:213    .text.LCD_WriteRAM_Prepare:0000000000000000 LCD_WriteRAM_Prepare
     /tmp/ccBPN2mg.s:229    .text.LCD_WriteRAM_Prepare:000000000000000c $d
                            *COM*:000000000000000e lcddev
     /tmp/ccBPN2mg.s:235    .text.LCD_WriteRAM:0000000000000000 $t
     /tmp/ccBPN2mg.s:242    .text.LCD_WriteRAM:0000000000000000 LCD_WriteRAM
     /tmp/ccBPN2mg.s:257    .text.LCD_WriteRAM:0000000000000008 $d
     /tmp/ccBPN2mg.s:262    .text.LCD_BGR2RGB:0000000000000000 $t
     /tmp/ccBPN2mg.s:269    .text.LCD_BGR2RGB:0000000000000000 LCD_BGR2RGB
     /tmp/ccBPN2mg.s:290    .text.opt_delay:0000000000000000 $t
     /tmp/ccBPN2mg.s:297    .text.opt_delay:0000000000000000 opt_delay
     /tmp/ccBPN2mg.s:324    .text.LCD_DisplayOn:0000000000000000 $t
     /tmp/ccBPN2mg.s:331    .text.LCD_DisplayOn:0000000000000000 LCD_DisplayOn
     /tmp/ccBPN2mg.s:351    .text.LCD_DisplayOff:0000000000000000 $t
     /tmp/ccBPN2mg.s:358    .text.LCD_DisplayOff:0000000000000000 LCD_DisplayOff
     /tmp/ccBPN2mg.s:378    .text.LCD_SetCursor:0000000000000000 $t
     /tmp/ccBPN2mg.s:385    .text.LCD_SetCursor:0000000000000000 LCD_SetCursor
     /tmp/ccBPN2mg.s:431    .text.LCD_SetCursor:0000000000000030 $d
     /tmp/ccBPN2mg.s:436    .text.LCD_ReadPoint:0000000000000000 $t
     /tmp/ccBPN2mg.s:443    .text.LCD_ReadPoint:0000000000000000 LCD_ReadPoint
     /tmp/ccBPN2mg.s:513    .text.LCD_ReadPoint:0000000000000048 $d
     /tmp/ccBPN2mg.s:518    .text.LCD_Scan_Dir:0000000000000000 $t
     /tmp/ccBPN2mg.s:525    .text.LCD_Scan_Dir:0000000000000000 LCD_Scan_Dir
     /tmp/ccBPN2mg.s:545    .text.LCD_Scan_Dir:000000000000000c $d
     /tmp/ccBPN2mg.s:609    .text.LCD_DrawPoint:0000000000000000 $t
     /tmp/ccBPN2mg.s:616    .text.LCD_DrawPoint:0000000000000000 LCD_DrawPoint
     /tmp/ccBPN2mg.s:643    .text.LCD_DrawPoint:0000000000000014 $d
     /tmp/ccBPN2mg.s:649    .text.LCD_Fast_DrawPoint:0000000000000000 $t
     /tmp/ccBPN2mg.s:656    .text.LCD_Fast_DrawPoint:0000000000000000 LCD_Fast_DrawPoint
     /tmp/ccBPN2mg.s:713    .text.LCD_Fast_DrawPoint:000000000000003c $d
     /tmp/ccBPN2mg.s:719    .text.LCD_Display_Dir:0000000000000000 $t
     /tmp/ccBPN2mg.s:726    .text.LCD_Display_Dir:0000000000000000 LCD_Display_Dir
     /tmp/ccBPN2mg.s:791    .text.LCD_Display_Dir:0000000000000048 $d
     /tmp/ccBPN2mg.s:796    .text.LCD_Set_Window:0000000000000000 $t
     /tmp/ccBPN2mg.s:803    .text.LCD_Set_Window:0000000000000000 LCD_Set_Window
     /tmp/ccBPN2mg.s:880    .text.LCD_Set_Window:0000000000000060 $d
     /tmp/ccBPN2mg.s:885    .text.HAL_SRAM_MspInit:0000000000000000 $t
     /tmp/ccBPN2mg.s:892    .text.HAL_SRAM_MspInit:0000000000000000 HAL_SRAM_MspInit
     /tmp/ccBPN2mg.s:979    .text.HAL_SRAM_MspInit:0000000000000078 $d
     /tmp/ccBPN2mg.s:986    .text.LCD_Clear:0000000000000000 $t
     /tmp/ccBPN2mg.s:993    .text.LCD_Clear:0000000000000000 LCD_Clear
ARM GAS  /tmp/ccBPN2mg.s 			page 66


     /tmp/ccBPN2mg.s:1048   .text.LCD_Clear:000000000000002c $d
     /tmp/ccBPN2mg.s:1054   .text.LCD_Init:0000000000000000 $t
     /tmp/ccBPN2mg.s:1061   .text.LCD_Init:0000000000000000 LCD_Init
     /tmp/ccBPN2mg.s:1586   .text.LCD_Init:00000000000002fc $d
                            *COM*:0000000000000050 SRAM_Handler
     /tmp/ccBPN2mg.s:1595   .text.LCD_Fill:0000000000000000 $t
     /tmp/ccBPN2mg.s:1602   .text.LCD_Fill:0000000000000000 LCD_Fill
     /tmp/ccBPN2mg.s:1673   .text.LCD_Fill:0000000000000040 $d
     /tmp/ccBPN2mg.s:1678   .text.LCD_Color_Fill:0000000000000000 $t
     /tmp/ccBPN2mg.s:1685   .text.LCD_Color_Fill:0000000000000000 LCD_Color_Fill
     /tmp/ccBPN2mg.s:1765   .text.LCD_Color_Fill:0000000000000054 $d
     /tmp/ccBPN2mg.s:1770   .text.LCD_DrawLine:0000000000000000 $t
     /tmp/ccBPN2mg.s:1777   .text.LCD_DrawLine:0000000000000000 LCD_DrawLine
     /tmp/ccBPN2mg.s:1935   .text.LCD_DrawRectangle:0000000000000000 $t
     /tmp/ccBPN2mg.s:1942   .text.LCD_DrawRectangle:0000000000000000 LCD_DrawRectangle
     /tmp/ccBPN2mg.s:1993   .text.LCD_Draw_Circle:0000000000000000 $t
     /tmp/ccBPN2mg.s:2000   .text.LCD_Draw_Circle:0000000000000000 LCD_Draw_Circle
     /tmp/ccBPN2mg.s:2135   .text.LCD_ShowChar:0000000000000000 $t
     /tmp/ccBPN2mg.s:2142   .text.LCD_ShowChar:0000000000000000 LCD_ShowChar
     /tmp/ccBPN2mg.s:2331   .text.LCD_ShowChar:00000000000000ec $d
     /tmp/ccBPN2mg.s:2342   .text.LCD_Pow:0000000000000000 $t
     /tmp/ccBPN2mg.s:2349   .text.LCD_Pow:0000000000000000 LCD_Pow
     /tmp/ccBPN2mg.s:2383   .text.LCD_ShowNum:0000000000000000 $t
     /tmp/ccBPN2mg.s:2390   .text.LCD_ShowNum:0000000000000000 LCD_ShowNum
     /tmp/ccBPN2mg.s:2507   .text.LCD_ShowNum:000000000000008c $d
     /tmp/ccBPN2mg.s:2512   .text.LCD_ShowxNum:0000000000000000 $t
     /tmp/ccBPN2mg.s:2519   .text.LCD_ShowxNum:0000000000000000 LCD_ShowxNum
     /tmp/ccBPN2mg.s:2653   .text.LCD_ShowxNum:00000000000000b4 $d
     /tmp/ccBPN2mg.s:2658   .text.LCD_ShowString:0000000000000000 $t
     /tmp/ccBPN2mg.s:2665   .text.LCD_ShowString:0000000000000000 LCD_ShowString
     /tmp/ccBPN2mg.s:2776   .rti_fn.1:0000000000000000 __rt_init_LCD_Init
     /tmp/ccBPN2mg.s:2763   .data.BACK_COLOR:0000000000000000 BACK_COLOR
     /tmp/ccBPN2mg.s:2770   .data.POINT_COLOR:0000000000000000 POINT_COLOR
     /tmp/ccBPN2mg.s:2759   .data.BACK_COLOR:0000000000000000 $d
     /tmp/ccBPN2mg.s:2766   .data.POINT_COLOR:0000000000000000 $d
     /tmp/ccBPN2mg.s:2773   .rti_fn.1:0000000000000000 $d
                     .debug_frame:0000000000000010 $d
     /tmp/ccBPN2mg.s:552    .text.LCD_Scan_Dir:0000000000000013 $d
     /tmp/ccBPN2mg.s:552    .text.LCD_Scan_Dir:0000000000000014 $t

UNDEFINED SYMBOLS
delay_us
HAL_GPIO_Init
HAL_SRAM_Init
delay_ms
asc2_1206
asc2_1608
asc2_2412
asc2_3216
