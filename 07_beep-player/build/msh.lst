ARM GAS  /tmp/cc8KpLGG.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"msh.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.str_common,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	str_common:
  25              	.LFB24:
  26              		.file 1 "rt-thread/components/finsh/msh.c"
   1:rt-thread/components/finsh/msh.c **** /*
   2:rt-thread/components/finsh/msh.c ****  * Copyright (c) 2006-2018, RT-Thread Development Team
   3:rt-thread/components/finsh/msh.c ****  *
   4:rt-thread/components/finsh/msh.c ****  * SPDX-License-Identifier: Apache-2.0
   5:rt-thread/components/finsh/msh.c ****  *
   6:rt-thread/components/finsh/msh.c ****  * Change Logs:
   7:rt-thread/components/finsh/msh.c ****  * Date           Author       Notes
   8:rt-thread/components/finsh/msh.c ****  * 2013-03-30     Bernard      the first verion for finsh
   9:rt-thread/components/finsh/msh.c ****  * 2014-01-03     Bernard      msh can execute module.
  10:rt-thread/components/finsh/msh.c ****  * 2017-07-19     Aubr.Cool    limit argc to RT_FINSH_ARG_MAX
  11:rt-thread/components/finsh/msh.c ****  */
  12:rt-thread/components/finsh/msh.c **** #include <rtthread.h>
  13:rt-thread/components/finsh/msh.c **** 
  14:rt-thread/components/finsh/msh.c **** #ifdef FINSH_USING_MSH
  15:rt-thread/components/finsh/msh.c **** 
  16:rt-thread/components/finsh/msh.c **** #include "msh.h"
  17:rt-thread/components/finsh/msh.c **** #include <finsh.h>
  18:rt-thread/components/finsh/msh.c **** #include <shell.h>
  19:rt-thread/components/finsh/msh.c **** 
  20:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_DFS
  21:rt-thread/components/finsh/msh.c **** #include <dfs_posix.h>
  22:rt-thread/components/finsh/msh.c **** #endif
  23:rt-thread/components/finsh/msh.c **** 
  24:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_MODULE
  25:rt-thread/components/finsh/msh.c **** #include <dlmodule.h>
  26:rt-thread/components/finsh/msh.c **** #endif
  27:rt-thread/components/finsh/msh.c **** 
  28:rt-thread/components/finsh/msh.c **** #ifndef FINSH_ARG_MAX
  29:rt-thread/components/finsh/msh.c **** #define FINSH_ARG_MAX    8
  30:rt-thread/components/finsh/msh.c **** #endif
  31:rt-thread/components/finsh/msh.c **** 
  32:rt-thread/components/finsh/msh.c **** typedef int (*cmd_function_t)(int argc, char **argv);
ARM GAS  /tmp/cc8KpLGG.s 			page 2


  33:rt-thread/components/finsh/msh.c **** 
  34:rt-thread/components/finsh/msh.c **** #ifdef FINSH_USING_MSH
  35:rt-thread/components/finsh/msh.c **** #ifdef FINSH_USING_MSH_ONLY
  36:rt-thread/components/finsh/msh.c **** rt_bool_t msh_is_used(void)
  37:rt-thread/components/finsh/msh.c **** {
  38:rt-thread/components/finsh/msh.c ****     return RT_TRUE;
  39:rt-thread/components/finsh/msh.c **** }
  40:rt-thread/components/finsh/msh.c **** #else
  41:rt-thread/components/finsh/msh.c **** #ifdef FINSH_USING_MSH_DEFAULT
  42:rt-thread/components/finsh/msh.c **** static rt_bool_t __msh_state = RT_TRUE;
  43:rt-thread/components/finsh/msh.c **** #else
  44:rt-thread/components/finsh/msh.c **** static rt_bool_t __msh_state = RT_FALSE;
  45:rt-thread/components/finsh/msh.c **** #endif
  46:rt-thread/components/finsh/msh.c **** rt_bool_t msh_is_used(void)
  47:rt-thread/components/finsh/msh.c **** {
  48:rt-thread/components/finsh/msh.c ****     return __msh_state;
  49:rt-thread/components/finsh/msh.c **** }
  50:rt-thread/components/finsh/msh.c **** 
  51:rt-thread/components/finsh/msh.c **** static int msh_exit(int argc, char **argv)
  52:rt-thread/components/finsh/msh.c **** {
  53:rt-thread/components/finsh/msh.c ****     /* return to finsh shell mode */
  54:rt-thread/components/finsh/msh.c ****     __msh_state = RT_FALSE;
  55:rt-thread/components/finsh/msh.c ****     return 0;
  56:rt-thread/components/finsh/msh.c **** }
  57:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(msh_exit, __cmd_exit, return to RT-Thread shell mode.);
  58:rt-thread/components/finsh/msh.c **** 
  59:rt-thread/components/finsh/msh.c **** static int msh_enter(void)
  60:rt-thread/components/finsh/msh.c **** {
  61:rt-thread/components/finsh/msh.c ****     /* enter module shell mode */
  62:rt-thread/components/finsh/msh.c ****     __msh_state = RT_TRUE;
  63:rt-thread/components/finsh/msh.c ****     return 0;
  64:rt-thread/components/finsh/msh.c **** }
  65:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(msh_enter, msh, use module shell);
  66:rt-thread/components/finsh/msh.c **** #endif
  67:rt-thread/components/finsh/msh.c **** 
  68:rt-thread/components/finsh/msh.c **** int msh_help(int argc, char **argv)
  69:rt-thread/components/finsh/msh.c **** {
  70:rt-thread/components/finsh/msh.c ****     rt_kprintf("RT-Thread shell commands:\n");
  71:rt-thread/components/finsh/msh.c ****     {
  72:rt-thread/components/finsh/msh.c ****         struct finsh_syscall *index;
  73:rt-thread/components/finsh/msh.c **** 
  74:rt-thread/components/finsh/msh.c ****         for (index = _syscall_table_begin;
  75:rt-thread/components/finsh/msh.c ****                 index < _syscall_table_end;
  76:rt-thread/components/finsh/msh.c ****                 FINSH_NEXT_SYSCALL(index))
  77:rt-thread/components/finsh/msh.c ****         {
  78:rt-thread/components/finsh/msh.c ****             if (strncmp(index->name, "__cmd_", 6) != 0) continue;
  79:rt-thread/components/finsh/msh.c **** #if defined(FINSH_USING_DESCRIPTION) && defined(FINSH_USING_SYMTAB)
  80:rt-thread/components/finsh/msh.c ****             rt_kprintf("%-16s - %s\n", &index->name[6], index->desc);
  81:rt-thread/components/finsh/msh.c **** #else
  82:rt-thread/components/finsh/msh.c ****             rt_kprintf("%s ", &index->name[6]);
  83:rt-thread/components/finsh/msh.c **** #endif
  84:rt-thread/components/finsh/msh.c ****         }
  85:rt-thread/components/finsh/msh.c ****     }
  86:rt-thread/components/finsh/msh.c ****     rt_kprintf("\n");
  87:rt-thread/components/finsh/msh.c **** 
  88:rt-thread/components/finsh/msh.c ****     return 0;
  89:rt-thread/components/finsh/msh.c **** }
ARM GAS  /tmp/cc8KpLGG.s 			page 3


  90:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(msh_help, __cmd_help, RT-Thread shell help.);
  91:rt-thread/components/finsh/msh.c **** 
  92:rt-thread/components/finsh/msh.c **** int cmd_ps(int argc, char **argv)
  93:rt-thread/components/finsh/msh.c **** {
  94:rt-thread/components/finsh/msh.c ****     extern long list_thread(void);
  95:rt-thread/components/finsh/msh.c ****     extern int list_module(void);
  96:rt-thread/components/finsh/msh.c **** 
  97:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_MODULE
  98:rt-thread/components/finsh/msh.c ****     if ((argc == 2) && (strcmp(argv[1], "-m") == 0))
  99:rt-thread/components/finsh/msh.c ****         list_module();
 100:rt-thread/components/finsh/msh.c ****     else
 101:rt-thread/components/finsh/msh.c **** #endif
 102:rt-thread/components/finsh/msh.c ****         list_thread();
 103:rt-thread/components/finsh/msh.c ****     return 0;
 104:rt-thread/components/finsh/msh.c **** }
 105:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(cmd_ps, __cmd_ps, List threads in the system.);
 106:rt-thread/components/finsh/msh.c **** 
 107:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_HEAP
 108:rt-thread/components/finsh/msh.c **** int cmd_free(int argc, char **argv)
 109:rt-thread/components/finsh/msh.c **** {
 110:rt-thread/components/finsh/msh.c ****     extern void list_mem(void);
 111:rt-thread/components/finsh/msh.c ****     extern void list_memheap(void);
 112:rt-thread/components/finsh/msh.c **** 
 113:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_MEMHEAP_AS_HEAP
 114:rt-thread/components/finsh/msh.c ****     list_memheap();
 115:rt-thread/components/finsh/msh.c **** #else
 116:rt-thread/components/finsh/msh.c ****     list_mem();
 117:rt-thread/components/finsh/msh.c **** #endif
 118:rt-thread/components/finsh/msh.c ****     return 0;
 119:rt-thread/components/finsh/msh.c **** }
 120:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(cmd_free, __cmd_free, Show the memory usage in the system.);
 121:rt-thread/components/finsh/msh.c **** #endif
 122:rt-thread/components/finsh/msh.c **** 
 123:rt-thread/components/finsh/msh.c **** static int msh_split(char *cmd, rt_size_t length, char *argv[FINSH_ARG_MAX])
 124:rt-thread/components/finsh/msh.c **** {
 125:rt-thread/components/finsh/msh.c ****     char *ptr;
 126:rt-thread/components/finsh/msh.c ****     rt_size_t position;
 127:rt-thread/components/finsh/msh.c ****     rt_size_t argc;
 128:rt-thread/components/finsh/msh.c ****     rt_size_t i;
 129:rt-thread/components/finsh/msh.c **** 
 130:rt-thread/components/finsh/msh.c ****     ptr = cmd;
 131:rt-thread/components/finsh/msh.c ****     position = 0; argc = 0;
 132:rt-thread/components/finsh/msh.c **** 
 133:rt-thread/components/finsh/msh.c ****     while (position < length)
 134:rt-thread/components/finsh/msh.c ****     {
 135:rt-thread/components/finsh/msh.c ****         /* strip bank and tab */
 136:rt-thread/components/finsh/msh.c ****         while ((*ptr == ' ' || *ptr == '\t') && position < length)
 137:rt-thread/components/finsh/msh.c ****         {
 138:rt-thread/components/finsh/msh.c ****             *ptr = '\0';
 139:rt-thread/components/finsh/msh.c ****             ptr ++; position ++;
 140:rt-thread/components/finsh/msh.c ****         }
 141:rt-thread/components/finsh/msh.c **** 
 142:rt-thread/components/finsh/msh.c ****         if(argc >= FINSH_ARG_MAX)
 143:rt-thread/components/finsh/msh.c ****         {
 144:rt-thread/components/finsh/msh.c ****             rt_kprintf("Too many args ! We only Use:\n");
 145:rt-thread/components/finsh/msh.c ****             for(i = 0; i < argc; i++)
 146:rt-thread/components/finsh/msh.c ****             {
ARM GAS  /tmp/cc8KpLGG.s 			page 4


 147:rt-thread/components/finsh/msh.c ****                 rt_kprintf("%s ", argv[i]);
 148:rt-thread/components/finsh/msh.c ****             }
 149:rt-thread/components/finsh/msh.c ****             rt_kprintf("\n");
 150:rt-thread/components/finsh/msh.c ****             break;
 151:rt-thread/components/finsh/msh.c ****         }
 152:rt-thread/components/finsh/msh.c **** 
 153:rt-thread/components/finsh/msh.c ****         if (position >= length) break;
 154:rt-thread/components/finsh/msh.c **** 
 155:rt-thread/components/finsh/msh.c ****         /* handle string */
 156:rt-thread/components/finsh/msh.c ****         if (*ptr == '"')
 157:rt-thread/components/finsh/msh.c ****         {
 158:rt-thread/components/finsh/msh.c ****             ptr ++; position ++;
 159:rt-thread/components/finsh/msh.c ****             argv[argc] = ptr; argc ++;
 160:rt-thread/components/finsh/msh.c **** 
 161:rt-thread/components/finsh/msh.c ****             /* skip this string */
 162:rt-thread/components/finsh/msh.c ****             while (*ptr != '"' && position < length)
 163:rt-thread/components/finsh/msh.c ****             {
 164:rt-thread/components/finsh/msh.c ****                 if (*ptr == '\\')
 165:rt-thread/components/finsh/msh.c ****                 {
 166:rt-thread/components/finsh/msh.c ****                     if (*(ptr + 1) == '"')
 167:rt-thread/components/finsh/msh.c ****                     {
 168:rt-thread/components/finsh/msh.c ****                         ptr ++; position ++;
 169:rt-thread/components/finsh/msh.c ****                     }
 170:rt-thread/components/finsh/msh.c ****                 }
 171:rt-thread/components/finsh/msh.c ****                 ptr ++; position ++;
 172:rt-thread/components/finsh/msh.c ****             }
 173:rt-thread/components/finsh/msh.c ****             if (position >= length) break;
 174:rt-thread/components/finsh/msh.c **** 
 175:rt-thread/components/finsh/msh.c ****             /* skip '"' */
 176:rt-thread/components/finsh/msh.c ****             *ptr = '\0'; ptr ++; position ++;
 177:rt-thread/components/finsh/msh.c ****         }
 178:rt-thread/components/finsh/msh.c ****         else
 179:rt-thread/components/finsh/msh.c ****         {
 180:rt-thread/components/finsh/msh.c ****             argv[argc] = ptr;
 181:rt-thread/components/finsh/msh.c ****             argc ++;
 182:rt-thread/components/finsh/msh.c ****             while ((*ptr != ' ' && *ptr != '\t') && position < length)
 183:rt-thread/components/finsh/msh.c ****             {
 184:rt-thread/components/finsh/msh.c ****                 ptr ++; position ++;
 185:rt-thread/components/finsh/msh.c ****             }
 186:rt-thread/components/finsh/msh.c ****             if (position >= length) break;
 187:rt-thread/components/finsh/msh.c ****         }
 188:rt-thread/components/finsh/msh.c ****     }
 189:rt-thread/components/finsh/msh.c **** 
 190:rt-thread/components/finsh/msh.c ****     return argc;
 191:rt-thread/components/finsh/msh.c **** }
 192:rt-thread/components/finsh/msh.c **** 
 193:rt-thread/components/finsh/msh.c **** static cmd_function_t msh_get_cmd(char *cmd, int size)
 194:rt-thread/components/finsh/msh.c **** {
 195:rt-thread/components/finsh/msh.c ****     struct finsh_syscall *index;
 196:rt-thread/components/finsh/msh.c ****     cmd_function_t cmd_func = RT_NULL;
 197:rt-thread/components/finsh/msh.c **** 
 198:rt-thread/components/finsh/msh.c ****     for (index = _syscall_table_begin;
 199:rt-thread/components/finsh/msh.c ****             index < _syscall_table_end;
 200:rt-thread/components/finsh/msh.c ****             FINSH_NEXT_SYSCALL(index))
 201:rt-thread/components/finsh/msh.c ****     {
 202:rt-thread/components/finsh/msh.c ****         if (strncmp(index->name, "__cmd_", 6) != 0) continue;
 203:rt-thread/components/finsh/msh.c **** 
ARM GAS  /tmp/cc8KpLGG.s 			page 5


 204:rt-thread/components/finsh/msh.c ****         if (strncmp(&index->name[6], cmd, size) == 0 &&
 205:rt-thread/components/finsh/msh.c ****                 index->name[6 + size] == '\0')
 206:rt-thread/components/finsh/msh.c ****         {
 207:rt-thread/components/finsh/msh.c ****             cmd_func = (cmd_function_t)index->func;
 208:rt-thread/components/finsh/msh.c ****             break;
 209:rt-thread/components/finsh/msh.c ****         }
 210:rt-thread/components/finsh/msh.c ****     }
 211:rt-thread/components/finsh/msh.c **** 
 212:rt-thread/components/finsh/msh.c ****     return cmd_func;
 213:rt-thread/components/finsh/msh.c **** }
 214:rt-thread/components/finsh/msh.c **** 
 215:rt-thread/components/finsh/msh.c **** #if defined(RT_USING_MODULE) && defined(RT_USING_DFS)
 216:rt-thread/components/finsh/msh.c **** /* Return 0 on module executed. Other value indicate error.
 217:rt-thread/components/finsh/msh.c ****  */
 218:rt-thread/components/finsh/msh.c **** int msh_exec_module(const char *cmd_line, int size)
 219:rt-thread/components/finsh/msh.c **** {
 220:rt-thread/components/finsh/msh.c ****     int ret;
 221:rt-thread/components/finsh/msh.c ****     int fd = -1;
 222:rt-thread/components/finsh/msh.c ****     char *pg_name;
 223:rt-thread/components/finsh/msh.c ****     int length, cmd_length = 0;
 224:rt-thread/components/finsh/msh.c **** 
 225:rt-thread/components/finsh/msh.c ****     if (size == 0)
 226:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 227:rt-thread/components/finsh/msh.c ****     /* get the length of command0 */
 228:rt-thread/components/finsh/msh.c ****     while ((cmd_line[cmd_length] != ' ' && cmd_line[cmd_length] != '\t') && cmd_length < size)
 229:rt-thread/components/finsh/msh.c ****         cmd_length ++;
 230:rt-thread/components/finsh/msh.c **** 
 231:rt-thread/components/finsh/msh.c ****     /* get name length */
 232:rt-thread/components/finsh/msh.c ****     length = cmd_length + 32;
 233:rt-thread/components/finsh/msh.c **** 
 234:rt-thread/components/finsh/msh.c ****     /* allocate program name memory */
 235:rt-thread/components/finsh/msh.c ****     pg_name = (char *) rt_malloc(length);
 236:rt-thread/components/finsh/msh.c ****     if (pg_name == RT_NULL)
 237:rt-thread/components/finsh/msh.c ****         return -RT_ENOMEM;
 238:rt-thread/components/finsh/msh.c **** 
 239:rt-thread/components/finsh/msh.c ****     /* copy command0 */
 240:rt-thread/components/finsh/msh.c ****     memcpy(pg_name, cmd_line, cmd_length);
 241:rt-thread/components/finsh/msh.c ****     pg_name[cmd_length] = '\0';
 242:rt-thread/components/finsh/msh.c **** 
 243:rt-thread/components/finsh/msh.c ****     if (strstr(pg_name, ".mo") != RT_NULL || strstr(pg_name, ".MO") != RT_NULL)
 244:rt-thread/components/finsh/msh.c ****     {
 245:rt-thread/components/finsh/msh.c ****         /* try to open program */
 246:rt-thread/components/finsh/msh.c ****         fd = open(pg_name, O_RDONLY, 0);
 247:rt-thread/components/finsh/msh.c **** 
 248:rt-thread/components/finsh/msh.c ****         /* search in /bin path */
 249:rt-thread/components/finsh/msh.c ****         if (fd < 0)
 250:rt-thread/components/finsh/msh.c ****         {
 251:rt-thread/components/finsh/msh.c ****             rt_snprintf(pg_name, length - 1, "/bin/%.*s", cmd_length, cmd_line);
 252:rt-thread/components/finsh/msh.c ****             fd = open(pg_name, O_RDONLY, 0);
 253:rt-thread/components/finsh/msh.c ****         }
 254:rt-thread/components/finsh/msh.c ****     }
 255:rt-thread/components/finsh/msh.c ****     else
 256:rt-thread/components/finsh/msh.c ****     {
 257:rt-thread/components/finsh/msh.c ****         /* add .mo and open program */
 258:rt-thread/components/finsh/msh.c **** 
 259:rt-thread/components/finsh/msh.c ****         /* try to open program */
 260:rt-thread/components/finsh/msh.c ****         strcat(pg_name, ".mo");
ARM GAS  /tmp/cc8KpLGG.s 			page 6


 261:rt-thread/components/finsh/msh.c ****         fd = open(pg_name, O_RDONLY, 0);
 262:rt-thread/components/finsh/msh.c **** 
 263:rt-thread/components/finsh/msh.c ****         /* search in /bin path */
 264:rt-thread/components/finsh/msh.c ****         if (fd < 0)
 265:rt-thread/components/finsh/msh.c ****         {
 266:rt-thread/components/finsh/msh.c ****             rt_snprintf(pg_name, length - 1, "/bin/%.*s.mo", cmd_length, cmd_line);
 267:rt-thread/components/finsh/msh.c ****             fd = open(pg_name, O_RDONLY, 0);
 268:rt-thread/components/finsh/msh.c ****         }
 269:rt-thread/components/finsh/msh.c ****     }
 270:rt-thread/components/finsh/msh.c **** 
 271:rt-thread/components/finsh/msh.c ****     if (fd >= 0)
 272:rt-thread/components/finsh/msh.c ****     {
 273:rt-thread/components/finsh/msh.c ****         /* found program */
 274:rt-thread/components/finsh/msh.c ****         close(fd);
 275:rt-thread/components/finsh/msh.c ****         dlmodule_exec(pg_name, cmd_line, size);
 276:rt-thread/components/finsh/msh.c ****         ret = 0;
 277:rt-thread/components/finsh/msh.c ****     }
 278:rt-thread/components/finsh/msh.c ****     else
 279:rt-thread/components/finsh/msh.c ****     {
 280:rt-thread/components/finsh/msh.c ****         ret = -1;
 281:rt-thread/components/finsh/msh.c ****     }
 282:rt-thread/components/finsh/msh.c **** 
 283:rt-thread/components/finsh/msh.c ****     rt_free(pg_name);
 284:rt-thread/components/finsh/msh.c ****     return ret;
 285:rt-thread/components/finsh/msh.c **** }
 286:rt-thread/components/finsh/msh.c **** 
 287:rt-thread/components/finsh/msh.c **** int system(const char *command)
 288:rt-thread/components/finsh/msh.c **** {
 289:rt-thread/components/finsh/msh.c ****     int ret = -RT_ENOMEM;
 290:rt-thread/components/finsh/msh.c ****     char *cmd = rt_strdup(command);
 291:rt-thread/components/finsh/msh.c **** 
 292:rt-thread/components/finsh/msh.c ****     if (cmd)
 293:rt-thread/components/finsh/msh.c ****     {
 294:rt-thread/components/finsh/msh.c ****         ret = msh_exec(cmd, rt_strlen(cmd));
 295:rt-thread/components/finsh/msh.c ****         rt_free(cmd);
 296:rt-thread/components/finsh/msh.c ****     }
 297:rt-thread/components/finsh/msh.c **** 
 298:rt-thread/components/finsh/msh.c ****     return ret;
 299:rt-thread/components/finsh/msh.c **** }
 300:rt-thread/components/finsh/msh.c **** RTM_EXPORT(system);
 301:rt-thread/components/finsh/msh.c **** #endif
 302:rt-thread/components/finsh/msh.c **** 
 303:rt-thread/components/finsh/msh.c **** static int _msh_exec_cmd(char *cmd, rt_size_t length, int *retp)
 304:rt-thread/components/finsh/msh.c **** {
 305:rt-thread/components/finsh/msh.c ****     int argc;
 306:rt-thread/components/finsh/msh.c ****     rt_size_t cmd0_size = 0;
 307:rt-thread/components/finsh/msh.c ****     cmd_function_t cmd_func;
 308:rt-thread/components/finsh/msh.c ****     char *argv[FINSH_ARG_MAX];
 309:rt-thread/components/finsh/msh.c **** 
 310:rt-thread/components/finsh/msh.c ****     RT_ASSERT(cmd);
 311:rt-thread/components/finsh/msh.c ****     RT_ASSERT(retp);
 312:rt-thread/components/finsh/msh.c **** 
 313:rt-thread/components/finsh/msh.c ****     /* find the size of first command */
 314:rt-thread/components/finsh/msh.c ****     while ((cmd[cmd0_size] != ' ' && cmd[cmd0_size] != '\t') && cmd0_size < length)
 315:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 316:rt-thread/components/finsh/msh.c ****     if (cmd0_size == 0)
 317:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
ARM GAS  /tmp/cc8KpLGG.s 			page 7


 318:rt-thread/components/finsh/msh.c **** 
 319:rt-thread/components/finsh/msh.c ****     cmd_func = msh_get_cmd(cmd, cmd0_size);
 320:rt-thread/components/finsh/msh.c ****     if (cmd_func == RT_NULL)
 321:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 322:rt-thread/components/finsh/msh.c **** 
 323:rt-thread/components/finsh/msh.c ****     /* split arguments */
 324:rt-thread/components/finsh/msh.c ****     memset(argv, 0x00, sizeof(argv));
 325:rt-thread/components/finsh/msh.c ****     argc = msh_split(cmd, length, argv);
 326:rt-thread/components/finsh/msh.c ****     if (argc == 0)
 327:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 328:rt-thread/components/finsh/msh.c **** 
 329:rt-thread/components/finsh/msh.c ****     /* exec this command */
 330:rt-thread/components/finsh/msh.c ****     *retp = cmd_func(argc, argv);
 331:rt-thread/components/finsh/msh.c ****     return 0;
 332:rt-thread/components/finsh/msh.c **** }
 333:rt-thread/components/finsh/msh.c **** 
 334:rt-thread/components/finsh/msh.c **** #if defined(RT_USING_LWP) && defined(RT_USING_DFS)
 335:rt-thread/components/finsh/msh.c **** static int _msh_exec_lwp(char *cmd, rt_size_t length)
 336:rt-thread/components/finsh/msh.c **** {
 337:rt-thread/components/finsh/msh.c ****     int argc;
 338:rt-thread/components/finsh/msh.c ****     int cmd0_size = 0;
 339:rt-thread/components/finsh/msh.c ****     char *argv[FINSH_ARG_MAX];
 340:rt-thread/components/finsh/msh.c ****     int fd = -1;
 341:rt-thread/components/finsh/msh.c ****     char *pg_name;
 342:rt-thread/components/finsh/msh.c **** 
 343:rt-thread/components/finsh/msh.c ****     extern int exec(char*, int, char**);
 344:rt-thread/components/finsh/msh.c **** 
 345:rt-thread/components/finsh/msh.c ****     /* find the size of first command */
 346:rt-thread/components/finsh/msh.c ****     while ((cmd[cmd0_size] != ' ' && cmd[cmd0_size] != '\t') && cmd0_size < length)
 347:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 348:rt-thread/components/finsh/msh.c ****     if (cmd0_size == 0)
 349:rt-thread/components/finsh/msh.c ****         return -1;
 350:rt-thread/components/finsh/msh.c **** 
 351:rt-thread/components/finsh/msh.c ****     /* split arguments */
 352:rt-thread/components/finsh/msh.c ****     rt_memset(argv, 0x00, sizeof(argv));
 353:rt-thread/components/finsh/msh.c ****     argc = msh_split(cmd, length, argv);
 354:rt-thread/components/finsh/msh.c ****     if (argc == 0)
 355:rt-thread/components/finsh/msh.c ****         return -1;
 356:rt-thread/components/finsh/msh.c **** 
 357:rt-thread/components/finsh/msh.c ****     pg_name = argv[0];
 358:rt-thread/components/finsh/msh.c ****     /* try to open program */
 359:rt-thread/components/finsh/msh.c ****     fd = open(pg_name, O_RDONLY, 0);
 360:rt-thread/components/finsh/msh.c **** 
 361:rt-thread/components/finsh/msh.c ****     if (fd < 0)
 362:rt-thread/components/finsh/msh.c ****         return -1;
 363:rt-thread/components/finsh/msh.c **** 
 364:rt-thread/components/finsh/msh.c ****     /* found program */
 365:rt-thread/components/finsh/msh.c ****     close(fd);
 366:rt-thread/components/finsh/msh.c ****     exec(pg_name, argc, argv);
 367:rt-thread/components/finsh/msh.c **** 
 368:rt-thread/components/finsh/msh.c ****     return 0;
 369:rt-thread/components/finsh/msh.c **** }
 370:rt-thread/components/finsh/msh.c **** #endif
 371:rt-thread/components/finsh/msh.c **** 
 372:rt-thread/components/finsh/msh.c **** int msh_exec(char *cmd, rt_size_t length)
 373:rt-thread/components/finsh/msh.c **** {
 374:rt-thread/components/finsh/msh.c ****     int cmd_ret;
ARM GAS  /tmp/cc8KpLGG.s 			page 8


 375:rt-thread/components/finsh/msh.c **** 
 376:rt-thread/components/finsh/msh.c ****     /* strim the beginning of command */
 377:rt-thread/components/finsh/msh.c ****     while (*cmd  == ' ' || *cmd == '\t')
 378:rt-thread/components/finsh/msh.c ****     {
 379:rt-thread/components/finsh/msh.c ****         cmd++;
 380:rt-thread/components/finsh/msh.c ****         length--;
 381:rt-thread/components/finsh/msh.c ****     }
 382:rt-thread/components/finsh/msh.c **** 
 383:rt-thread/components/finsh/msh.c ****     if (length == 0)
 384:rt-thread/components/finsh/msh.c ****         return 0;
 385:rt-thread/components/finsh/msh.c **** 
 386:rt-thread/components/finsh/msh.c ****     /* Exec sequence:
 387:rt-thread/components/finsh/msh.c ****      * 1. built-in command
 388:rt-thread/components/finsh/msh.c ****      * 2. module(if enabled)
 389:rt-thread/components/finsh/msh.c ****      */
 390:rt-thread/components/finsh/msh.c ****     if (_msh_exec_cmd(cmd, length, &cmd_ret) == 0)
 391:rt-thread/components/finsh/msh.c ****     {
 392:rt-thread/components/finsh/msh.c ****         return cmd_ret;
 393:rt-thread/components/finsh/msh.c ****     }
 394:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_DFS
 395:rt-thread/components/finsh/msh.c **** #ifdef DFS_USING_WORKDIR
 396:rt-thread/components/finsh/msh.c ****     if (msh_exec_script(cmd, length) == 0)
 397:rt-thread/components/finsh/msh.c ****     {
 398:rt-thread/components/finsh/msh.c ****         return 0;
 399:rt-thread/components/finsh/msh.c ****     }
 400:rt-thread/components/finsh/msh.c **** #endif
 401:rt-thread/components/finsh/msh.c **** 
 402:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_MODULE
 403:rt-thread/components/finsh/msh.c ****     if (msh_exec_module(cmd, length) == 0)
 404:rt-thread/components/finsh/msh.c ****     {
 405:rt-thread/components/finsh/msh.c ****         return 0;
 406:rt-thread/components/finsh/msh.c ****     }
 407:rt-thread/components/finsh/msh.c **** #endif
 408:rt-thread/components/finsh/msh.c **** 
 409:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_LWP
 410:rt-thread/components/finsh/msh.c ****     if (_msh_exec_lwp(cmd, length) == 0)
 411:rt-thread/components/finsh/msh.c ****     {
 412:rt-thread/components/finsh/msh.c ****         return 0;
 413:rt-thread/components/finsh/msh.c ****     }
 414:rt-thread/components/finsh/msh.c **** #endif
 415:rt-thread/components/finsh/msh.c **** #endif
 416:rt-thread/components/finsh/msh.c **** 
 417:rt-thread/components/finsh/msh.c ****     /* truncate the cmd at the first space. */
 418:rt-thread/components/finsh/msh.c ****     {
 419:rt-thread/components/finsh/msh.c ****         char *tcmd;
 420:rt-thread/components/finsh/msh.c ****         tcmd = cmd;
 421:rt-thread/components/finsh/msh.c ****         while (*tcmd != ' ' && *tcmd != '\0')
 422:rt-thread/components/finsh/msh.c ****         {
 423:rt-thread/components/finsh/msh.c ****             tcmd++;
 424:rt-thread/components/finsh/msh.c ****         }
 425:rt-thread/components/finsh/msh.c ****         *tcmd = '\0';
 426:rt-thread/components/finsh/msh.c ****     }
 427:rt-thread/components/finsh/msh.c ****     rt_kprintf("%s: command not found.\n", cmd);
 428:rt-thread/components/finsh/msh.c ****     return -1;
 429:rt-thread/components/finsh/msh.c **** }
 430:rt-thread/components/finsh/msh.c **** 
 431:rt-thread/components/finsh/msh.c **** static int str_common(const char *str1, const char *str2)
ARM GAS  /tmp/cc8KpLGG.s 			page 9


 432:rt-thread/components/finsh/msh.c **** {
  27              		.loc 1 432 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 433:rt-thread/components/finsh/msh.c ****     const char *str = str1;
  33              		.loc 1 433 0
  34 0000 0346     		mov	r3, r0
 434:rt-thread/components/finsh/msh.c **** 
 435:rt-thread/components/finsh/msh.c ****     while ((*str != 0) && (*str2 != 0) && (*str == *str2))
  35              		.loc 1 435 0
  36 0002 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
  37 0004 6AB1     		cbz	r2, .L8
 432:rt-thread/components/finsh/msh.c ****     const char *str = str1;
  38              		.loc 1 432 0
  39 0006 10B4     		push	{r4}
  40              	.LCFI0:
  41              		.cfi_def_cfa_offset 4
  42              		.cfi_offset 4, -4
  43              	.LVL1:
  44              	.L7:
  45              		.loc 1 435 0 discriminator 1
  46 0008 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
  47 000a 34B1     		cbz	r4, .L3
  48              		.loc 1 435 0 is_stmt 0 discriminator 2
  49 000c A242     		cmp	r2, r4
  50 000e 04D1     		bne	.L3
 436:rt-thread/components/finsh/msh.c ****     {
 437:rt-thread/components/finsh/msh.c ****         str ++;
  51              		.loc 1 437 0 is_stmt 1
  52 0010 0133     		adds	r3, r3, #1
  53              	.LVL2:
 438:rt-thread/components/finsh/msh.c ****         str2 ++;
  54              		.loc 1 438 0
  55 0012 0131     		adds	r1, r1, #1
  56              	.LVL3:
 435:rt-thread/components/finsh/msh.c ****     {
  57              		.loc 1 435 0
  58 0014 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
  59 0016 002A     		cmp	r2, #0
  60 0018 F6D1     		bne	.L7
  61              	.L3:
 439:rt-thread/components/finsh/msh.c ****     }
 440:rt-thread/components/finsh/msh.c **** 
 441:rt-thread/components/finsh/msh.c ****     return (str - str1);
 442:rt-thread/components/finsh/msh.c **** }
  62              		.loc 1 442 0
  63 001a 181A     		subs	r0, r3, r0
  64              	.LVL4:
  65 001c 5DF8044B 		ldr	r4, [sp], #4
  66              	.LCFI1:
  67              		.cfi_restore 4
  68              		.cfi_def_cfa_offset 0
  69 0020 7047     		bx	lr
  70              	.LVL5:
ARM GAS  /tmp/cc8KpLGG.s 			page 10


  71              	.L8:
  72 0022 001A     		subs	r0, r0, r0
  73              	.LVL6:
  74 0024 7047     		bx	lr
  75              		.cfi_endproc
  76              	.LFE24:
  78              		.section	.text.msh_split,"ax",%progbits
  79              		.align	1
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  83              		.fpu fpv4-sp-d16
  85              	msh_split:
  86              	.LFB20:
 124:rt-thread/components/finsh/msh.c ****     char *ptr;
  87              		.loc 1 124 0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              	.LVL7:
  92 0000 70B5     		push	{r4, r5, r6, lr}
  93              	.LCFI2:
  94              		.cfi_def_cfa_offset 16
  95              		.cfi_offset 4, -16
  96              		.cfi_offset 5, -12
  97              		.cfi_offset 6, -8
  98              		.cfi_offset 14, -4
  99 0002 1546     		mov	r5, r2
 100              	.LVL8:
 131:rt-thread/components/finsh/msh.c **** 
 101              		.loc 1 131 0
 102 0004 0024     		movs	r4, #0
 103 0006 2346     		mov	r3, r4
 133:rt-thread/components/finsh/msh.c ****     {
 104              		.loc 1 133 0
 105 0008 4DE0     		b	.L11
 106              	.LVL9:
 107              	.L12:
 136:rt-thread/components/finsh/msh.c ****         {
 108              		.loc 1 136 0 discriminator 3
 109 000a 8B42     		cmp	r3, r1
 110 000c 08D2     		bcs	.L13
 138:rt-thread/components/finsh/msh.c ****             ptr ++; position ++;
 111              		.loc 1 138 0
 112 000e 0022     		movs	r2, #0
 113 0010 00F8012B 		strb	r2, [r0], #1
 114              	.LVL10:
 139:rt-thread/components/finsh/msh.c ****         }
 115              		.loc 1 139 0
 116 0014 0133     		adds	r3, r3, #1
 117              	.LVL11:
 118              	.L28:
 136:rt-thread/components/finsh/msh.c ****         {
 119              		.loc 1 136 0
 120 0016 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 121 0018 202A     		cmp	r2, #32
 122 001a F6D0     		beq	.L12
ARM GAS  /tmp/cc8KpLGG.s 			page 11


 136:rt-thread/components/finsh/msh.c ****         {
 123              		.loc 1 136 0 is_stmt 0 discriminator 2
 124 001c 092A     		cmp	r2, #9
 125 001e F4D0     		beq	.L12
 126              	.L13:
 142:rt-thread/components/finsh/msh.c ****         {
 127              		.loc 1 142 0 is_stmt 1
 128 0020 092C     		cmp	r4, #9
 129 0022 10D8     		bhi	.L30
 153:rt-thread/components/finsh/msh.c **** 
 130              		.loc 1 153 0
 131 0024 8B42     		cmp	r3, r1
 132 0026 1ED2     		bcs	.L18
 156:rt-thread/components/finsh/msh.c ****         {
 133              		.loc 1 156 0
 134 0028 222A     		cmp	r2, #34
 135 002a 1ED0     		beq	.L31
 180:rt-thread/components/finsh/msh.c ****             argc ++;
 136              		.loc 1 180 0
 137 002c 45F82400 		str	r0, [r5, r4, lsl #2]
 181:rt-thread/components/finsh/msh.c ****             while ((*ptr != ' ' && *ptr != '\t') && position < length)
 138              		.loc 1 181 0
 139 0030 0134     		adds	r4, r4, #1
 140              	.LVL12:
 141              	.L25:
 182:rt-thread/components/finsh/msh.c ****             {
 142              		.loc 1 182 0
 143 0032 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 144 0034 202A     		cmp	r2, #32
 145 0036 34D0     		beq	.L26
 182:rt-thread/components/finsh/msh.c ****             {
 146              		.loc 1 182 0 is_stmt 0 discriminator 1
 147 0038 092A     		cmp	r2, #9
 148 003a 32D0     		beq	.L26
 182:rt-thread/components/finsh/msh.c ****             {
 149              		.loc 1 182 0 discriminator 2
 150 003c 8B42     		cmp	r3, r1
 151 003e 30D2     		bcs	.L26
 184:rt-thread/components/finsh/msh.c ****             }
 152              		.loc 1 184 0 is_stmt 1
 153 0040 0130     		adds	r0, r0, #1
 154              	.LVL13:
 155 0042 0133     		adds	r3, r3, #1
 156              	.LVL14:
 157 0044 F5E7     		b	.L25
 158              	.L30:
 144:rt-thread/components/finsh/msh.c ****             for(i = 0; i < argc; i++)
 159              		.loc 1 144 0
 160 0046 1948     		ldr	r0, .L32
 161              	.LVL15:
 162 0048 FFF7FEFF 		bl	rt_kprintf
 163              	.LVL16:
 145:rt-thread/components/finsh/msh.c ****             {
 164              		.loc 1 145 0
 165 004c 0026     		movs	r6, #0
 166 004e 05E0     		b	.L16
 167              	.LVL17:
ARM GAS  /tmp/cc8KpLGG.s 			page 12


 168              	.L17:
 147:rt-thread/components/finsh/msh.c ****             }
 169              		.loc 1 147 0 discriminator 3
 170 0050 55F82610 		ldr	r1, [r5, r6, lsl #2]
 171 0054 1648     		ldr	r0, .L32+4
 172 0056 FFF7FEFF 		bl	rt_kprintf
 173              	.LVL18:
 145:rt-thread/components/finsh/msh.c ****             {
 174              		.loc 1 145 0 discriminator 3
 175 005a 0136     		adds	r6, r6, #1
 176              	.LVL19:
 177              	.L16:
 145:rt-thread/components/finsh/msh.c ****             {
 178              		.loc 1 145 0 is_stmt 0 discriminator 1
 179 005c B442     		cmp	r4, r6
 180 005e F7D8     		bhi	.L17
 149:rt-thread/components/finsh/msh.c ****             break;
 181              		.loc 1 149 0 is_stmt 1
 182 0060 1448     		ldr	r0, .L32+8
 183 0062 FFF7FEFF 		bl	rt_kprintf
 184              	.LVL20:
 185              	.L18:
 191:rt-thread/components/finsh/msh.c **** 
 186              		.loc 1 191 0
 187 0066 2046     		mov	r0, r4
 188 0068 70BD     		pop	{r4, r5, r6, pc}
 189              	.LVL21:
 190              	.L31:
 158:rt-thread/components/finsh/msh.c ****             argv[argc] = ptr; argc ++;
 191              		.loc 1 158 0
 192 006a 0130     		adds	r0, r0, #1
 193              	.LVL22:
 194 006c 0133     		adds	r3, r3, #1
 195              	.LVL23:
 159:rt-thread/components/finsh/msh.c **** 
 196              		.loc 1 159 0
 197 006e 45F82400 		str	r0, [r5, r4, lsl #2]
 198 0072 0134     		adds	r4, r4, #1
 199              	.LVL24:
 162:rt-thread/components/finsh/msh.c ****             {
 200              		.loc 1 162 0
 201 0074 01E0     		b	.L20
 202              	.L21:
 171:rt-thread/components/finsh/msh.c ****             }
 203              		.loc 1 171 0
 204 0076 0130     		adds	r0, r0, #1
 205              	.LVL25:
 206 0078 0133     		adds	r3, r3, #1
 207              	.LVL26:
 208              	.L20:
 162:rt-thread/components/finsh/msh.c ****             {
 209              		.loc 1 162 0
 210 007a 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 211 007c 222A     		cmp	r2, #34
 212 007e 09D0     		beq	.L22
 162:rt-thread/components/finsh/msh.c ****             {
 213              		.loc 1 162 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cc8KpLGG.s 			page 13


 214 0080 8B42     		cmp	r3, r1
 215 0082 07D2     		bcs	.L22
 164:rt-thread/components/finsh/msh.c ****                 {
 216              		.loc 1 164 0 is_stmt 1
 217 0084 5C2A     		cmp	r2, #92
 218 0086 F6D1     		bne	.L21
 166:rt-thread/components/finsh/msh.c ****                     {
 219              		.loc 1 166 0
 220 0088 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 221 008a 222A     		cmp	r2, #34
 222 008c F3D1     		bne	.L21
 168:rt-thread/components/finsh/msh.c ****                     }
 223              		.loc 1 168 0
 224 008e 0130     		adds	r0, r0, #1
 225              	.LVL27:
 226 0090 0133     		adds	r3, r3, #1
 227              	.LVL28:
 228 0092 F0E7     		b	.L21
 229              	.L22:
 173:rt-thread/components/finsh/msh.c **** 
 230              		.loc 1 173 0
 231 0094 8B42     		cmp	r3, r1
 232 0096 E6D2     		bcs	.L18
 176:rt-thread/components/finsh/msh.c ****         }
 233              		.loc 1 176 0
 234 0098 0022     		movs	r2, #0
 235 009a 00F8012B 		strb	r2, [r0], #1
 236              	.LVL29:
 237 009e 0133     		adds	r3, r3, #1
 238              	.LVL30:
 239 00a0 01E0     		b	.L11
 240              	.L26:
 186:rt-thread/components/finsh/msh.c ****         }
 241              		.loc 1 186 0
 242 00a2 8B42     		cmp	r3, r1
 243 00a4 DFD2     		bcs	.L18
 244              	.LVL31:
 245              	.L11:
 133:rt-thread/components/finsh/msh.c ****     {
 246              		.loc 1 133 0
 247 00a6 8B42     		cmp	r3, r1
 248 00a8 B5D3     		bcc	.L28
 249 00aa DCE7     		b	.L18
 250              	.L33:
 251              		.align	2
 252              	.L32:
 253 00ac 00000000 		.word	.LC0
 254 00b0 20000000 		.word	.LC1
 255 00b4 24000000 		.word	.LC2
 256              		.cfi_endproc
 257              	.LFE20:
 259              		.section	.text.msh_help,"ax",%progbits
 260              		.align	1
 261              		.global	msh_help
 262              		.syntax unified
 263              		.thumb
 264              		.thumb_func
ARM GAS  /tmp/cc8KpLGG.s 			page 14


 265              		.fpu fpv4-sp-d16
 267              	msh_help:
 268              	.LFB17:
  69:rt-thread/components/finsh/msh.c ****     rt_kprintf("RT-Thread shell commands:\n");
 269              		.loc 1 69 0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
 273              	.LVL32:
 274 0000 38B5     		push	{r3, r4, r5, lr}
 275              	.LCFI3:
 276              		.cfi_def_cfa_offset 16
 277              		.cfi_offset 3, -16
 278              		.cfi_offset 4, -12
 279              		.cfi_offset 5, -8
 280              		.cfi_offset 14, -4
  70:rt-thread/components/finsh/msh.c ****     {
 281              		.loc 1 70 0
 282 0002 0F48     		ldr	r0, .L40
 283              	.LVL33:
 284 0004 FFF7FEFF 		bl	rt_kprintf
 285              	.LVL34:
 286              	.LBB2:
  74:rt-thread/components/finsh/msh.c ****                 index < _syscall_table_end;
 287              		.loc 1 74 0
 288 0008 0E4B     		ldr	r3, .L40+4
 289 000a 1C68     		ldr	r4, [r3]
 290              	.LVL35:
 291 000c 00E0     		b	.L35
 292              	.L36:
  76:rt-thread/components/finsh/msh.c ****         {
 293              		.loc 1 76 0
 294 000e 0C34     		adds	r4, r4, #12
 295              	.LVL36:
 296              	.L35:
  75:rt-thread/components/finsh/msh.c ****                 FINSH_NEXT_SYSCALL(index))
 297              		.loc 1 75 0 discriminator 1
 298 0010 0D4B     		ldr	r3, .L40+8
 299 0012 1B68     		ldr	r3, [r3]
  74:rt-thread/components/finsh/msh.c ****                 index < _syscall_table_end;
 300              		.loc 1 74 0 discriminator 1
 301 0014 9C42     		cmp	r4, r3
 302 0016 0DD2     		bcs	.L39
  78:rt-thread/components/finsh/msh.c **** #if defined(FINSH_USING_DESCRIPTION) && defined(FINSH_USING_SYMTAB)
 303              		.loc 1 78 0
 304 0018 2568     		ldr	r5, [r4]
 305 001a 0622     		movs	r2, #6
 306 001c 0B49     		ldr	r1, .L40+12
 307 001e 2846     		mov	r0, r5
 308 0020 FFF7FEFF 		bl	strncmp
 309              	.LVL37:
 310 0024 0028     		cmp	r0, #0
 311 0026 F2D1     		bne	.L36
  80:rt-thread/components/finsh/msh.c **** #else
 312              		.loc 1 80 0
 313 0028 6268     		ldr	r2, [r4, #4]
 314 002a A91D     		adds	r1, r5, #6
ARM GAS  /tmp/cc8KpLGG.s 			page 15


 315 002c 0848     		ldr	r0, .L40+16
 316 002e FFF7FEFF 		bl	rt_kprintf
 317              	.LVL38:
 318 0032 ECE7     		b	.L36
 319              	.L39:
 320              	.LBE2:
  86:rt-thread/components/finsh/msh.c **** 
 321              		.loc 1 86 0
 322 0034 0748     		ldr	r0, .L40+20
 323 0036 FFF7FEFF 		bl	rt_kprintf
 324              	.LVL39:
  89:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(msh_help, __cmd_help, RT-Thread shell help.);
 325              		.loc 1 89 0
 326 003a 0020     		movs	r0, #0
 327 003c 38BD     		pop	{r3, r4, r5, pc}
 328              	.LVL40:
 329              	.L41:
 330 003e 00BF     		.align	2
 331              	.L40:
 332 0040 00000000 		.word	.LC3
 333 0044 00000000 		.word	_syscall_table_begin
 334 0048 00000000 		.word	_syscall_table_end
 335 004c 1C000000 		.word	.LC4
 336 0050 24000000 		.word	.LC5
 337 0054 24000000 		.word	.LC2
 338              		.cfi_endproc
 339              	.LFE17:
 341              		.section	.text.msh_get_cmd,"ax",%progbits
 342              		.align	1
 343              		.syntax unified
 344              		.thumb
 345              		.thumb_func
 346              		.fpu fpv4-sp-d16
 348              	msh_get_cmd:
 349              	.LFB21:
 194:rt-thread/components/finsh/msh.c ****     struct finsh_syscall *index;
 350              		.loc 1 194 0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 0
 353              		@ frame_needed = 0, uses_anonymous_args = 0
 354              	.LVL41:
 355 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 356              	.LCFI4:
 357              		.cfi_def_cfa_offset 24
 358              		.cfi_offset 3, -24
 359              		.cfi_offset 4, -20
 360              		.cfi_offset 5, -16
 361              		.cfi_offset 6, -12
 362              		.cfi_offset 7, -8
 363              		.cfi_offset 14, -4
 364 0002 0746     		mov	r7, r0
 365 0004 0E46     		mov	r6, r1
 366              	.LVL42:
 198:rt-thread/components/finsh/msh.c ****             index < _syscall_table_end;
 367              		.loc 1 198 0
 368 0006 0F4B     		ldr	r3, .L49
 369 0008 1C68     		ldr	r4, [r3]
ARM GAS  /tmp/cc8KpLGG.s 			page 16


 370              	.LVL43:
 371 000a 00E0     		b	.L43
 372              	.LVL44:
 373              	.L44:
 200:rt-thread/components/finsh/msh.c ****     {
 374              		.loc 1 200 0
 375 000c 0C34     		adds	r4, r4, #12
 376              	.LVL45:
 377              	.L43:
 199:rt-thread/components/finsh/msh.c ****             FINSH_NEXT_SYSCALL(index))
 378              		.loc 1 199 0 discriminator 1
 379 000e 0E4B     		ldr	r3, .L49+4
 380 0010 1B68     		ldr	r3, [r3]
 198:rt-thread/components/finsh/msh.c ****             index < _syscall_table_end;
 381              		.loc 1 198 0 discriminator 1
 382 0012 9C42     		cmp	r4, r3
 383 0014 14D2     		bcs	.L48
 202:rt-thread/components/finsh/msh.c **** 
 384              		.loc 1 202 0
 385 0016 2568     		ldr	r5, [r4]
 386 0018 0622     		movs	r2, #6
 387 001a 0C49     		ldr	r1, .L49+8
 388 001c 2846     		mov	r0, r5
 389 001e FFF7FEFF 		bl	strncmp
 390              	.LVL46:
 391 0022 0028     		cmp	r0, #0
 392 0024 F2D1     		bne	.L44
 204:rt-thread/components/finsh/msh.c ****                 index->name[6 + size] == '\0')
 393              		.loc 1 204 0
 394 0026 3246     		mov	r2, r6
 395 0028 3946     		mov	r1, r7
 396 002a A81D     		adds	r0, r5, #6
 397 002c FFF7FEFF 		bl	strncmp
 398              	.LVL47:
 399 0030 0028     		cmp	r0, #0
 400 0032 EBD1     		bne	.L44
 205:rt-thread/components/finsh/msh.c ****         {
 401              		.loc 1 205 0 discriminator 1
 402 0034 B31D     		adds	r3, r6, #6
 403 0036 EB5C     		ldrb	r3, [r5, r3]	@ zero_extendqisi2
 204:rt-thread/components/finsh/msh.c ****                 index->name[6 + size] == '\0')
 404              		.loc 1 204 0 discriminator 1
 405 0038 002B     		cmp	r3, #0
 406 003a E7D1     		bne	.L44
 207:rt-thread/components/finsh/msh.c ****             break;
 407              		.loc 1 207 0
 408 003c A068     		ldr	r0, [r4, #8]
 409              	.LVL48:
 208:rt-thread/components/finsh/msh.c ****         }
 410              		.loc 1 208 0
 411 003e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 412              	.LVL49:
 413              	.L48:
 196:rt-thread/components/finsh/msh.c **** 
 414              		.loc 1 196 0
 415 0040 0020     		movs	r0, #0
 213:rt-thread/components/finsh/msh.c **** 
ARM GAS  /tmp/cc8KpLGG.s 			page 17


 416              		.loc 1 213 0
 417 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 418              	.LVL50:
 419              	.L50:
 420              		.align	2
 421              	.L49:
 422 0044 00000000 		.word	_syscall_table_begin
 423 0048 00000000 		.word	_syscall_table_end
 424 004c 1C000000 		.word	.LC4
 425              		.cfi_endproc
 426              	.LFE21:
 428              		.section	.text.cmd_ps,"ax",%progbits
 429              		.align	1
 430              		.global	cmd_ps
 431              		.syntax unified
 432              		.thumb
 433              		.thumb_func
 434              		.fpu fpv4-sp-d16
 436              	cmd_ps:
 437              	.LFB18:
  93:rt-thread/components/finsh/msh.c ****     extern long list_thread(void);
 438              		.loc 1 93 0
 439              		.cfi_startproc
 440              		@ args = 0, pretend = 0, frame = 0
 441              		@ frame_needed = 0, uses_anonymous_args = 0
 442              	.LVL51:
 443 0000 08B5     		push	{r3, lr}
 444              	.LCFI5:
 445              		.cfi_def_cfa_offset 8
 446              		.cfi_offset 3, -8
 447              		.cfi_offset 14, -4
 102:rt-thread/components/finsh/msh.c ****     return 0;
 448              		.loc 1 102 0
 449 0002 FFF7FEFF 		bl	list_thread
 450              	.LVL52:
 104:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(cmd_ps, __cmd_ps, List threads in the system.);
 451              		.loc 1 104 0
 452 0006 0020     		movs	r0, #0
 453 0008 08BD     		pop	{r3, pc}
 454              		.cfi_endproc
 455              	.LFE18:
 457              		.section	.text.cmd_free,"ax",%progbits
 458              		.align	1
 459              		.global	cmd_free
 460              		.syntax unified
 461              		.thumb
 462              		.thumb_func
 463              		.fpu fpv4-sp-d16
 465              	cmd_free:
 466              	.LFB19:
 109:rt-thread/components/finsh/msh.c ****     extern void list_mem(void);
 467              		.loc 1 109 0
 468              		.cfi_startproc
 469              		@ args = 0, pretend = 0, frame = 0
 470              		@ frame_needed = 0, uses_anonymous_args = 0
 471              	.LVL53:
 472 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/cc8KpLGG.s 			page 18


 473              	.LCFI6:
 474              		.cfi_def_cfa_offset 8
 475              		.cfi_offset 3, -8
 476              		.cfi_offset 14, -4
 116:rt-thread/components/finsh/msh.c **** #endif
 477              		.loc 1 116 0
 478 0002 FFF7FEFF 		bl	list_mem
 479              	.LVL54:
 119:rt-thread/components/finsh/msh.c **** FINSH_FUNCTION_EXPORT_ALIAS(cmd_free, __cmd_free, Show the memory usage in the system.);
 480              		.loc 1 119 0
 481 0006 0020     		movs	r0, #0
 482 0008 08BD     		pop	{r3, pc}
 483              		.cfi_endproc
 484              	.LFE19:
 486              		.section	.text._msh_exec_cmd,"ax",%progbits
 487              		.align	1
 488              		.syntax unified
 489              		.thumb
 490              		.thumb_func
 491              		.fpu fpv4-sp-d16
 493              	_msh_exec_cmd:
 494              	.LFB22:
 304:rt-thread/components/finsh/msh.c ****     int argc;
 495              		.loc 1 304 0
 496              		.cfi_startproc
 497              		@ args = 0, pretend = 0, frame = 40
 498              		@ frame_needed = 0, uses_anonymous_args = 0
 499              	.LVL55:
 500 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 501              	.LCFI7:
 502              		.cfi_def_cfa_offset 20
 503              		.cfi_offset 4, -20
 504              		.cfi_offset 5, -16
 505              		.cfi_offset 6, -12
 506              		.cfi_offset 7, -8
 507              		.cfi_offset 14, -4
 508 0002 8BB0     		sub	sp, sp, #44
 509              	.LCFI8:
 510              		.cfi_def_cfa_offset 64
 511              	.LVL56:
 306:rt-thread/components/finsh/msh.c ****     cmd_function_t cmd_func;
 512              		.loc 1 306 0
 513 0004 0023     		movs	r3, #0
 314:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 514              		.loc 1 314 0
 515 0006 00E0     		b	.L56
 516              	.LVL57:
 517              	.L58:
 315:rt-thread/components/finsh/msh.c ****     if (cmd0_size == 0)
 518              		.loc 1 315 0
 519 0008 0133     		adds	r3, r3, #1
 520              	.LVL58:
 521              	.L56:
 314:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 522              		.loc 1 314 0
 523 000a C45C     		ldrb	r4, [r0, r3]	@ zero_extendqisi2
 524 000c 202C     		cmp	r4, #32
ARM GAS  /tmp/cc8KpLGG.s 			page 19


 525 000e 03D0     		beq	.L57
 314:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 526              		.loc 1 314 0 is_stmt 0 discriminator 1
 527 0010 092C     		cmp	r4, #9
 528 0012 01D0     		beq	.L57
 314:rt-thread/components/finsh/msh.c ****         cmd0_size ++;
 529              		.loc 1 314 0 discriminator 2
 530 0014 8B42     		cmp	r3, r1
 531 0016 F7D3     		bcc	.L58
 532              	.L57:
 316:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 533              		.loc 1 316 0 is_stmt 1
 534 0018 C3B1     		cbz	r3, .L60
 535 001a 1646     		mov	r6, r2
 536 001c 0D46     		mov	r5, r1
 537 001e 0446     		mov	r4, r0
 319:rt-thread/components/finsh/msh.c ****     if (cmd_func == RT_NULL)
 538              		.loc 1 319 0
 539 0020 1946     		mov	r1, r3
 540              	.LVL59:
 541 0022 FFF7FEFF 		bl	msh_get_cmd
 542              	.LVL60:
 320:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 543              		.loc 1 320 0
 544 0026 0746     		mov	r7, r0
 545 0028 98B1     		cbz	r0, .L61
 324:rt-thread/components/finsh/msh.c ****     argc = msh_split(cmd, length, argv);
 546              		.loc 1 324 0
 547 002a 2822     		movs	r2, #40
 548 002c 0021     		movs	r1, #0
 549 002e 6846     		mov	r0, sp
 550              	.LVL61:
 551 0030 FFF7FEFF 		bl	memset
 552              	.LVL62:
 325:rt-thread/components/finsh/msh.c ****     if (argc == 0)
 553              		.loc 1 325 0
 554 0034 6A46     		mov	r2, sp
 555 0036 2946     		mov	r1, r5
 556 0038 2046     		mov	r0, r4
 557 003a FFF7FEFF 		bl	msh_split
 558              	.LVL63:
 326:rt-thread/components/finsh/msh.c ****         return -RT_ERROR;
 559              		.loc 1 326 0
 560 003e 58B1     		cbz	r0, .L62
 330:rt-thread/components/finsh/msh.c ****     return 0;
 561              		.loc 1 330 0
 562 0040 6946     		mov	r1, sp
 563 0042 B847     		blx	r7
 564              	.LVL64:
 565 0044 3060     		str	r0, [r6]
 331:rt-thread/components/finsh/msh.c **** }
 566              		.loc 1 331 0
 567 0046 0020     		movs	r0, #0
 568              	.LVL65:
 569              	.L55:
 332:rt-thread/components/finsh/msh.c **** 
 570              		.loc 1 332 0
ARM GAS  /tmp/cc8KpLGG.s 			page 20


 571 0048 0BB0     		add	sp, sp, #44
 572              	.LCFI9:
 573              		.cfi_remember_state
 574              		.cfi_def_cfa_offset 20
 575              		@ sp needed
 576 004a F0BD     		pop	{r4, r5, r6, r7, pc}
 577              	.LVL66:
 578              	.L60:
 579              	.LCFI10:
 580              		.cfi_restore_state
 317:rt-thread/components/finsh/msh.c **** 
 581              		.loc 1 317 0
 582 004c 4FF0FF30 		mov	r0, #-1
 583              	.LVL67:
 584 0050 FAE7     		b	.L55
 585              	.LVL68:
 586              	.L61:
 321:rt-thread/components/finsh/msh.c **** 
 587              		.loc 1 321 0
 588 0052 4FF0FF30 		mov	r0, #-1
 589              	.LVL69:
 590 0056 F7E7     		b	.L55
 591              	.LVL70:
 592              	.L62:
 327:rt-thread/components/finsh/msh.c **** 
 593              		.loc 1 327 0
 594 0058 4FF0FF30 		mov	r0, #-1
 595              	.LVL71:
 596 005c F4E7     		b	.L55
 597              		.cfi_endproc
 598              	.LFE22:
 600              		.section	.text.msh_is_used,"ax",%progbits
 601              		.align	1
 602              		.global	msh_is_used
 603              		.syntax unified
 604              		.thumb
 605              		.thumb_func
 606              		.fpu fpv4-sp-d16
 608              	msh_is_used:
 609              	.LFB16:
  37:rt-thread/components/finsh/msh.c ****     return RT_TRUE;
 610              		.loc 1 37 0
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 0
 613              		@ frame_needed = 0, uses_anonymous_args = 0
 614              		@ link register save eliminated.
  39:rt-thread/components/finsh/msh.c **** #else
 615              		.loc 1 39 0
 616 0000 0120     		movs	r0, #1
 617 0002 7047     		bx	lr
 618              		.cfi_endproc
 619              	.LFE16:
 621              		.section	.text.msh_exec,"ax",%progbits
 622              		.align	1
 623              		.global	msh_exec
 624              		.syntax unified
 625              		.thumb
ARM GAS  /tmp/cc8KpLGG.s 			page 21


 626              		.thumb_func
 627              		.fpu fpv4-sp-d16
 629              	msh_exec:
 630              	.LFB23:
 373:rt-thread/components/finsh/msh.c ****     int cmd_ret;
 631              		.loc 1 373 0
 632              		.cfi_startproc
 633              		@ args = 0, pretend = 0, frame = 8
 634              		@ frame_needed = 0, uses_anonymous_args = 0
 635              	.LVL72:
 636 0000 10B5     		push	{r4, lr}
 637              	.LCFI11:
 638              		.cfi_def_cfa_offset 8
 639              		.cfi_offset 4, -8
 640              		.cfi_offset 14, -4
 641 0002 82B0     		sub	sp, sp, #8
 642              	.LCFI12:
 643              		.cfi_def_cfa_offset 16
 644 0004 0446     		mov	r4, r0
 377:rt-thread/components/finsh/msh.c ****     {
 645              		.loc 1 377 0
 646 0006 01E0     		b	.L66
 647              	.LVL73:
 648              	.L67:
 379:rt-thread/components/finsh/msh.c ****         length--;
 649              		.loc 1 379 0
 650 0008 0134     		adds	r4, r4, #1
 651              	.LVL74:
 380:rt-thread/components/finsh/msh.c ****     }
 652              		.loc 1 380 0
 653 000a 0139     		subs	r1, r1, #1
 654              	.LVL75:
 655              	.L66:
 377:rt-thread/components/finsh/msh.c ****     {
 656              		.loc 1 377 0
 657 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 658 000e 202B     		cmp	r3, #32
 659 0010 FAD0     		beq	.L67
 377:rt-thread/components/finsh/msh.c ****     {
 660              		.loc 1 377 0 is_stmt 0 discriminator 1
 661 0012 092B     		cmp	r3, #9
 662 0014 F8D0     		beq	.L67
 383:rt-thread/components/finsh/msh.c ****         return 0;
 663              		.loc 1 383 0 is_stmt 1
 664 0016 11B9     		cbnz	r1, .L75
 384:rt-thread/components/finsh/msh.c **** 
 665              		.loc 1 384 0
 666 0018 0020     		movs	r0, #0
 667              	.LVL76:
 668              	.L65:
 429:rt-thread/components/finsh/msh.c **** 
 669              		.loc 1 429 0
 670 001a 02B0     		add	sp, sp, #8
 671              	.LCFI13:
 672              		.cfi_remember_state
 673              		.cfi_def_cfa_offset 8
 674              		@ sp needed
ARM GAS  /tmp/cc8KpLGG.s 			page 22


 675 001c 10BD     		pop	{r4, pc}
 676              	.LVL77:
 677              	.L75:
 678              	.LCFI14:
 679              		.cfi_restore_state
 390:rt-thread/components/finsh/msh.c ****     {
 680              		.loc 1 390 0
 681 001e 01AA     		add	r2, sp, #4
 682 0020 2046     		mov	r0, r4
 683 0022 FFF7FEFF 		bl	_msh_exec_cmd
 684              	.LVL78:
 685 0026 80B9     		cbnz	r0, .L73
 392:rt-thread/components/finsh/msh.c ****     }
 686              		.loc 1 392 0
 687 0028 0198     		ldr	r0, [sp, #4]
 688 002a F6E7     		b	.L65
 689              	.LVL79:
 690              	.L71:
 691              	.LBB3:
 423:rt-thread/components/finsh/msh.c ****         }
 692              		.loc 1 423 0
 693 002c 0133     		adds	r3, r3, #1
 694              	.LVL80:
 695              	.L69:
 421:rt-thread/components/finsh/msh.c ****         {
 696              		.loc 1 421 0
 697 002e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 698 0030 202A     		cmp	r2, #32
 699 0032 01D0     		beq	.L70
 421:rt-thread/components/finsh/msh.c ****         {
 700              		.loc 1 421 0 is_stmt 0 discriminator 1
 701 0034 002A     		cmp	r2, #0
 702 0036 F9D1     		bne	.L71
 703              	.L70:
 425:rt-thread/components/finsh/msh.c ****     }
 704              		.loc 1 425 0 is_stmt 1
 705 0038 0022     		movs	r2, #0
 706 003a 1A70     		strb	r2, [r3]
 707              	.LBE3:
 427:rt-thread/components/finsh/msh.c ****     return -1;
 708              		.loc 1 427 0
 709 003c 2146     		mov	r1, r4
 710 003e 0448     		ldr	r0, .L76
 711 0040 FFF7FEFF 		bl	rt_kprintf
 712              	.LVL81:
 428:rt-thread/components/finsh/msh.c **** }
 713              		.loc 1 428 0
 714 0044 4FF0FF30 		mov	r0, #-1
 715 0048 E7E7     		b	.L65
 716              	.L73:
 717 004a 2346     		mov	r3, r4
 718 004c EFE7     		b	.L69
 719              	.L77:
 720 004e 00BF     		.align	2
 721              	.L76:
 722 0050 00000000 		.word	.LC6
 723              		.cfi_endproc
ARM GAS  /tmp/cc8KpLGG.s 			page 23


 724              	.LFE23:
 726              		.section	.text.msh_auto_complete,"ax",%progbits
 727              		.align	1
 728              		.global	msh_auto_complete
 729              		.syntax unified
 730              		.thumb
 731              		.thumb_func
 732              		.fpu fpv4-sp-d16
 734              	msh_auto_complete:
 735              	.LFB25:
 443:rt-thread/components/finsh/msh.c **** 
 444:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_DFS
 445:rt-thread/components/finsh/msh.c **** void msh_auto_complete_path(char *path)
 446:rt-thread/components/finsh/msh.c **** {
 447:rt-thread/components/finsh/msh.c ****     DIR *dir = RT_NULL;
 448:rt-thread/components/finsh/msh.c ****     struct dirent *dirent = RT_NULL;
 449:rt-thread/components/finsh/msh.c ****     char *full_path, *ptr, *index;
 450:rt-thread/components/finsh/msh.c **** 
 451:rt-thread/components/finsh/msh.c ****     if (!path)
 452:rt-thread/components/finsh/msh.c ****         return;
 453:rt-thread/components/finsh/msh.c **** 
 454:rt-thread/components/finsh/msh.c ****     full_path = (char *)rt_malloc(256);
 455:rt-thread/components/finsh/msh.c ****     if (full_path == RT_NULL) return; /* out of memory */
 456:rt-thread/components/finsh/msh.c **** 
 457:rt-thread/components/finsh/msh.c ****     if (*path != '/')
 458:rt-thread/components/finsh/msh.c ****     {
 459:rt-thread/components/finsh/msh.c ****         getcwd(full_path, 256);
 460:rt-thread/components/finsh/msh.c ****         if (full_path[rt_strlen(full_path) - 1]  != '/')
 461:rt-thread/components/finsh/msh.c ****             strcat(full_path, "/");
 462:rt-thread/components/finsh/msh.c ****     }
 463:rt-thread/components/finsh/msh.c ****     else *full_path = '\0';
 464:rt-thread/components/finsh/msh.c **** 
 465:rt-thread/components/finsh/msh.c ****     index = RT_NULL;
 466:rt-thread/components/finsh/msh.c ****     ptr = path;
 467:rt-thread/components/finsh/msh.c ****     for (;;)
 468:rt-thread/components/finsh/msh.c ****     {
 469:rt-thread/components/finsh/msh.c ****         if (*ptr == '/') index = ptr + 1;
 470:rt-thread/components/finsh/msh.c ****         if (!*ptr) break;
 471:rt-thread/components/finsh/msh.c **** 
 472:rt-thread/components/finsh/msh.c ****         ptr ++;
 473:rt-thread/components/finsh/msh.c ****     }
 474:rt-thread/components/finsh/msh.c ****     if (index == RT_NULL) index = path;
 475:rt-thread/components/finsh/msh.c **** 
 476:rt-thread/components/finsh/msh.c ****     if (index != RT_NULL)
 477:rt-thread/components/finsh/msh.c ****     {
 478:rt-thread/components/finsh/msh.c ****         char *dest = index;
 479:rt-thread/components/finsh/msh.c **** 
 480:rt-thread/components/finsh/msh.c ****         /* fill the parent path */
 481:rt-thread/components/finsh/msh.c ****         ptr = full_path;
 482:rt-thread/components/finsh/msh.c ****         while (*ptr) ptr ++;
 483:rt-thread/components/finsh/msh.c **** 
 484:rt-thread/components/finsh/msh.c ****         for (index = path; index != dest;)
 485:rt-thread/components/finsh/msh.c ****             *ptr++ = *index++;
 486:rt-thread/components/finsh/msh.c ****         *ptr = '\0';
 487:rt-thread/components/finsh/msh.c **** 
 488:rt-thread/components/finsh/msh.c ****         dir = opendir(full_path);
 489:rt-thread/components/finsh/msh.c ****         if (dir == RT_NULL) /* open directory failed! */
ARM GAS  /tmp/cc8KpLGG.s 			page 24


 490:rt-thread/components/finsh/msh.c ****         {
 491:rt-thread/components/finsh/msh.c ****             rt_free(full_path);
 492:rt-thread/components/finsh/msh.c ****             return;
 493:rt-thread/components/finsh/msh.c ****         }
 494:rt-thread/components/finsh/msh.c **** 
 495:rt-thread/components/finsh/msh.c ****         /* restore the index position */
 496:rt-thread/components/finsh/msh.c ****         index = dest;
 497:rt-thread/components/finsh/msh.c ****     }
 498:rt-thread/components/finsh/msh.c **** 
 499:rt-thread/components/finsh/msh.c ****     /* auto complete the file or directory name */
 500:rt-thread/components/finsh/msh.c ****     if (*index == '\0') /* display all of files and directories */
 501:rt-thread/components/finsh/msh.c ****     {
 502:rt-thread/components/finsh/msh.c ****         for (;;)
 503:rt-thread/components/finsh/msh.c ****         {
 504:rt-thread/components/finsh/msh.c ****             dirent = readdir(dir);
 505:rt-thread/components/finsh/msh.c ****             if (dirent == RT_NULL) break;
 506:rt-thread/components/finsh/msh.c **** 
 507:rt-thread/components/finsh/msh.c ****             rt_kprintf("%s\n", dirent->d_name);
 508:rt-thread/components/finsh/msh.c ****         }
 509:rt-thread/components/finsh/msh.c ****     }
 510:rt-thread/components/finsh/msh.c ****     else
 511:rt-thread/components/finsh/msh.c ****     {
 512:rt-thread/components/finsh/msh.c ****         rt_size_t length, min_length;
 513:rt-thread/components/finsh/msh.c **** 
 514:rt-thread/components/finsh/msh.c ****         min_length = 0;
 515:rt-thread/components/finsh/msh.c ****         for (;;)
 516:rt-thread/components/finsh/msh.c ****         {
 517:rt-thread/components/finsh/msh.c ****             dirent = readdir(dir);
 518:rt-thread/components/finsh/msh.c ****             if (dirent == RT_NULL) break;
 519:rt-thread/components/finsh/msh.c **** 
 520:rt-thread/components/finsh/msh.c ****             /* matched the prefix string */
 521:rt-thread/components/finsh/msh.c ****             if (strncmp(index, dirent->d_name, rt_strlen(index)) == 0)
 522:rt-thread/components/finsh/msh.c ****             {
 523:rt-thread/components/finsh/msh.c ****                 if (min_length == 0)
 524:rt-thread/components/finsh/msh.c ****                 {
 525:rt-thread/components/finsh/msh.c ****                     min_length = rt_strlen(dirent->d_name);
 526:rt-thread/components/finsh/msh.c ****                     /* save dirent name */
 527:rt-thread/components/finsh/msh.c ****                     strcpy(full_path, dirent->d_name);
 528:rt-thread/components/finsh/msh.c ****                 }
 529:rt-thread/components/finsh/msh.c **** 
 530:rt-thread/components/finsh/msh.c ****                 length = str_common(dirent->d_name, full_path);
 531:rt-thread/components/finsh/msh.c **** 
 532:rt-thread/components/finsh/msh.c ****                 if (length < min_length)
 533:rt-thread/components/finsh/msh.c ****                 {
 534:rt-thread/components/finsh/msh.c ****                     min_length = length;
 535:rt-thread/components/finsh/msh.c ****                 }
 536:rt-thread/components/finsh/msh.c ****             }
 537:rt-thread/components/finsh/msh.c ****         }
 538:rt-thread/components/finsh/msh.c **** 
 539:rt-thread/components/finsh/msh.c ****         if (min_length)
 540:rt-thread/components/finsh/msh.c ****         {
 541:rt-thread/components/finsh/msh.c ****             if (min_length < rt_strlen(full_path))
 542:rt-thread/components/finsh/msh.c ****             {
 543:rt-thread/components/finsh/msh.c ****                 /* list the candidate */
 544:rt-thread/components/finsh/msh.c ****                 rewinddir(dir);
 545:rt-thread/components/finsh/msh.c **** 
 546:rt-thread/components/finsh/msh.c ****                 for (;;)
ARM GAS  /tmp/cc8KpLGG.s 			page 25


 547:rt-thread/components/finsh/msh.c ****                 {
 548:rt-thread/components/finsh/msh.c ****                     dirent = readdir(dir);
 549:rt-thread/components/finsh/msh.c ****                     if (dirent == RT_NULL) break;
 550:rt-thread/components/finsh/msh.c **** 
 551:rt-thread/components/finsh/msh.c ****                     if (strncmp(index, dirent->d_name, rt_strlen(index)) == 0)
 552:rt-thread/components/finsh/msh.c ****                         rt_kprintf("%s\n", dirent->d_name);
 553:rt-thread/components/finsh/msh.c ****                 }
 554:rt-thread/components/finsh/msh.c ****             }
 555:rt-thread/components/finsh/msh.c **** 
 556:rt-thread/components/finsh/msh.c ****             length = index - path;
 557:rt-thread/components/finsh/msh.c ****             memcpy(index, full_path, min_length);
 558:rt-thread/components/finsh/msh.c ****             path[length + min_length] = '\0';
 559:rt-thread/components/finsh/msh.c ****         }
 560:rt-thread/components/finsh/msh.c ****     }
 561:rt-thread/components/finsh/msh.c **** 
 562:rt-thread/components/finsh/msh.c ****     closedir(dir);
 563:rt-thread/components/finsh/msh.c ****     rt_free(full_path);
 564:rt-thread/components/finsh/msh.c **** }
 565:rt-thread/components/finsh/msh.c **** #endif
 566:rt-thread/components/finsh/msh.c **** 
 567:rt-thread/components/finsh/msh.c **** void msh_auto_complete(char *prefix)
 568:rt-thread/components/finsh/msh.c **** {
 736              		.loc 1 568 0
 737              		.cfi_startproc
 738              		@ args = 0, pretend = 0, frame = 0
 739              		@ frame_needed = 0, uses_anonymous_args = 0
 740              	.LVL82:
 741 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 742              	.LCFI15:
 743              		.cfi_def_cfa_offset 32
 744              		.cfi_offset 3, -32
 745              		.cfi_offset 4, -28
 746              		.cfi_offset 5, -24
 747              		.cfi_offset 6, -20
 748              		.cfi_offset 7, -16
 749              		.cfi_offset 8, -12
 750              		.cfi_offset 9, -8
 751              		.cfi_offset 14, -4
 752              	.LVL83:
 569:rt-thread/components/finsh/msh.c ****     int length, min_length;
 570:rt-thread/components/finsh/msh.c ****     const char *name_ptr, *cmd_name;
 571:rt-thread/components/finsh/msh.c ****     struct finsh_syscall *index;
 572:rt-thread/components/finsh/msh.c **** 
 573:rt-thread/components/finsh/msh.c ****     min_length = 0;
 574:rt-thread/components/finsh/msh.c ****     name_ptr = RT_NULL;
 575:rt-thread/components/finsh/msh.c **** 
 576:rt-thread/components/finsh/msh.c ****     if (*prefix == '\0')
 753              		.loc 1 576 0
 754 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 755 0006 33B1     		cbz	r3, .L87
 756 0008 0646     		mov	r6, r0
 577:rt-thread/components/finsh/msh.c ****     {
 578:rt-thread/components/finsh/msh.c ****         msh_help(0, RT_NULL);
 579:rt-thread/components/finsh/msh.c ****         return;
 580:rt-thread/components/finsh/msh.c ****     }
 581:rt-thread/components/finsh/msh.c **** 
 582:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_DFS
ARM GAS  /tmp/cc8KpLGG.s 			page 26


 583:rt-thread/components/finsh/msh.c ****     /* check whether a spare in the command */
 584:rt-thread/components/finsh/msh.c ****     {
 585:rt-thread/components/finsh/msh.c ****         char *ptr;
 586:rt-thread/components/finsh/msh.c **** 
 587:rt-thread/components/finsh/msh.c ****         ptr = prefix + rt_strlen(prefix);
 588:rt-thread/components/finsh/msh.c ****         while (ptr != prefix)
 589:rt-thread/components/finsh/msh.c ****         {
 590:rt-thread/components/finsh/msh.c ****             if (*ptr == ' ')
 591:rt-thread/components/finsh/msh.c ****             {
 592:rt-thread/components/finsh/msh.c ****                 msh_auto_complete_path(ptr + 1);
 593:rt-thread/components/finsh/msh.c ****                 break;
 594:rt-thread/components/finsh/msh.c ****             }
 595:rt-thread/components/finsh/msh.c **** 
 596:rt-thread/components/finsh/msh.c ****             ptr --;
 597:rt-thread/components/finsh/msh.c ****         }
 598:rt-thread/components/finsh/msh.c **** #ifdef RT_USING_MODULE
 599:rt-thread/components/finsh/msh.c ****         /* There is a chance that the user want to run the module directly. So
 600:rt-thread/components/finsh/msh.c ****          * try to complete the file names. If the completed path is not a
 601:rt-thread/components/finsh/msh.c ****          * module, the system won't crash anyway. */
 602:rt-thread/components/finsh/msh.c ****         if (ptr == prefix)
 603:rt-thread/components/finsh/msh.c ****         {
 604:rt-thread/components/finsh/msh.c ****             msh_auto_complete_path(ptr);
 605:rt-thread/components/finsh/msh.c ****         }
 606:rt-thread/components/finsh/msh.c **** #endif
 607:rt-thread/components/finsh/msh.c ****     }
 608:rt-thread/components/finsh/msh.c **** #endif
 609:rt-thread/components/finsh/msh.c **** 
 610:rt-thread/components/finsh/msh.c ****     /* checks in internal command */
 611:rt-thread/components/finsh/msh.c ****     {
 612:rt-thread/components/finsh/msh.c ****         for (index = _syscall_table_begin; index < _syscall_table_end; FINSH_NEXT_SYSCALL(index))
 757              		.loc 1 612 0
 758 000a 214B     		ldr	r3, .L89
 759 000c 1D68     		ldr	r5, [r3]
 760              	.LVL84:
 574:rt-thread/components/finsh/msh.c **** 
 761              		.loc 1 574 0
 762 000e 4FF00008 		mov	r8, #0
 573:rt-thread/components/finsh/msh.c ****     name_ptr = RT_NULL;
 763              		.loc 1 573 0
 764 0012 4746     		mov	r7, r8
 765              		.loc 1 612 0
 766 0014 13E0     		b	.L81
 767              	.LVL85:
 768              	.L87:
 578:rt-thread/components/finsh/msh.c ****         return;
 769              		.loc 1 578 0
 770 0016 0021     		movs	r1, #0
 771 0018 0846     		mov	r0, r1
 772              	.LVL86:
 773 001a FFF7FEFF 		bl	msh_help
 774              	.LVL87:
 579:rt-thread/components/finsh/msh.c ****     }
 775              		.loc 1 579 0
 776 001e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 777              	.LVL88:
 778              	.L83:
 613:rt-thread/components/finsh/msh.c ****         {
ARM GAS  /tmp/cc8KpLGG.s 			page 27


 614:rt-thread/components/finsh/msh.c ****             /* skip finsh shell function */
 615:rt-thread/components/finsh/msh.c ****             if (strncmp(index->name, "__cmd_", 6) != 0) continue;
 616:rt-thread/components/finsh/msh.c **** 
 617:rt-thread/components/finsh/msh.c ****             cmd_name = (const char *) &index->name[6];
 618:rt-thread/components/finsh/msh.c ****             if (strncmp(prefix, cmd_name, strlen(prefix)) == 0)
 619:rt-thread/components/finsh/msh.c ****             {
 620:rt-thread/components/finsh/msh.c ****                 if (min_length == 0)
 621:rt-thread/components/finsh/msh.c ****                 {
 622:rt-thread/components/finsh/msh.c ****                     /* set name_ptr */
 623:rt-thread/components/finsh/msh.c ****                     name_ptr = cmd_name;
 624:rt-thread/components/finsh/msh.c ****                     /* set initial length */
 625:rt-thread/components/finsh/msh.c ****                     min_length = strlen(name_ptr);
 626:rt-thread/components/finsh/msh.c ****                 }
 627:rt-thread/components/finsh/msh.c **** 
 628:rt-thread/components/finsh/msh.c ****                 length = str_common(name_ptr, cmd_name);
 779              		.loc 1 628 0
 780 0022 2146     		mov	r1, r4
 781 0024 4046     		mov	r0, r8
 782 0026 FFF7FEFF 		bl	str_common
 783              	.LVL89:
 784 002a 8146     		mov	r9, r0
 785              	.LVL90:
 629:rt-thread/components/finsh/msh.c ****                 if (length < min_length)
 786              		.loc 1 629 0
 787 002c 8742     		cmp	r7, r0
 788 002e 00DC     		bgt	.L84
 789 0030 B946     		mov	r9, r7
 790              	.L84:
 791              	.LVL91:
 630:rt-thread/components/finsh/msh.c ****                     min_length = length;
 631:rt-thread/components/finsh/msh.c **** 
 632:rt-thread/components/finsh/msh.c ****                 rt_kprintf("%s\n", cmd_name);
 792              		.loc 1 632 0
 793 0032 2146     		mov	r1, r4
 794 0034 1748     		ldr	r0, .L89+4
 795              	.LVL92:
 796 0036 FFF7FEFF 		bl	rt_kprintf
 797              	.LVL93:
 798 003a 4F46     		mov	r7, r9
 799              	.LVL94:
 800              	.L82:
 612:rt-thread/components/finsh/msh.c ****         {
 801              		.loc 1 612 0 discriminator 2
 802 003c 0C35     		adds	r5, r5, #12
 803              	.LVL95:
 804              	.L81:
 612:rt-thread/components/finsh/msh.c ****         {
 805              		.loc 1 612 0 is_stmt 0 discriminator 1
 806 003e 164B     		ldr	r3, .L89+8
 807 0040 1B68     		ldr	r3, [r3]
 808 0042 9D42     		cmp	r5, r3
 809 0044 1AD2     		bcs	.L88
 615:rt-thread/components/finsh/msh.c **** 
 810              		.loc 1 615 0 is_stmt 1
 811 0046 2C68     		ldr	r4, [r5]
 812 0048 0622     		movs	r2, #6
 813 004a 1449     		ldr	r1, .L89+12
ARM GAS  /tmp/cc8KpLGG.s 			page 28


 814 004c 2046     		mov	r0, r4
 815 004e FFF7FEFF 		bl	strncmp
 816              	.LVL96:
 817 0052 0028     		cmp	r0, #0
 818 0054 F2D1     		bne	.L82
 617:rt-thread/components/finsh/msh.c ****             if (strncmp(prefix, cmd_name, strlen(prefix)) == 0)
 819              		.loc 1 617 0
 820 0056 0634     		adds	r4, r4, #6
 821              	.LVL97:
 618:rt-thread/components/finsh/msh.c ****             {
 822              		.loc 1 618 0
 823 0058 3046     		mov	r0, r6
 824 005a FFF7FEFF 		bl	strlen
 825              	.LVL98:
 826 005e 0246     		mov	r2, r0
 827 0060 2146     		mov	r1, r4
 828 0062 3046     		mov	r0, r6
 829 0064 FFF7FEFF 		bl	strncmp
 830              	.LVL99:
 831 0068 0028     		cmp	r0, #0
 832 006a E7D1     		bne	.L82
 620:rt-thread/components/finsh/msh.c ****                 {
 833              		.loc 1 620 0
 834 006c 002F     		cmp	r7, #0
 835 006e D8D1     		bne	.L83
 836              	.LVL100:
 625:rt-thread/components/finsh/msh.c ****                 }
 837              		.loc 1 625 0
 838 0070 2046     		mov	r0, r4
 839 0072 FFF7FEFF 		bl	strlen
 840              	.LVL101:
 841 0076 0746     		mov	r7, r0
 842              	.LVL102:
 623:rt-thread/components/finsh/msh.c ****                     /* set initial length */
 843              		.loc 1 623 0
 844 0078 A046     		mov	r8, r4
 845 007a D2E7     		b	.L83
 846              	.LVL103:
 847              	.L88:
 633:rt-thread/components/finsh/msh.c ****             }
 634:rt-thread/components/finsh/msh.c ****         }
 635:rt-thread/components/finsh/msh.c ****     }
 636:rt-thread/components/finsh/msh.c **** 
 637:rt-thread/components/finsh/msh.c ****     /* auto complete string */
 638:rt-thread/components/finsh/msh.c ****     if (name_ptr != NULL)
 848              		.loc 1 638 0
 849 007c B8F1000F 		cmp	r8, #0
 850 0080 04D0     		beq	.L78
 639:rt-thread/components/finsh/msh.c ****     {
 640:rt-thread/components/finsh/msh.c ****         rt_strncpy(prefix, name_ptr, min_length);
 851              		.loc 1 640 0
 852 0082 3A46     		mov	r2, r7
 853 0084 4146     		mov	r1, r8
 854 0086 3046     		mov	r0, r6
 855 0088 FFF7FEFF 		bl	rt_strncpy
 856              	.LVL104:
 857              	.L78:
ARM GAS  /tmp/cc8KpLGG.s 			page 29


 858 008c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 859              	.LVL105:
 860              	.L90:
 861              		.align	2
 862              	.L89:
 863 0090 00000000 		.word	_syscall_table_begin
 864 0094 00000000 		.word	.LC7
 865 0098 00000000 		.word	_syscall_table_end
 866 009c 1C000000 		.word	.LC4
 867              		.cfi_endproc
 868              	.LFE25:
 870              		.global	__fsym___cmd_free
 871              		.global	__fsym___cmd_free_desc
 872              		.global	__fsym___cmd_free_name
 873              		.global	__fsym___cmd_ps
 874              		.global	__fsym___cmd_ps_desc
 875              		.global	__fsym___cmd_ps_name
 876              		.global	__fsym___cmd_help
 877              		.global	__fsym___cmd_help_desc
 878              		.global	__fsym___cmd_help_name
 879              		.section	.rodata.msh_auto_complete.str1.4,"aMS",%progbits,1
 880              		.align	2
 881              	.LC7:
 882 0000 25730A00 		.ascii	"%s\012\000"
 883              		.section	.rodata.msh_exec.str1.4,"aMS",%progbits,1
 884              		.align	2
 885              	.LC6:
 886 0000 25733A20 		.ascii	"%s: command not found.\012\000"
 886      636F6D6D 
 886      616E6420 
 886      6E6F7420 
 886      666F756E 
 887              		.section	.rodata.msh_help.str1.4,"aMS",%progbits,1
 888              		.align	2
 889              	.LC3:
 890 0000 52542D54 		.ascii	"RT-Thread shell commands:\012\000"
 890      68726561 
 890      64207368 
 890      656C6C20 
 890      636F6D6D 
 891 001b 00       		.space	1
 892              	.LC4:
 893 001c 5F5F636D 		.ascii	"__cmd_\000"
 893      645F00
 894 0023 00       		.space	1
 895              	.LC5:
 896 0024 252D3136 		.ascii	"%-16s - %s\012\000"
 896      73202D20 
 896      25730A00 
 897              		.section	.rodata.msh_split.str1.4,"aMS",%progbits,1
 898              		.align	2
 899              	.LC0:
 900 0000 546F6F20 		.ascii	"Too many args ! We only Use:\012\000"
 900      6D616E79 
 900      20617267 
 900      73202120 
 900      5765206F 
ARM GAS  /tmp/cc8KpLGG.s 			page 30


 901 001e 0000     		.space	2
 902              	.LC1:
 903 0020 25732000 		.ascii	"%s \000"
 904              	.LC2:
 905 0024 0A00     		.ascii	"\012\000"
 906              		.section	.rodata.name,"a",%progbits
 907              		.align	2
 910              	__fsym___cmd_free_desc:
 911 0000 53686F77 		.ascii	"Show the memory usage in the system.\000"
 911      20746865 
 911      206D656D 
 911      6F727920 
 911      75736167 
 912 0025 000000   		.space	3
 915              	__fsym___cmd_free_name:
 916 0028 5F5F636D 		.ascii	"__cmd_free\000"
 916      645F6672 
 916      656500
 917 0033 00       		.space	1
 920              	__fsym___cmd_ps_desc:
 921 0034 4C697374 		.ascii	"List threads in the system.\000"
 921      20746872 
 921      65616473 
 921      20696E20 
 921      74686520 
 924              	__fsym___cmd_ps_name:
 925 0050 5F5F636D 		.ascii	"__cmd_ps\000"
 925      645F7073 
 925      00
 926 0059 000000   		.space	3
 929              	__fsym___cmd_help_desc:
 930 005c 52542D54 		.ascii	"RT-Thread shell help.\000"
 930      68726561 
 930      64207368 
 930      656C6C20 
 930      68656C70 
 931 0072 0000     		.space	2
 934              	__fsym___cmd_help_name:
 935 0074 5F5F636D 		.ascii	"__cmd_help\000"
 935      645F6865 
 935      6C7000
 936              		.section	FSymTab,"a",%progbits
 937              		.align	2
 940              	__fsym___cmd_free:
 941 0000 00000000 		.word	__fsym___cmd_free_name
 942 0004 00000000 		.word	__fsym___cmd_free_desc
 943 0008 00000000 		.word	cmd_free
 946              	__fsym___cmd_ps:
 947 000c 00000000 		.word	__fsym___cmd_ps_name
 948 0010 00000000 		.word	__fsym___cmd_ps_desc
 949 0014 00000000 		.word	cmd_ps
 952              	__fsym___cmd_help:
 953 0018 00000000 		.word	__fsym___cmd_help_name
 954 001c 00000000 		.word	__fsym___cmd_help_desc
 955 0020 00000000 		.word	msh_help
 956              		.text
 957              	.Letext0:
ARM GAS  /tmp/cc8KpLGG.s 			page 31


 958              		.file 2 "rt-thread/include/rtdef.h"
 959              		.file 3 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/machine/_default_types.h"
 960              		.file 4 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/lock.h"
 961              		.file 5 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_types.h"
 962              		.file 6 "/opt/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 963              		.file 7 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/reent.h"
 964              		.file 8 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/_stdint.h"
 965              		.file 9 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/time.h"
 966              		.file 10 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/errno.h"
 967              		.file 11 "rt-thread/components/finsh/finsh_api.h"
 968              		.file 12 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/ctype.h"
 969              		.file 13 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/stdlib.h"
 970              		.file 14 "rt-thread/components/finsh/finsh.h"
 971              		.file 15 "rt-thread/include/rtthread.h"
 972              		.file 16 "/opt/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/string.h"
ARM GAS  /tmp/cc8KpLGG.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 msh.c
     /tmp/cc8KpLGG.s:18     .text.str_common:0000000000000000 $t
     /tmp/cc8KpLGG.s:24     .text.str_common:0000000000000000 str_common
     /tmp/cc8KpLGG.s:79     .text.msh_split:0000000000000000 $t
     /tmp/cc8KpLGG.s:85     .text.msh_split:0000000000000000 msh_split
     /tmp/cc8KpLGG.s:253    .text.msh_split:00000000000000ac $d
     /tmp/cc8KpLGG.s:260    .text.msh_help:0000000000000000 $t
     /tmp/cc8KpLGG.s:267    .text.msh_help:0000000000000000 msh_help
     /tmp/cc8KpLGG.s:332    .text.msh_help:0000000000000040 $d
     /tmp/cc8KpLGG.s:342    .text.msh_get_cmd:0000000000000000 $t
     /tmp/cc8KpLGG.s:348    .text.msh_get_cmd:0000000000000000 msh_get_cmd
     /tmp/cc8KpLGG.s:422    .text.msh_get_cmd:0000000000000044 $d
     /tmp/cc8KpLGG.s:429    .text.cmd_ps:0000000000000000 $t
     /tmp/cc8KpLGG.s:436    .text.cmd_ps:0000000000000000 cmd_ps
     /tmp/cc8KpLGG.s:458    .text.cmd_free:0000000000000000 $t
     /tmp/cc8KpLGG.s:465    .text.cmd_free:0000000000000000 cmd_free
     /tmp/cc8KpLGG.s:487    .text._msh_exec_cmd:0000000000000000 $t
     /tmp/cc8KpLGG.s:493    .text._msh_exec_cmd:0000000000000000 _msh_exec_cmd
     /tmp/cc8KpLGG.s:601    .text.msh_is_used:0000000000000000 $t
     /tmp/cc8KpLGG.s:608    .text.msh_is_used:0000000000000000 msh_is_used
     /tmp/cc8KpLGG.s:622    .text.msh_exec:0000000000000000 $t
     /tmp/cc8KpLGG.s:629    .text.msh_exec:0000000000000000 msh_exec
     /tmp/cc8KpLGG.s:722    .text.msh_exec:0000000000000050 $d
     /tmp/cc8KpLGG.s:727    .text.msh_auto_complete:0000000000000000 $t
     /tmp/cc8KpLGG.s:734    .text.msh_auto_complete:0000000000000000 msh_auto_complete
     /tmp/cc8KpLGG.s:863    .text.msh_auto_complete:0000000000000090 $d
     /tmp/cc8KpLGG.s:940    FSymTab:0000000000000000 __fsym___cmd_free
     /tmp/cc8KpLGG.s:910    .rodata.name:0000000000000000 __fsym___cmd_free_desc
     /tmp/cc8KpLGG.s:915    .rodata.name:0000000000000028 __fsym___cmd_free_name
     /tmp/cc8KpLGG.s:946    FSymTab:000000000000000c __fsym___cmd_ps
     /tmp/cc8KpLGG.s:920    .rodata.name:0000000000000034 __fsym___cmd_ps_desc
     /tmp/cc8KpLGG.s:924    .rodata.name:0000000000000050 __fsym___cmd_ps_name
     /tmp/cc8KpLGG.s:952    FSymTab:0000000000000018 __fsym___cmd_help
     /tmp/cc8KpLGG.s:929    .rodata.name:000000000000005c __fsym___cmd_help_desc
     /tmp/cc8KpLGG.s:934    .rodata.name:0000000000000074 __fsym___cmd_help_name
     /tmp/cc8KpLGG.s:880    .rodata.msh_auto_complete.str1.4:0000000000000000 $d
     /tmp/cc8KpLGG.s:884    .rodata.msh_exec.str1.4:0000000000000000 $d
     /tmp/cc8KpLGG.s:888    .rodata.msh_help.str1.4:0000000000000000 $d
     /tmp/cc8KpLGG.s:898    .rodata.msh_split.str1.4:0000000000000000 $d
     /tmp/cc8KpLGG.s:907    .rodata.name:0000000000000000 $d
     /tmp/cc8KpLGG.s:937    FSymTab:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
rt_kprintf
strncmp
_syscall_table_begin
_syscall_table_end
list_thread
list_mem
memset
strlen
rt_strncpy
